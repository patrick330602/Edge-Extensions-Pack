/*!
 * ---------------------------------------------------------
 * Copyright(C) Microsoft Corporation. All rights reserved.
 * ---------------------------------------------------------
 */
(function(){(function(){typeof msBrowser!="undefined"?chrome=msBrowser:typeof browser!="undefined"&&(chrome=browser)})();var t=function(){var n=function(n){return chrome.i18n.getMessage(n)};return{getI18nMessage:n}}(),r={init:function(){this.initI18n();this.initFontFaceIfNeeded();this.initSlide();this.initListener()},initI18n:function(){$("[data-i18n]").each(function(){var n=$(this).data("i18n");n&&$(this).html(chrome.i18n.getMessage(n))})},initFontFaceIfNeeded:function(){chrome.i18n.getUILanguage()==="zh-CN"&&$("head").append('<link rel="stylesheet" href="../webcore/stylesheets/font-localizations/microsoft-yahei-ui.css" />')},initSlide:function(){var t=window.location.hash;t==="#welcome"&&$("#ftuPageRestartTipId").show();i();n.init()},initListener:function(){$("#ftuSlider").on("slid.bs.carousel",function(){var i=$(this).data("bs.carousel"),t=i.getItemIndex(i.$element.find(".item.active"));n.stopAll();t>=1&&t<=3&&n.play(t-1)});$("#ftuSlider").on("slide.bs.carousel",function(){var t=$(this).data("bs.carousel"),i=t.getItemIndex(t.$element.find(".item.active"));i>=1&&i<=3&&n.stopAll()})}},i=function(){var n=500;$("#ftuPageSlide1LogoImageUpId").animate({opacity:1},n,function(){$(this).animate({opacity:0},n,function(){$(this).animate({opacity:1},n,i)})})},n=function(){var u=1e3,o=1,s=.1,h="FtuPageSlideDivParentId",c="FtuPageSlideImageId",l="PathDivId",a="PathSVGId",v="PathPolyLineId",y="ActionDivId",p="ActionLabelId",f={init:function(){var n=this.animationName;this.parentDiv=$("#"+n+h);this.parentImage=$("#"+n+c);this.pathDiv=$("#"+n+l);this.pathSVG=$("#"+n+a);this.pathLine=$("#"+n+v);this.actionDiv=$("#"+n+y);this.actionLabel=$("#"+n+p)},appendPoint:function(n,t){var i=this.pathSVG.get(0).createSVGPoint();i.x=n;i.y=t;this.pathLine.get(0).points.appendItem(i)},clearPoint:function(){this.pathLine.get(0).points.clear()},play:function(){this.pathDiv.show();this.x=this.startX;this.y=this.startY;this.appendPoint(this.x,this.y);this.animationId=window.requestAnimationFrame(this.drawStep1.bind(this));this.showActionLabel()},stop:function(){window.cancelAnimationFrame(this.animationId);this.clearPoint();this.parentDiv.finish();this.pathDiv.hide();this.actionDiv.hide();this.parentImage.attr("src",this.defaultBackgroundImageSrc)},drawStep1:function(){this.x+=this.vx1;this.y+=this.vy1;this.appendPoint(this.x,this.y);this.animationId=this.shouldStopStep1()?window.requestAnimationFrame(this.drawStep2.bind(this)):window.requestAnimationFrame(this.drawStep1.bind(this))},drawStep2:function(){if(this.x+=this.vx2,this.y+=this.vy2,this.appendPoint(this.x,this.y),this.shouldStopStep2()){var n=this;this.parentDiv.fadeTo(u,o,function(){n.switchBackground()})}else this.animationId=window.requestAnimationFrame(this.drawStep2.bind(this))},showActionLabel:function(){this.actionLabel.html(this.actionText);this.actionDiv.show()},switchBackground:function(){this.clearPoint();this.pathDiv.hide();this.actionDiv.hide();var n=this;this.parentDiv.fadeTo(u,s,function(){$(this).fadeTo(u,o,function(){n.onAnimationCompleted()})})}},n=Object.create(f,{animationName:{value:"scrollToBottom"},startX:{value:820},startY:{value:320},stopX:{value:840},stopY:{value:160},endX:{value:860},endY:{value:320},vx1:{value:.5},vy1:{value:-4},vx2:{value:.5},vy2:{value:4},actionText:{value:t.getI18nMessage("actionScrollToBottom")},defaultBackgroundImageSrc:{value:"../image/ftu/slide2_bg.png"},shouldStopStep1:{value:function(){return this.y<=this.stopY&&this.x>=this.stopX}},shouldStopStep2:{value:function(){return this.y>=this.endY&&this.x>=this.endX}}}),i=Object.create(f,{animationName:{value:"scrollToTop"},startX:{value:820},startY:{value:160},stopX:{value:840},stopY:{value:320},endX:{value:860},endY:{value:160},vx1:{value:.5},vy1:{value:4},vx2:{value:.5},vy2:{value:-4},actionText:{value:t.getI18nMessage("actionScrollToTop")},defaultBackgroundImageSrc:{value:"../image/ftu/slide2_scroll_to_bottom_bg.png"},shouldStopStep1:{value:function(){return this.y>=this.stopY&&this.x>=this.stopX}},shouldStopStep2:{value:function(){return this.y<=this.endY&&this.x>=this.endX}}}),r=Object.create(f,{animationName:{value:"openNewTab"},startX:{value:760},startY:{value:320},stopX:{value:920},stopY:{value:320},endX:{value:920},endY:{value:160},vx1:{value:4},vy1:{value:0},vx2:{value:0},vy2:{value:-4},actionText:{value:t.getI18nMessage("actionOpenNewTab")},defaultBackgroundImageSrc:{value:"../image/ftu/slide2_scroll_to_top_bg.png"},shouldStopStep1:{value:function(){return this.x>=this.stopX}},shouldStopStep2:{value:function(){return this.y<=this.endY}}}),e=[n,i,r],w=function(){i.init();n.init();r.init();i.onAnimationCompleted=function(){i.play()};n.onAnimationCompleted=function(){n.play()};r.onAnimationCompleted=function(){r.play()}},b=function(n){e[n].play()},k=function(n){e[n].stop()},d=function(){e.forEach(function(n){n.stop()})};return{init:w,play:b,stop:k,stopAll:d}}();r.init()})()
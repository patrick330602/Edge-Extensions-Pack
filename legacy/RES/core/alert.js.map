{"version":3,"sources":["core/alert.js"],"names":[],"mappings":"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","file":"core/alert.js","sourcesContent":["/* exported gdAlert, alert */\r\n\r\n// Create a nice alert function...\r\nvar gdAlert = {\r\n\tcontainer: false,\r\n\toverlay: false,\r\n\r\n\tpopulateContainer: function(callback) {\r\n\t\tif (gdAlert.container !== false) {\r\n\t\t\tgdAlert.container.innerHTML = '';\r\n\t\t} else {\r\n\t\t\tgdAlert.container = RESUtils.createElement('div', 'alert_message');\r\n\t\t}\r\n\r\n\t\t// Add text area\r\n\t\tgdAlert.container.appendChild(document.createElement('div'));\r\n\r\n\t\tvar closeButton;\r\n\t\tif (typeof callback === 'function') {\r\n\t\t\tthis.okButton = gdAlert.makeButton('confirm', 'button-right');\r\n\t\t\tthis.okButton.addEventListener('click', callback, false);\r\n\t\t\tthis.okButton.addEventListener('click', gdAlert.close, false);\r\n\r\n\t\t\tcloseButton = gdAlert.makeButton('cancel', 'button-right');\r\n\t\t\tcloseButton.addEventListener('click', gdAlert.close, false);\r\n\r\n\t\t\tgdAlert.container.appendChild(this.okButton);\r\n\t\t\tgdAlert.container.appendChild(closeButton);\r\n\t\t} else {\r\n\t\t\tcloseButton = gdAlert.makeButton('Ok');\r\n\t\t\tcloseButton.addEventListener('click', gdAlert.close, false);\r\n\r\n\t\t\tgdAlert.container.appendChild(closeButton);\r\n\t\t}\r\n\t\tdocument.body.appendChild(gdAlert.container);\r\n\r\n\t\t// Focus on cancel/okay button, so user can click enter to close\r\n\t\tsetTimeout(function() { closeButton.focus(); }, 0);\r\n\t},\r\n\topen: function(text, callback) {\r\n\t\tif (gdAlert.isOpen) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$('body').on('keyup', gdAlert.listenForEscape);\r\n\r\n\t\tgdAlert.isOpen = true;\r\n\t\tgdAlert.populateContainer(callback);\r\n\r\n\t\t// Set message\r\n\t\t$(gdAlert.container.getElementsByTagName('div')[0]).html(text);\r\n\t\tgdAlert.container.getElementsByTagName('input')[0].focus();\r\n\r\n\t\t// create site overlay\r\n\t\tif (gdAlert.overlay === false) {\r\n\t\t\tgdAlert.overlay = RESUtils.createElement('div', 'alert_message_background');\r\n\t\t\tdocument.body.appendChild(gdAlert.overlay);\r\n\t\t}\r\n\r\n\t\tgdAlert.container.style.top = Math.max(0, (($(window).height() - $(gdAlert.container).outerHeight()) / 2) ) + 'px';\r\n\t\tgdAlert.container.style.left = Math.max(0, (($(window).width() - $(gdAlert.container).outerWidth()) / 2) ) + 'px';\r\n\r\n\t\tRESUtils.fadeElementIn(gdAlert.container, 0.3);\r\n\t\tRESUtils.fadeElementIn(gdAlert.overlay, 0.3);\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(false, 'gdAlert');\r\n\t},\r\n\tlistenForEscape: function(e) {\r\n\t\tif (e.keyCode === 27) {\r\n\t\t\tgdAlert.close();\r\n\t\t}\r\n\t},\r\n\tclose: function() {\r\n\t\t$('body').off('keyup', gdAlert.listenForEscape);\r\n\t\tgdAlert.isOpen = false;\r\n\r\n\t\tRESUtils.fadeElementOut(gdAlert.container, 0.3);\r\n\t\tRESUtils.fadeElementOut(gdAlert.overlay, 0.3);\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(true, 'gdAlert');\r\n\t},\r\n\tmakeButton: function(text, cls){\r\n\t\tvar btn = document.createElement('input');\r\n\t\tbtn.setAttribute('type', 'button');\r\n\t\tbtn.setAttribute('value', text);\r\n\t\tif (typeof cls !== 'undefined') {\r\n\t\t\tbtn.classList.add(cls);\r\n\t\t}\r\n\t\treturn btn;\r\n\t}\r\n};\r\n\r\n// overwrite the alert function\r\nvar alert = function(text, callback) {\r\n\tgdAlert.open(text, callback);\r\n};\r\n"],"sourceRoot":"/source/"}
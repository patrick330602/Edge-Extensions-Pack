{"version":3,"sources":["core/template.js"],"names":[],"mappings":";;;;;;AAEA,IAAI,YAAJ;AACA,CAAC,YAAW;AACX,gBAAe;AACd,QAAM,cAAS,IAAT,EAAe,QAAf,EAAyB;AAC9B,OAAI,QAAQ,QAAR,EAAkB;AACrB,0BAAsB,IAAtB,CAA2B,YAAW;AACrC,SAAI,oBAAoB,qBAAqB,IAArB,CAApB,CADiC;AAErC,cAAS,iBAAT,EAFqC;KAAX,CAA3B,CADqB;IAAtB;GADK;AAQN,WAAS,iBAAS,IAAT,EAAe;AACvB,UAAO,qBAAqB,IAArB,CAAP,CADuB;GAAf;EATV,CADW;;AAeX,KAAI,wBAAwB,EAAE,QAAF,EAAxB,CAfO;AAgBX,UAAS,aAAT,GAAyB;AACxB,MAAI,OAAO,eAAe,kBAAf,KAAsC,UAA7C,EAAyD;AAC5D,cAAW,aAAX,EAA0B,EAA1B,EAD4D;GAA7D,MAEO;AACN,kBAAe,kBAAf,CAAkC,qBAAlC,EAAyD,UAAS,IAAT,EAAe;AACvE,uBAAmB,eAAe,mBAAf,CAAmC,IAAnC,CAAnB,CADuE;AAEvE,0BAAsB,OAAtB,GAFuE;IAAf,CAAzD,CADM;GAFP;EADD;AAUA,iBA1BW;;AA4BX,KAAI,gBAAJ,CA5BW;AA6BX,KAAI,qBAAqB,EAArB,CA7BO;AA8BX,UAAS,oBAAT,CAA8B,IAA9B,EAAoC;AACnC,MAAI,mBAAmB,IAAnB,MAA6B,SAA7B,EAAwC;AAC3C,OAAI,WAAW,gBAAgB,IAAhB,CAAX,CADuC;AAE3C,OAAI,CAAC,QAAD,EAAW;AACd,YAAQ,IAAR,CAAa,qCAAqC,IAArC,GAA4C,GAA5C,CAAb,CADc;IAAf,MAEO;AACN,QAAI,oBAAoB,wBAAwB,QAAxB,CAApB,CADE;AAEN,uBAAmB,IAAnB,IAA2B,iBAA3B,CAFM;IAFP;GAFD;;AAUA,SAAO,mBAAmB,IAAnB,CAAP,CAXmC;EAApC;;AAcA,UAAS,uBAAT,CAAiC,QAAjC,EAA2C;AAC1C,SAAO;AACN,SAAM,cAAS,KAAT,EAAgB;AACrB,WAAO,EAAE,SAAS,MAAT,CAAgB,KAAhB,CAAF,CAAP,CADqB;IAAhB;AAGN,SAAM,cAAS,KAAT,EAAgB;AACrB,WAAO,SAAS,MAAT,CAAgB,KAAhB,CAAP,CADqB;IAAhB;GAJP,CAD0C;EAA3C;;AAWA,UAAS,eAAT,CAAyB,IAAzB,EAA+B;;;AAG9B,MAAI,WAAW,iBAAiB,cAAjB,CAAgC,IAAhC,CAAX,CAH0B;AAI9B,MAAI,CAAC,QAAD,EAAW;AACd,WAAQ,IAAR,CAAa,yBAAb,EAAwC,IAAxC,EADc;GAAf;AAGA,MAAI,iBAAiB,SAAS,SAAT,CAPS;AAQ9B,MAAI,WAAW,MAAM,OAAN,CAAc,cAAd,CAAX,CAR0B;AAS9B,SAAO,QAAP,CAT8B;EAA/B;CAvDA,CAAD;;AAoEA,IAAI,QAAO,yDAAP,KAAmB,QAAnB,EAA6B;AAChC,SAAQ,YAAR,GAAuB,YAAvB,CADgC;CAAjC","file":"core/template.js","sourcesContent":["/* exported RESTemplates */\r\n\r\nvar RESTemplates;\r\n(function() {\r\n\tRESTemplates = {\r\n\t\tload: function(name, callback) {\r\n\t\t\tif (name && callback) {\r\n\t\t\t\tloadTemplatesDeferred.done(function() {\r\n\t\t\t\t\tvar templateInterface = getTemplateInterface(name);\r\n\t\t\t\t\tcallback(templateInterface);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetSync: function(name) {\r\n\t\t\treturn getTemplateInterface(name);\r\n\t\t}\r\n\t};\r\n\r\n\tvar loadTemplatesDeferred = $.Deferred();\r\n\tfunction loadTemplates() {\r\n\t\tif (typeof RESEnvironment.loadResourceAsText !== 'function') {\r\n\t\t\tsetTimeout(loadTemplates, 10);\r\n\t\t} else {\r\n\t\t\tRESEnvironment.loadResourceAsText('core/templates.html', function(html) {\r\n\t\t\t\ttemplateElements = RESEnvironment.parseHtmlAsDocument(html);\r\n\t\t\t\tloadTemplatesDeferred.resolve();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tloadTemplates();\r\n\r\n\tvar templateElements;\r\n\tvar templateInterfaces = {};\r\n\tfunction getTemplateInterface(name) {\r\n\t\tif (templateInterfaces[name] === undefined) {\r\n\t\t\tvar compiled = compileTemplate(name);\r\n\t\t\tif (!compiled) {\r\n\t\t\t\tconsole.warn('RES could not compile template \"' + name + '\"');\r\n\t\t\t} else {\r\n\t\t\t\tvar templateInterface = createTemplateInterface(compiled);\r\n\t\t\t\ttemplateInterfaces[name] = templateInterface;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn templateInterfaces[name];\r\n\t}\r\n\r\n\tfunction createTemplateInterface(compiled) {\r\n\t\treturn {\r\n\t\t\thtml: function(model) {\r\n\t\t\t\treturn $(compiled.render(model));\r\n\t\t\t},\r\n\t\t\ttext: function(model) {\r\n\t\t\t\treturn compiled.render(model);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tfunction compileTemplate(name) {\r\n\t\t// Assumes templates are loaded already\r\n\r\n\t\tvar template = templateElements.getElementById(name);\r\n\t\tif (!template) {\r\n\t\t\tconsole.warn('Could not find template', name);\r\n\t\t}\r\n\t\tvar templateSource = template.innerHTML;\r\n\t\tvar compiled = Hogan.compile(templateSource);\r\n\t\treturn compiled;\r\n\t}\r\n})();\r\n\r\nif (typeof exports === 'object') {\r\n\texports.RESTemplates = RESTemplates;\r\n}\r\n"],"sourceRoot":"/source/"}
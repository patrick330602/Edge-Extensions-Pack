{"version":3,"sources":["modules/userHighlight.js"],"names":[],"mappings":"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","file":"modules/userHighlight.js","sourcesContent":["addModule('userHighlight', function(module, moduleID) {\r\n\tmodule.moduleName = 'User Highlighter';\r\n\tmodule.category = ['Users', 'Appearance'];\r\n\tmodule.description = 'Highlights certain users in comment threads: OP, Admin, Friends, Mod - contributed by MrDerk';\r\n\tmodule.options = {\r\n\t\thighlightOP: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Highlight OP\\'s comments'\r\n\t\t},\r\n\t\tOPColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#0055DF',\r\n\t\t\tdescription: 'Color to use to highlight OP. Defaults to original text color',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightOP'\r\n\t\t},\r\n\t\tOPColorHover: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#4E7EAB',\r\n\t\t\tdescription: 'Color used to highlight OP on hover.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightOP'\r\n\t\t},\r\n\t\thighlightAdmin: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Highlight Admin\\'s comments'\r\n\t\t},\r\n\t\tadminColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#FF0011',\r\n\t\t\tdescription: 'Color to use to highlight Admins. Defaults to original text color',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightAdmin'\r\n\t\t},\r\n\t\tadminColorHover: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#B3000C',\r\n\t\t\tdescription: 'Color used to highlight Admins on hover.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightAdmin'\r\n\t\t},\r\n\t\thighlightFriend: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Highlight Friends\\' comments'\r\n\t\t},\r\n\t\tfriendColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#FF4500',\r\n\t\t\tdescription: 'Color to use to highlight Friends. Defaults to original text color',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightFriend'\r\n\t\t},\r\n\t\tfriendColorHover: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#B33000',\r\n\t\t\tdescription: 'Color used to highlight Friends on hover.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightFriend'\r\n\t\t},\r\n\t\thighlightMod: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Highlight Mod\\'s comments'\r\n\t\t},\r\n\t\tmodColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#228822',\r\n\t\t\tdescription: 'Color to use to highlight Mods. Defaults to original text color',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightMod'\r\n\t\t},\r\n\t\tmodColorHover: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#134913',\r\n\t\t\tdescription: 'Color used to highlight Mods on hover. Defaults to gray.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightMod'\r\n\t\t},\r\n\t\thighlightFirstCommenter: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Highlight the person who has the first comment in a tree, within that tree'\r\n\t\t},\r\n\t\tdontHighlightFirstComment: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Don\\'t highlight the \"first commenter\" on the first comment in a tree',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightFirstCommenter'\r\n\t\t},\r\n\t\tfirstCommentColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#46B6CC',\r\n\t\t\tdescription: 'Color to use to highlight the first-commenter. Defaults to original text color',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightFirstCommenter'\r\n\t\t},\r\n\t\tfirstCommentColorHover: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#72D2E5',\r\n\t\t\tdescription: 'Color used to highlight the first-commenter on hover.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightFirstCommenter'\r\n\t\t},\r\n\t\tfontColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#FFFFFF',\r\n\t\t\tdescription: 'Color for highlighted text.',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tautoColorUsernames: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Automatically set a special color for each username'\r\n\t\t},\r\n\t\tautoColorUsing: {\r\n\t\t\tdescription: 'Select a method for setting colors for usernames',\r\n\t\t\ttype: 'enum',\r\n\t\t\tvalues: [],\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'autoColorUsernames'\r\n\t\t},\r\n\t\tgenerateHoverColors: {\r\n\t\t\ttype: 'button',\r\n\t\t\ttext: 'Generate',\r\n\t\t\tcallback: generateHoverColors,\r\n\t\t\tdescription: 'Automatically generate hover color based on normal color.',\r\n\t\t\tadvanced: false // TODO: true after release after 2014-06-30\r\n\t\t}\r\n\t};\r\n\tmodule.loadDynamicOptions = function() {\r\n\t\tvar autoColorUsingStrategies = module.autoColorUsing;\r\n\t\tvar autoColorUsingOption = module.options.autoColorUsing;\r\n\t\tfor (var i = 0, length = autoColorUsingStrategies.length; i < length; i++) {\r\n\t\t\tvar strategy = autoColorUsingStrategies[i];\r\n\t\t\tautoColorUsingOption.values.push({\r\n\t\t\t\tvalue: strategy.name,\r\n\t\t\t\tname: strategy.description\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar defaultStrategy = autoColorUsingOption.values[0];\r\n\t\tif (defaultStrategy) {\r\n\t\t\tautoColorUsingOption.value = defaultStrategy.value;\r\n\t\t}\r\n\t};\r\n\r\n\tvar colorTable;\r\n\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tcolorTable = {\r\n\t\t\t\t'admin': {\r\n\t\t\t\t\tcolor: this.options.adminColor.value,\r\n\t\t\t\t\thoverColor: this.options.adminColorHover.value\r\n\t\t\t\t},\r\n\t\t\t\t'firstComment': {\r\n\t\t\t\t\tcolor: this.options.firstCommentColor.value,\r\n\t\t\t\t\thoverColor: this.options.firstCommentColorHover.value\r\n\t\t\t\t},\r\n\t\t\t\t'friend': {\r\n\t\t\t\t\tcolor: this.options.friendColor.value,\r\n\t\t\t\t\thoverColor: this.options.friendColorHover.value\r\n\t\t\t\t},\r\n\t\t\t\t'moderator': {\r\n\t\t\t\t\tcolor: this.options.modColor.value,\r\n\t\t\t\t\thoverColor: this.options.modColorHover.value\r\n\t\t\t\t},\r\n\t\t\t\t'submitter': {\r\n\t\t\t\t\tcolor: this.options.OPColor.value,\r\n\t\t\t\t\thoverColor: this.options.OPColorHover.value\r\n\t\t\t\t},\r\n\t\t\t\t'user': {\r\n\t\t\t\t\tcolor: modules['userInfo'].options['highlightColor'].value,\r\n\t\t\t\t\thoverColor: modules['userInfo'].options['highlightColorHover'].value\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (this.options.highlightFriend.value) {\r\n\t\t\t\thighlight('friend');\r\n\t\t\t}\r\n\t\t\tif (this.options.highlightOP.value) {\r\n\t\t\t\thighlight('submitter');\r\n\t\t\t}\r\n\t\t\tif (this.options.highlightMod.value) {\r\n\t\t\t\thighlight('moderator');\r\n\t\t\t}\r\n\t\t\tif (this.options.highlightAdmin.value) {\r\n\t\t\t\thighlight('admin');\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.autoColorUsernames.value) {\r\n\t\t\t\tRESUtils.watchForElement('newComments', scanPageForNewUsernames);\r\n\t\t\t\tRESUtils.watchForElement('siteTable', scanPageForNewUsernames);\r\n\t\t\t\tscanPageForNewUsernames();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.highlightFirstCommenter.value) {\r\n\t\t\t\tRESUtils.watchForElement('newComments', scanPageForFirstComments);\r\n\t\t\t\tscanPageForFirstComments();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar firstComments = {};\r\n\r\n\tfunction scanPageForFirstComments(ele) {\r\n\t\tvar comments = ele ? $(ele).closest('.commentarea > .sitetable > .comment') : document.body.querySelectorAll('.commentarea > .sitetable > .comment');\r\n\r\n\t\tRESUtils.forEachChunked(comments, 15, 1000, function(element) {\r\n\t\t\t// Get identifiers\r\n\t\t\tvar idClass = Array.prototype.slice.call(element.classList).find(function(cls) {\r\n\t\t\t\treturn cls.substring(0, 6) === 'id-t1_';\r\n\t\t\t});\r\n\r\n\t\t\tif (idClass === undefined || firstComments[idClass]) return;\r\n\t\t\tfirstComments[idClass] = true;\r\n\r\n\t\t\tvar entry = element.querySelector('.entry'),\r\n\t\t\t\tauthor = entry.querySelector('.author');\r\n\t\t\tif (!author) return;\r\n\r\n\t\t\tvar authorClass = Array.prototype.slice.call(author.classList).find(function(cls) {\r\n\t\t\t\treturn cls.substring(0, 6) === 'id-t2_';\r\n\t\t\t});\r\n\r\n\t\t\tif (authorClass === undefined) return;\r\n\r\n\t\t\tvar authorDidReply = element.querySelector('.child .' + authorClass);\r\n\t\t\tif (!authorDidReply) return;\r\n\r\n\t\t\tvar container = '.' + idClass;\r\n\t\t\tif (module.options.dontHighlightFirstComment.value) {\r\n\t\t\t\tcontainer += ' .child';\r\n\t\t\t}\r\n\t\t\thighlight('firstComment', authorClass, container);\r\n\t\t});\r\n\t}\r\n\r\n\tvar coloredUsernames = {};\r\n\r\n\tfunction scanPageForNewUsernames(ele) {\r\n\t\tvar autoColorUsing = getAutoColorUsingFunction(module.options.autoColorUsing.value);\r\n\t\tif (!autoColorUsing) {\r\n\t\t\tconsole.error('Could not find a usable userHighlight.autoColorUsing method');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tele = ele || document.body;\r\n\t\tvar authors = ele.querySelectorAll('.author');\r\n\t\tRESUtils.forEachChunked(authors, 15, 1000, function(element) {\r\n\t\t\t// Get identifiers\r\n\t\t\tvar idClass = Array.prototype.slice.call(element.classList).find(function(cls) {\r\n\t\t\t\treturn cls.substring(0, 6) === 'id-t2_';\r\n\t\t\t});\r\n\r\n\t\t\tif (idClass === undefined) return;\r\n\r\n\t\t\tvar username = element.textContent;\r\n\r\n\t\t\tif (coloredUsernames[idClass]) return;\r\n\t\t\tcoloredUsernames[idClass] = true;\r\n\r\n\t\t\tvar color = autoColorUsing(idClass, element, username);\r\n\r\n\t\t\t// Apply color\r\n\t\t\tdoTextColor('.' + idClass, color);\r\n\t\t});\r\n\t}\r\n\r\n\tvar autoColorTemplate = '\t\\\r\n\t\t\t\t\t\t{{selector}} {\t\\\r\n\t\t\t\t\t\t\tcolor: {{color}} !important;\t\\\r\n\t\t\t\t\t\t}\t\\\r\n\t\t\t\t\t\t.res-nightmode {{selector}} {\t\\\r\n\t\t\t\t\t\t\tcolor: {{nightmodecolor}} !important;\t\\\r\n\t\t\t\t\t\t}\t\\\r\n\t\t\t\t\t';\r\n\r\n\tmodule.autoColorUsing = [\r\n\t\t{\r\n\t\t\tname: 'hash-userid-notbright',\r\n\t\t\tdescription: 'Random color, not too bright, consistent for each user; night mode-friendly',\r\n\t\t\tfunction: function(idClass, username, element) {\r\n\t\t\t\tvar hash = RESUtils.hashCode(idClass);\r\n\r\n\t\t\t\t// With help from /u/Rangi42\r\n\r\n\t\t\t\tvar r = (hash & 0xFF0000) >> 16;\r\n\t\t\t\tvar g = (hash & 0x00FF00) >> 8;\r\n\t\t\t\tvar b = hash & 0x0000FF;\r\n\t\t\t\t// Luminance formula: http://stackoverflow.com/a/596243/70175\r\n\t\t\t\tvar lum = Math.round(r * 0.299 + g * 0.587 + b * 0.114);\r\n\t\t\t\tvar minLum = 0x66; // Night mode background is #191919 or #222222\r\n\t\t\t\tvar maxLum = 0xAA; // Regular background is #FFFFFF or #F7F7F8\r\n\r\n\t\t\t\tvar color = [ r, g, b ];\r\n\t\t\t\tvar nightmodeColor = [ r, g, b ];\r\n\t\t\t\tvar scale;\r\n\t\t\t\tif (lum < minLum) {\r\n\t\t\t\t\tscale = minLum / lum;\r\n\t\t\t\t\tnightmodeColor = [\r\n\t\t\t\t\t\tMath.round(r * scale),\r\n\t\t\t\t\t\tMath.round(g * scale),\r\n\t\t\t\t\t\tMath.round(b * scale)\r\n\t\t\t\t\t];\r\n\t\t\t\t} else if (lum > maxLum) {\r\n\t\t\t\t\tscale = maxLum / lum;\r\n\t\t\t\t\tcolor = [\r\n\t\t\t\t\t\tMath.round(r * scale),\r\n\t\t\t\t\t\tMath.round(g * scale),\r\n\t\t\t\t\t\tMath.round(b * scale)\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t\tcolor = 'rgb(' + color.join(',') + ')';\r\n\t\t\t\tnightmodeColor = 'rgb(' + nightmodeColor.join(',') + ')';\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttemplate: autoColorTemplate,\r\n\t\t\t\t\tcolor:  color,\r\n\t\t\t\t\tnightmodecolor: nightmodeColor\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tname: 'hash-userid',\r\n\t\t\tdescription: 'Simple random color, consistent for each user. (original)',\r\n\t\t\tfunction: function(idClass, username, element) {\r\n\t\t\t\t// Choose color\r\n\t\t\t\tvar hash = 5381,\r\n\t\t\t\t\tstr = idClass;\r\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\r\n\t\t\t\t\thash = ((hash << 5) + hash) + str.charCodeAt(i); /* hash * 33 + c */\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar r = (hash & 0xFF0000) >> 16;\r\n\t\t\t\tvar g = (hash & 0x00FF00) >> 8;\r\n\t\t\t\tvar b = hash & 0x0000FF;\r\n\t\t\t\tvar color = 'rgb(' + [r, g, b].join(',') + ')';\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcolor: color\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tname: 'monochrome',\r\n\t\t\tdescription: 'All black or, in night mode, all light gray',\r\n\t\t\tfunction: function(idClass, username, element) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttemplate: autoColorTemplate,\r\n\t\t\t\t\tcolor: 'black',\r\n\t\t\t\t\tnightmodecolor: '#ccc'\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\r\n\tfunction getAutoColorUsingFunction(name) {\r\n\t\tvar strategy = module.autoColorUsing.find(function(strategy) {\r\n\t\t\treturn strategy.name == name;\r\n\t\t});\r\n\r\n\t\treturn strategy ? strategy.function : undefined;\r\n\t}\r\n\r\n\tmodule.highlightUser = function(userid) {\r\n\t\tvar name = 'author.id-t2_' + userid;\r\n\t\treturn highlight('user', name);\r\n\t};\r\n\r\n\tfunction highlight(name, selector, container) {\r\n\t\tif (selector === undefined) {\r\n\t\t\tselector = name;\r\n\t\t}\r\n\t\tif (container === undefined) {\r\n\t\t\tcontainer = '.thing .tagline';\r\n\t\t}\r\n\t\tvar color = colorTable[name].color;\r\n\t\tvar hoverColor = colorTable[name].hoverColor;\r\n\t\tvar css = '\\\r\n\t\t\t' + container + ' .author.' + selector + ' { \\\r\n\t\t\t\tcolor: ' + module.options.fontColor.value + ' !important; \\\r\n\t\t\t\tfont-weight: bold; \\\r\n\t\t\t\tpadding: 0 2px 0 2px; \\\r\n\t\t\t\tborder-radius: 3px; \\\r\n\t\t\t\tbackground-color:' + color + ' !important; \\\r\n\t\t\t} \\\r\n\t\t\t' + container + ' .collapsed .author.' + selector + ' { \\\r\n\t\t\t\tcolor: white !important; \\\r\n\t\t\t\tbackground-color: #AAA !important; \\\r\n\t\t\t} \\\r\n\t\t\t' + container + ' .author.' + selector + ':hover {\\\r\n\t\t\t\tbackground-color: ' + hoverColor + ' !important; \\\r\n\t\t\t\ttext-decoration: none !important; \\\r\n\t\t\t}';\r\n\t\treturn RESUtils.addCSS(css);\r\n\t}\r\n\r\n\tfunction doTextColor(selector, colorData) {\r\n\t\tvar template = colorData.template || '\t\\\r\n\t\t\t\t{{selector}} {\t\\\r\n\t\t\t\t\tcolor: {{color}} !important;\t\\\r\n\t\t\t\t}\t\\\r\n\t\t\t\t';\r\n\r\n\t\tvar placeholderValues = $.extend({}, colorData, {\r\n\t\t\ttemplate: null,\r\n\t\t\tselector: '.tagline .author' + selector\r\n\t\t});\r\n\r\n\t\tvar css = template;\r\n\r\n\t\tfor (var key in placeholderValues) {\r\n\t\t\tif (!placeholderValues.hasOwnProperty(key)) continue;\r\n\r\n\t\t\tvar search = new RegExp('{{' + key + '}}', 'g');\r\n\t\t\tvar value = placeholderValues[key];\r\n\r\n\t\t\tif (value !== null && value !== undefined) {\r\n\t\t\t\tcss = css.replace(search, value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn RESUtils.addCSS(css);\r\n\t}\r\n\r\n\tfunction generateHoverColor(color) { // generate a darker color\r\n\t\tif (!/^#[0-9A-F]{6}$/i.test(color)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar R = parseInt(color.substr(1, 2), 16);\r\n\t\tvar G = parseInt(color.substr(3, 2), 16);\r\n\t\tvar B = parseInt(color.substr(5, 2), 16);\r\n\t\t// R = R + 0.25 *(255-R); // 25% lighter\r\n\t\tR = Math.round(0.75*R) + 256; // we add 256 to add a 1 before the color in the hex format\r\n\t\tG = Math.round(0.75*G) + 256; // then we remove the 1, this have for effect to\r\n\t\tB = Math.round(0.75*B) + 256; // add a 0 before one char color in hex format (i.e. 0xA -> 0x10A -> 0x0A)\r\n\t\treturn '#' + R.toString(16).substr(1) + G.toString(16).substr(1) + B.toString(16).substr(1);\r\n\t}\r\n\r\n\tfunction generateHoverColors() { // apply generateHoverColor on all option\r\n\t\tvar options = ['OPColor', 'adminColor', 'friendColor', 'modColor', 'firstCommentColor'];\r\n\t\tvar error = false;\r\n\t\toptions.forEach(function(option) {\r\n\t\t\tvar newColor = generateHoverColor(modules['settingsConsole'].getOptionValue('userHighlight', option));\r\n\t\t\tif (newColor !== false) {\r\n\t\t\t\tmodules['settingsConsole'].setOptionValue('userHighlight', option + 'Hover', newColor);\r\n\t\t\t} else {\r\n\t\t\t\terror = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (error) {\r\n\t\t\talert('Some Hover color couldn\\'t be generated. This is probably due to the use of color in special format.');\r\n\t\t}\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
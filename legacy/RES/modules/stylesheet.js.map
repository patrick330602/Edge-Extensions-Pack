{"version":3,"sources":["modules/stylesheet.js"],"names":[],"mappings":";;AAAA,UAAU,YAAV,EAAwB,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AAClD,QAAO,UAAP,GAAoB,mBAApB,CADkD;AAElD,QAAO,WAAP,GAAqB,uEAArB,CAFkD;AAGlD,QAAO,QAAP,GAAkB,YAAlB,CAHkD;AAIlD,QAAO,OAAP,GAAiB,CAChB,OADgB,EAEhB,SAFgB,EAGhB,gBAHgB,CAAjB,CAJkD;;AAUlD,QAAO,OAAP,CAAe,YAAf,GAA8B;AAC7B,eAAa,kLAAb;AACA,QAAM,QAAN;AACA,QAAM,YAAN;AACA,YAAU,oBAAW;AACpB,UAAO,QAAP,CAAgB,IAAhB,GAAuB,qEAAvB,CADoB;GAAX;EAJX,CAVkD;;AAmBlD,QAAO,OAAP,CAAe,wBAAf,GAA0C;AACzC,QAAM,OAAN;AACA,SAAO,CACN,CAAE,YAAF,EAAgB,YAAhB,CADM,CAAP;AAGA,UAAQ,CAAC;AACR,SAAM,WAAN;AACA,SAAM,MAAN;AACA,aAAU,YAAV;GAHO,EAIL;AACF,SAAM,SAAN;AACA,SAAM,MAAN;AACA,WAAQ,CAAC;AACR,UAAM,YAAN;AACA,WAAO,YAAP;IAFO,EAGL;AACF,UAAM,iBAAN;AACA,WAAO,SAAP;IALO,EAML;AACF,UAAM,UAAN;AACA,WAAO,SAAP;IARO,CAAR;AAUA,UAAO,YAAP;AACA,gBAAa,kBAAb;GAlBO,EAmBL;AACF,SAAM,mBAAN;AACA,SAAM,MAAN;AACA,aAAU,YAAV;GAtBO,EAuBL;AACF,SAAM,YAAN;AACA,SAAM,MAAN;GAzBO,CAAR;EALD,CAnBkD;;AAqDlD,QAAO,OAAP,CAAe,QAAf,GAA0B;AACzB,QAAM,OAAN;AACA,SAAO,EAAP;AACA,UAAQ,CAAC;AACR,SAAM,SAAN;AACA,SAAM,UAAN;GAFO,EAGL;AACF,SAAM,SAAN;AACA,SAAM,MAAN;AACA,WAAQ,CAAC;AACR,UAAM,YAAN;AACA,WAAO,YAAP;IAFO,EAGL;AACF,UAAM,iBAAN;AACA,WAAO,SAAP;IALO,EAML;AACF,UAAM,UAAN;AACA,WAAO,SAAP;IARO,CAAR;AAUA,UAAO,YAAP;AACA,gBAAa,kBAAb;GAjBO,EAkBL;AACF,SAAM,mBAAN;AACA,SAAM,MAAN;AACA,aAAU,YAAV;GArBO,EAsBL;AACF,SAAM,YAAN;AACA,SAAM,MAAN;GAxBO,CAAR;EAHD,CArDkD;;AAoFlD,QAAO,OAAP,CAAe,WAAf,GAA6B;AAC5B,QAAM,OAAN;AACA,SAAO,EAAP;AACA,UAAQ,CAAC;AACR,SAAM,SAAN;AACA,SAAM,MAAN;GAFO,EAGL;AACF,SAAM,SAAN;AACA,SAAM,MAAN;AACA,WAAQ,CAAC;AACR,UAAM,YAAN;AACA,WAAO,YAAP;IAFO,EAGL;AACF,UAAM,iBAAN;AACA,WAAO,SAAP;IALO,EAML;AACF,UAAM,UAAN;AACA,WAAO,SAAP;IARO,CAAR;AAUA,UAAO,YAAP;AACA,gBAAa,kBAAb;GAjBO,EAkBL;AACF,SAAM,mBAAN;AACA,SAAM,MAAN;AACA,aAAU,YAAV;GArBO,EAsBL;AACF,SAAM,YAAN;AACA,SAAM,MAAN;GAxBO,CAAR;EAHD,CApFkD;;AAmHlD,QAAO,OAAP,CAAe,cAAf,GAAgC;AAC/B,QAAM,SAAN;AACA,SAAO,IAAP;AACA,eAAa,8EACZ,4FADY;EAHd,CAnHkD;AAyHlD,QAAO,OAAP,CAAe,gBAAf,GAAkC;AACjC,QAAM,SAAN;AACA,SAAO,IAAP;AACA,eAAa,kFACZ,mHADY;EAHd,CAzHkD;AA+HlD,QAAO,OAAP,CAAe,aAAf,GAA+B;AAC9B,QAAM,SAAN;AACA,SAAO,IAAP;AACA,eAAa,2EACZ,qFADY;EAHd,CA/HkD;AAqIlD,QAAO,OAAP,CAAe,iBAAf,GAAmC;AAClC,QAAM,SAAN;AACA,SAAO,KAAP;AACA,eAAa,8DACZ,mFADY;EAHd,CArIkD;AA2IlD,QAAO,UAAP,GAAoB,YAAW;AAC9B,MAAI,EAAE,OAAO,SAAP,MAAsB,OAAO,UAAP,EAAtB,CAAF,EAA8C,OAAlD;;AAEA,MAAI,OAAO,OAAP,CAAe,cAAf,CAA8B,KAA9B,EAAqC;AACxC,yBADwC;GAAzC;AAGA,MAAI,OAAO,OAAP,CAAe,aAAf,CAA6B,KAA7B,EAAoC;AACvC,wBADuC;GAAxC;AAGA,MAAI,OAAO,OAAP,CAAe,gBAAf,CAAgC,KAAhC,EAAuC;AAC1C,2BAD0C;GAA3C;AAGA,qBAZ8B;AAa9B,WAAS,IAAT,CAAc,KAAd,CAAoB,SAApB,GAAgC,IAAhC,CAAqC,wBAArC,EAb8B;AAc9B,WAAS,IAAT,CAAc,KAAd,CAAoB,SAApB,GAAgC,IAAhC,CAAqC,gBAArC,EAd8B;;AAgB9B,IAAE,QAAQ,eAAR,CAAF,EAA4B,EAA5B,CAA+B,uBAA/B,EAAwD,YAAW;AAClE,sBADkE;AAElE,8BAFkE;AAGlE,sBAHkE;GAAX,CAAxD,CAhB8B;EAAX,CA3I8B;;AAkKlD,QAAO,EAAP,GAAY,YAAW;AACtB,MAAI,EAAE,OAAO,SAAP,MAAsB,OAAO,UAAP,EAAtB,CAAF,EAA8C,OAAlD;;AAEA,MAAI,OAAO,OAAP,CAAe,iBAAf,CAAiC,KAAjC,EAAwC;AAC3C,4BAD2C;GAA5C;EAHW,CAlKsC;;AA0KlD,UAAS,mBAAT,GAA+B;AAC9B,MAAI,OAAO,SAAS,gBAAT,EAAP,CAD0B;AAE9B,MAAI,IAAJ,EAAU;AACT,UAAO,KAAK,WAAL,EAAP,CADS;AAET,YAAS,WAAT,CAAqB,GAArB,CAAyB,WAAW,IAAX,CAAzB,CAFS;GAAV;EAFD;;AAQA,UAAS,qBAAT,GAAiC;AAChC,MAAI,OAAO,SAAS,kBAAT,EAAP,CAD4B;AAEhC,MAAI,IAAJ,EAAU;AACT,UAAO,KAAK,WAAL,GAAmB,OAAnB,CAA2B,KAA3B,EAAkC,GAAlC,CAAP,CADS;AAET,YAAS,WAAT,CAAqB,GAArB,CAAyB,SAAS,IAAT,CAAzB,CAFS;GAAV;EAFD;;AAQA,UAAS,kBAAT,GAA8B;AAC7B,MAAI,OAAO,SAAS,kBAAT,EAAP,CADyB;AAE7B,MAAI,IAAJ,EAAU;AACT,UAAO,KAAK,WAAL,EAAP,CADS;AAET,YAAS,WAAT,CAAqB,GAArB,CAAyB,cAAc,IAAd,CAAzB,CAFS;GAAV;EAFD;;AAQA,UAAS,sBAAT,GAAkC;AACjC,MAAI,OAAO,SAAS,YAAT,CAAsB,IAAtB,CAAP,CAD6B;AAEjC,MAAI,IAAJ,EAAU;AACT,UAAO,KAAK,WAAL,EAAP,CADS;AAET,YAAS,WAAT,CAAqB,GAArB,CAAyB,YAAY,IAAZ,CAAzB,CAFS;GAAV;EAFD;;AAQA,UAAS,gBAAT,GAA4B;AAC3B,MAAI,aAAa,OAAO,OAAP,CAAe,WAAf,CAA2B,KAA3B,CACf,MADe,CACR,UAAS,GAAT,EAAc;AACrB,UAAO,YAAY,IAAI,CAAJ,CAAZ,EAAoB,IAAI,CAAJ,CAApB,EAA4B,IAAI,CAAJ,CAA5B,CAAP,CADqB;GAAd,CADQ,CAIf,GAJe,CAIX,UAAS,GAAT,EAAc;AAClB,UAAO,CAAC,IAAI,CAAJ,KAAU,EAAV,CAAD,CAAe,KAAf,CAAqB,OAArB,CAAP,CADkB;GAAd,CAJF,CADuB;;AAS3B,MAAI,gBAAgB,OAAO,OAAP,CAAe,WAAf,CAA2B,KAA3B,CAClB,MADkB,CACX,UAAS,GAAT,EAAc;AACrB,UAAO,CAAC,YAAY,IAAI,CAAJ,CAAZ,EAAoB,IAAI,CAAJ,CAApB,EAA4B,IAAI,CAAJ,CAA5B,CAAD,CADc;GAAd,CADW,CAIlB,GAJkB,CAId,UAAS,GAAT,EAAc;AAClB,UAAO,CAAC,IAAI,CAAJ,KAAU,EAAV,CAAD,CAAe,KAAf,CAAqB,OAArB,CAAP,CADkB;GAAd,CAJF,CATuB;;AAkB3B,WAAS,WAAT,CAAqB,GAArB,CAAyB,KAAzB,CAA+B,QAA/B,EAAyC,UAAzC,EAlB2B;AAmB3B,WAAS,WAAT,CAAqB,MAArB,CAA4B,KAA5B,CAAkC,QAAlC,EAA4C,aAA5C,EAnB2B;EAA5B;;AAuBA,UAAS,qBAAT,CAA+B,WAA/B,EAA4C;AAC3C,MAAI,gBAAgB,YAAY,GAAZ,CAAgB,UAAS,GAAT,EAAc;AACjD,UAAO,IAAI,CAAJ,CAAP,CADiD;GAAd,CAAhC,CADuC;;AAK3C,MAAI,aAAa,SAAS,OAAT,CAAiB,SAAjB,CAA2B,YAA3B,EAAyC,cAAzC,CAAwD,aAAxD,CAAb,CALuC;AAM3C,SAAO,UAAP,CAN2C;EAA5C;;AASA,UAAS,wBAAT,GAAoC;AACnC,MAAI,SAAS,OAAO,OAAP,CAAe,wBAAf,CAAwC,KAAxC,CACX,MADW,CACJ,UAAS,GAAT,EAAc;AACrB,UAAO,CAAC,YAAY,IAAI,CAAJ,CAAZ,EAAoB,IAAI,CAAJ,CAApB,EAA4B,IAAI,CAAJ,CAA5B,CAAD,CADc;GAAd,CADL,CAD+B;AAKnC,WAAS,sBAAsB,MAAtB,CAAT,CALmC;;AAQnC,MAAI,MAAM,OAAO,OAAP,CAAe,wBAAf,CAAwC,KAAxC,CACR,MADQ,CACD,UAAS,GAAT,EAAc;AACrB,UAAO,YAAY,IAAI,CAAJ,CAAZ,EAAoB,IAAI,CAAJ,CAApB,EAA4B,IAAI,CAAJ,CAA5B,CAAP,CADqB;GAAd,CADL,CAR+B;AAYnC,QAAM,sBAAsB,GAAtB,CAAN,CAZmC;AAanC,QAAM,IAAI,MAAJ,CAAW,UAAS,SAAT,EAAoB;AACpC,UAAO,OAAO,OAAP,CAAe,SAAf,MAA8B,CAAC,CAAD,CADD;GAApB,CAAjB,CAbmC;;AAiBnC,MAAI,cAAc,IAChB,MADgB,CACT,UAAS,SAAT,EAAoB;AAC3B,OAAI,UAAU,+BAA+B,SAA/B,CAAV,CADuB;AAE3B,UAAO,QAAQ,MAAR,KAAmB,CAAnB,CAFoB;GAApB,CADS,CAKhB,GALgB,CAKZ,UAAS,SAAT,EAAoB;AACxB,OAAI,UAAU,iCAAiC,SAAjC,CAAV,CADoB;AAExB,UAAO,OAAP,CAFwB;GAApB,CALY,CAShB,MATgB,CAST,UAAS,UAAT,EAAqB,OAArB,EAA8B;AACrC,UAAO,WAAW,GAAX,CAAe,OAAf,CAAP,CADqC;GAA9B,EAEL,GAXc,CAAd,CAjB+B;;AA8BnC,MAAI,iBAAiB,OACnB,GADmB,CACf,UAAS,SAAT,EAAoB;AACxB,UAAO,+BAA+B,SAA/B,CAAP,CADwB;GAApB,CADe,CAInB,MAJmB,CAIZ,UAAS,UAAT,EAAqB,QAArB,EAA+B;AACtC,UAAO,WAAW,GAAX,CAAe,QAAf,CAAP,CADsC;GAA/B,EAEL,GANiB,CAAjB,CA9B+B;;AAuCnC,IAAE,SAAS,IAAT,CAAF,CAAiB,MAAjB,CAAwB,WAAxB,EAvCmC;AAwCnC,iBAAe,MAAf,GAxCmC;EAApC;;AA4CA,UAAS,8BAAT,CAAwC,aAAxC,EAAuD;AACtD,MAAI,CAAC,aAAD,EAAgB,OAAO,GAAP,CAApB;AACA,kBAAgB,cAAc,WAAd,EAAhB,CAFsD;AAGtD,MAAI,UAAU,EAAE,sBAAF,EACZ,MADY,CACL,YAAW;AAClB,OAAI,YAAY,EAAE,IAAF,CAAO,IAAP,EAAa,gBAAb,CAAZ,CADc;AAElB,OAAI,aAAa,kBAAkB,UAAU,WAAV,EAAlB,EAA2C;AAC3D,WAAO,IAAP,CAD2D;IAA5D;GAFO,CADL,CAHkD;AAUtD,SAAO,OAAP,CAVsD;EAAvD;;AAaA,UAAS,gCAAT,CAA0C,SAA1C,EAAqD;AACpD,MAAI,UAAU,EAAE,yBAAF,EACZ,IADY,CACP,gBADO,EACW,SADX,EAEZ,IAFY,CAEP,MAFO,EAEC,SAAS,QAAT,CAAkB,MAAlB,GAA2B,KAA3B,GAAmC,SAAnC,GAA+C,iBAA/C,CAFX,CADgD;AAIpD,SAAO,OAAP,CAJoD;EAArD;;AAOA,UAAS,gBAAT,GAA4B;AAC3B,WAAS,kBAAT,CAA4B,GAA5B,EAAiC;AAChC,OAAI,CAAC,GAAD,EAAM,OAAO,GAAP,CAAV;AACA,UAAO,EAAE,mBAAF,EAAuB,MAAvB,CAA8B,YAAW;AAC/C,WAAO,EAAE,IAAF,EAAQ,IAAR,OAAmB,GAAnB,CADwC;IAAX,CAArC,CAFgC;GAAjC;AAMA,WAAS,oBAAT,CAA8B,GAA9B,EAAmC;AAClC,UAAO,EAAE,6BAAF,EAAiC,IAAjC,CAAsC,GAAtC,CAAP,CADkC;GAAnC;;AAIA,MAAI,cAAc,OAAO,OAAP,CAAe,QAAf,CAAwB,KAAxB,CAChB,MADgB,CACT,UAAS,GAAT,EAAc;AACrB,UAAO,YAAY,IAAI,CAAJ,CAAZ,EAAoB,IAAI,CAAJ,CAApB,EAA4B,IAAI,CAAJ,CAA5B,KACN,mBAAmB,IAAI,CAAJ,CAAnB,EAA2B,MAA3B,KAAsC,CAAtC,CAFoB;GAAd,CADS,CAKhB,GALgB,CAKZ,UAAS,GAAT,EAAc;AAClB,UAAO,qBAAqB,IAAI,CAAJ,CAArB,CAAP,CADkB;GAAd,CALY,CAQhB,MARgB,CAQT,UAAS,UAAT,EAAqB,OAArB,EAA8B;AACrC,UAAO,WAAW,GAAX,CAAe,OAAf,CAAP,CADqC;GAA9B,EAEL,GAVc,CAAd,CAXuB;;AAuB3B,MAAI,iBAAiB,OAAO,OAAP,CAAe,QAAf,CAAwB,KAAxB,CACnB,MADmB,CACZ,UAAS,GAAT,EAAc;AACrB,UAAO,CAAC,YAAY,IAAI,CAAJ,CAAZ,EAAoB,IAAI,CAAJ,CAApB,EAA4B,IAAI,CAAJ,CAA5B,CAAD,CADc;GAAd,CADY,CAInB,GAJmB,CAIf,UAAS,GAAT,EAAc;AAClB,UAAO,mBAAmB,IAAI,CAAJ,CAAnB,CAAP,CADkB;GAAd,CAJe,CAOnB,MAPmB,CAOZ,UAAS,UAAT,EAAqB,OAArB,EAA8B;AACrC,UAAO,WAAW,GAAX,CAAe,OAAf,CAAP,CADqC;GAA9B,EAEL,GATiB,CAAjB,CAvBuB;;AAkC3B,IAAE,SAAS,IAAT,CAAF,CAAiB,MAAjB,CAAwB,WAAxB,EAlC2B;AAmC3B,iBAAe,MAAf,GAnC2B;EAA5B;;AAsCA,UAAS,WAAT,CAAqB,MAArB,EAA6B,OAA7B,EAAsC,SAAtC,EAAiD;AAChD,MAAI,UAAU,CAAC,QAAQ,eAAR,EAAyB,YAAzB,CAAsC,MAAtC,CAAD,EAAgD,OAAO,KAAP,CAA9D;;AAEA,MAAI,YAAY,SAAS,gBAAT,EAAZ,CAH4C;AAIhD,MAAI,CAAC,SAAD,EAAY,OAAO,IAAP,CAAhB;;AAEA,MAAI,MAAO,aAAa,UAAU,OAAV,CAAkB,KAAlB,MAA6B,CAAC,CAAD,CANL;AAOhD,UAAQ,OAAR;AACC,QAAK,SAAL;AACC,QAAI,SAAC,CAAU,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAD,IAAO,GAAzC,EAA8C;AACjD,YAAO,KAAP,CADiD;KAAlD;AAGA,UAJD;AADD,QAMM,SAAL;AACC,QAAI,EAAE,SAAC,CAAU,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAD,IAAO,GAAzC,CAAF,EAAiD;AACpD,YAAO,KAAP,CADoD;KAArD;AAGA,UAJD;AAND,GAPgD;AAmBhD,SAAO,IAAP,CAnBgD;EAAjD;CAhVuB,CAAxB","file":"modules/stylesheet.js","sourcesContent":["addModule('stylesheet', function(module, moduleID) {\r\n\tmodule.moduleName = 'Stylesheet Loader';\r\n\tmodule.description = 'Load stylesheets from other subreddits or load your own CSS snippets.';\r\n\tmodule.category = 'Appearance';\r\n\tmodule.exclude = [\r\n\t\t'prefs',\r\n\t\t'account',\r\n\t\t'subredditAbout'\r\n\t];\r\n\r\n\tmodule.options.redditThemes = {\r\n\t\tdescription: 'reddit allows you to customize the appearance of reddit! A reddit theme will be applied anywhere the default reddit style is present and subreddit style is disabled via reddit.',\r\n\t\ttype: 'button',\r\n\t\ttext: 'learn more',\r\n\t\tcallback: function() {\r\n\t\t\twindow.location.href = 'https://www.reddit.com/r/Enhancement/wiki/faq/srstyle#reddit_themes';\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.options.loadSubredditStylesheets = {\r\n\t\ttype: 'table',\r\n\t\tvalue: [\r\n\t\t\t[ 'RESUpdates', 'everywhere' ]\r\n\t\t],\r\n\t\tfields: [{\r\n\t\t\tname: 'subreddit',\r\n\t\t\ttype: 'list',\r\n\t\t\tlistType: 'subreddits'\r\n\t\t}, {\r\n\t\t\tname: 'applyTo',\r\n\t\t\ttype: 'enum',\r\n\t\t\tvalues: [{\r\n\t\t\t\tname: 'Everywhere',\r\n\t\t\t\tvalue: 'everywhere'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Everywhere but:',\r\n\t\t\t\tvalue: 'exclude'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Only on:',\r\n\t\t\t\tvalue: 'include'\r\n\t\t\t}],\r\n\t\t\tvalue: 'everywhere',\r\n\t\t\tdescription: 'Apply filter to:'\r\n\t\t}, {\r\n\t\t\tname: 'applyToSubreddits',\r\n\t\t\ttype: 'list',\r\n\t\t\tlistType: 'subreddits'\r\n\t\t}, {\r\n\t\t\tname: 'toggleName',\r\n\t\t\ttype: 'text'\r\n\t\t}]\r\n\t};\r\n\r\n\tmodule.options.snippets = {\r\n\t\ttype: 'table',\r\n\t\tvalue: [],\r\n\t\tfields: [{\r\n\t\t\tname: 'snippet',\r\n\t\t\ttype: 'textarea'\r\n\t\t}, {\r\n\t\t\tname: 'applyTo',\r\n\t\t\ttype: 'enum',\r\n\t\t\tvalues: [{\r\n\t\t\t\tname: 'Everywhere',\r\n\t\t\t\tvalue: 'everywhere'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Everywhere but:',\r\n\t\t\t\tvalue: 'exclude'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Only on:',\r\n\t\t\t\tvalue: 'include'\r\n\t\t\t}],\r\n\t\t\tvalue: 'everywhere',\r\n\t\t\tdescription: 'Apply filter to:'\r\n\t\t}, {\r\n\t\t\tname: 'applyToSubreddits',\r\n\t\t\ttype: 'list',\r\n\t\t\tlistType: 'subreddits'\r\n\t\t}, {\r\n\t\t\tname: 'toggleName',\r\n\t\t\ttype: 'text'\r\n\t\t}]\r\n\t};\r\n\r\n\tmodule.options.bodyClasses = {\r\n\t\ttype: 'table',\r\n\t\tvalue: [],\r\n\t\tfields: [{\r\n\t\t\tname: 'classes',\r\n\t\t\ttype: 'text'\r\n\t\t}, {\r\n\t\t\tname: 'applyTo',\r\n\t\t\ttype: 'enum',\r\n\t\t\tvalues: [{\r\n\t\t\t\tname: 'Everywhere',\r\n\t\t\t\tvalue: 'everywhere'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Everywhere but:',\r\n\t\t\t\tvalue: 'exclude'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Only on:',\r\n\t\t\t\tvalue: 'include'\r\n\t\t\t}],\r\n\t\t\tvalue: 'everywhere',\r\n\t\t\tdescription: 'Apply filter to:'\r\n\t\t}, {\r\n\t\t\tname: 'applyToSubreddits',\r\n\t\t\ttype: 'list',\r\n\t\t\tlistType: 'subreddits'\r\n\t\t}, {\r\n\t\t\tname: 'toggleName',\r\n\t\t\ttype: 'text'\r\n\t\t}]\r\n\t};\r\n\r\n\tmodule.options.subredditClass = {\r\n\t\ttype: 'boolean',\r\n\t\tvalue: true,\r\n\t\tdescription: 'When browsing a subreddit, add the subreddit name as a class to the body.' +\r\n\t\t\t'\\n\\n<br><br>For example, /r/ExampleSubreddit adds <code>body.res-r-examplesubreddit</code>'\r\n\t};\r\n\tmodule.options.multiredditClass = {\r\n\t\ttype: 'boolean',\r\n\t\tvalue: true,\r\n\t\tdescription: 'When browsing a multireddit, add the multireddit name as a class to the body.' +\r\n\t\t\t'\\n\\n<br><br>For example, /u/ExampleUser/m/ExampleMulti adds <code>body.res-user-exampleuser-m-examplemulti</code>'\r\n\t};\r\n\tmodule.options.usernameClass = {\r\n\t\ttype: 'boolean',\r\n\t\tvalue: true,\r\n\t\tdescription: 'When browsing a user profile, add the username as a class to the body.' +\r\n\t\t\t'\\n\\n<br><br>For example, /u/ExampleUser adds <code>body.res-user-exampleuser</code>'\r\n\t};\r\n\tmodule.options.loggedInUserClass = {\r\n\t\ttype: 'boolean',\r\n\t\tvalue: false,\r\n\t\tdescription: 'When logged in, add your username as a class to the body.' +\r\n\t\t\t'\\n\\n<br><br>For example, /u/ExampleUser adds <code>body.res-me-exampleuser</code>'\r\n\t};\r\n\tmodule.beforeLoad = function() {\r\n\t\tif (!(module.isEnabled() && module.isMatchURL())) return;\r\n\r\n\t\tif (module.options.subredditClass.value) {\r\n\t\t\tapplySubredditClass();\r\n\t\t}\r\n\t\tif (module.options.usernameClass.value) {\r\n\t\t\tapplyUsernameClass();\r\n\t\t}\r\n\t\tif (module.options.multiredditClass.value) {\r\n\t\t\tapplyMultiredditClass();\r\n\t\t}\r\n\t\tapplyBodyClasses();\r\n\t\tRESUtils.init.await.headReady().done(loadSubredditStylesheets);\r\n\t\tRESUtils.init.await.headReady().done(applyCssSnippets);\r\n\r\n\t\t$(modules['customToggles']).on('activated deactivated', function() {\r\n\t\t\tapplyBodyClasses();\r\n\t\t\tloadSubredditStylesheets();\r\n\t\t\tapplyCssSnippets();\r\n\t\t});\r\n\t};\r\n\r\n\tmodule.go = function() {\r\n\t\tif (!(module.isEnabled() && module.isMatchURL())) return;\r\n\r\n\t\tif (module.options.loggedInUserClass.value) {\r\n\t\t\tapplyLoggedInUserClass();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction applySubredditClass() {\r\n\t\tvar name = RESUtils.currentSubreddit();\r\n\t\tif (name) {\r\n\t\t\tname = name.toLowerCase();\r\n\t\t\tRESUtils.bodyClasses.add('res-r-' + name);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction applyMultiredditClass() {\r\n\t\tvar name = RESUtils.currentMultireddit();\r\n\t\tif (name) {\r\n\t\t\tname = name.toLowerCase().replace(/\\//g, '-');\r\n\t\t\tRESUtils.bodyClasses.add('res-' + name);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction applyUsernameClass() {\r\n\t\tvar name = RESUtils.currentUserProfile();\r\n\t\tif (name) {\r\n\t\t\tname = name.toLowerCase();\r\n\t\t\tRESUtils.bodyClasses.add('res-user-' + name);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction applyLoggedInUserClass() {\r\n\t\tvar name = RESUtils.loggedInUser(true);\r\n\t\tif (name) {\r\n\t\t\tname = name.toLowerCase();\r\n\t\t\tRESUtils.bodyClasses.add('res-me-' + name);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction applyBodyClasses() {\r\n\t\tvar addClasses = module.options.bodyClasses.value\r\n\t\t\t.filter(function(row) {\r\n\t\t\t\treturn shouldApply(row[3], row[1], row[2]);\r\n\t\t\t})\r\n\t\t\t.map(function(row) {\r\n\t\t\t\treturn (row[0] || '').split(/[\\s,]/);\r\n\t\t\t});\r\n\r\n\t\tvar removeClasses = module.options.bodyClasses.value\r\n\t\t\t.filter(function(row) {\r\n\t\t\t\treturn !shouldApply(row[3], row[1], row[2]);\r\n\t\t\t})\r\n\t\t\t.map(function(row) {\r\n\t\t\t\treturn (row[0] || '').split(/[\\s,]/);\r\n\t\t\t});\r\n\r\n\r\n\t\tRESUtils.bodyClasses.add.apply(RESUtils, addClasses);\r\n\t\tRESUtils.bodyClasses.remove.apply(RESUtils, removeClasses);\r\n\t}\r\n\r\n\r\n\tfunction sanitizeSubredditList(uncleanRows) {\r\n\t\tvar uncleanValues = uncleanRows.map(function(row) {\r\n\t\t\treturn row[0];\r\n\t\t});\r\n\r\n\t\tvar subreddits = RESUtils.options.listTypes['subreddits'].sanitizeValues(uncleanValues);\r\n\t\treturn subreddits;\r\n\t}\r\n\r\n\tfunction loadSubredditStylesheets() {\r\n\t\tvar remove = module.options.loadSubredditStylesheets.value\r\n\t\t\t.filter(function(row) {\r\n\t\t\t\treturn !shouldApply(row[3], row[1], row[2]);\r\n\t\t\t});\r\n\t\tremove = sanitizeSubredditList(remove);\r\n\r\n\r\n\t\tvar add = module.options.loadSubredditStylesheets.value\r\n\t\t\t.filter(function(row) {\r\n\t\t\t\treturn shouldApply(row[3], row[1], row[2]);\r\n\t\t\t});\r\n\t\tadd = sanitizeSubredditList(add);\r\n\t\tadd = add.filter(function(subreddit) {\r\n\t\t\treturn remove.indexOf(subreddit) === -1;\r\n\t\t});\r\n\r\n\t\tvar addElements = add\r\n\t\t\t.filter(function(subreddit) {\r\n\t\t\t\tvar element = findSubredditStylesheetElement(subreddit);\r\n\t\t\t\treturn element.length === 0;\r\n\t\t\t})\r\n\t\t\t.map(function(subreddit) {\r\n\t\t\t\tvar element = createSubredditStylesheetElement(subreddit);\r\n\t\t\t\treturn element;\r\n\t\t\t})\r\n\t\t\t.reduce(function(collection, element) {\r\n\t\t\t\treturn collection.add(element);\r\n\t\t\t}, $());\r\n\r\n\t\tvar removeElements = remove\r\n\t\t\t.map(function(subreddit) {\r\n\t\t\t\treturn findSubredditStylesheetElement(subreddit);\r\n\t\t\t})\r\n\t\t\t.reduce(function(collection, elements) {\r\n\t\t\t\treturn collection.add(elements);\r\n\t\t\t}, $());\r\n\r\n\r\n\t\t$(document.head).append(addElements);\r\n\t\tremoveElements.remove();\r\n\r\n\t}\r\n\r\n\tfunction findSubredditStylesheetElement(findSubreddit) {\r\n\t\tif (!findSubreddit) return $();\r\n\t\tfindSubreddit = findSubreddit.toLowerCase();\r\n\t\tvar element = $('link[rel=stylesheet]')\r\n\t\t\t.filter(function() {\r\n\t\t\t\tvar subreddit = $.data(this, 'res-stylesheet');\r\n\t\t\t\tif (subreddit && findSubreddit === subreddit.toLowerCase()) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction createSubredditStylesheetElement(subreddit) {\r\n\t\tvar element = $('<link rel=\"stylesheet\">')\r\n\t\t\t.data('res-stylesheet', subreddit)\r\n\t\t\t.attr('href', document.location.origin + '/r/' + subreddit + '/stylesheet.css');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction applyCssSnippets() {\r\n\t\tfunction findSnippetElement(css) {\r\n\t\t\tif (!css) return $();\r\n\t\t\treturn $('style.res-snippet').filter(function() {\r\n\t\t\t\treturn $(this).text() === css;\r\n\t\t\t});\r\n\t\t}\r\n\t\tfunction createSnippetElement(css) {\r\n\t\t\treturn $('<style class=\"res-snippet\">').text(css);\r\n\t\t}\r\n\r\n\t\tvar addElements = module.options.snippets.value\r\n\t\t\t.filter(function(row) {\r\n\t\t\t\treturn shouldApply(row[3], row[1], row[2]) &&\r\n\t\t\t\t\tfindSnippetElement(row[0]).length === 0;\r\n\t\t\t})\r\n\t\t\t.map(function(row) {\r\n\t\t\t\treturn createSnippetElement(row[0]);\r\n\t\t\t})\r\n\t\t\t.reduce(function(collection, element) {\r\n\t\t\t\treturn collection.add(element);\r\n\t\t\t}, $());\r\n\r\n\t\tvar removeElements = module.options.snippets.value\r\n\t\t\t.filter(function(row) {\r\n\t\t\t\treturn !shouldApply(row[3], row[1], row[2]);\r\n\t\t\t})\r\n\t\t\t.map(function(row) {\r\n\t\t\t\treturn findSnippetElement(row[0]);\r\n\t\t\t})\r\n\t\t\t.reduce(function(collection, element) {\r\n\t\t\t\treturn collection.add(element);\r\n\t\t\t}, $());\r\n\r\n\t\t$(document.head).append(addElements);\r\n\t\tremoveElements.remove();\r\n\t}\r\n\r\n\tfunction shouldApply(toggle, applyTo, applyList) {\r\n\t\tif (toggle && !modules['customToggles'].toggleActive(toggle)) return false;\r\n\r\n\t\tvar subreddit = RESUtils.currentSubreddit();\r\n\t\tif (!subreddit) return true;\r\n\r\n\t\tvar all = (applyList && applyList.indexOf('all') !== -1);\r\n\t\tswitch (applyTo) {\r\n\t\t\tcase 'exclude':\r\n\t\t\t\tif ((applyList.indexOf(subreddit) !== -1) || all) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'include':\r\n\t\t\t\tif (!((applyList.indexOf(subreddit) !== -1) || all)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
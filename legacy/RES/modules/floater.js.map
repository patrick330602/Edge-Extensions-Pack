{"version":3,"sources":["modules/floater.js"],"names":[],"mappings":"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","file":"modules/floater.js","sourcesContent":["addModule('floater', function(module, moduleID) {\r\n\tmodule.category = ['Productivity'];\r\n\tmodule.moduleName = 'Floating Islands';\r\n\tmodule.description = 'Managing free-floating RES elements';\r\n\tmodule.alwaysEnabled = true;\r\n\r\n\tvar defaultContainer = 'visibleAfterScroll';\r\n\tvar containers = {\r\n\t\tvisibleAfterScroll: {\r\n\t\t\trenderElement: function() {\r\n\t\t\t\tvar container = RESUtils.createElement('div', 'NREFloat', 'res-floater-visibleAfterScroll');\r\n\t\t\t\tcontainer.appendChild(document.createElement('ul'));\r\n\t\t\t\treturn container;\r\n\t\t\t},\r\n\t\t\tcss: function() {\r\n\t\t\t\tRESTemplates.load('floater-visibleAfterScroll-CSS', (function(template) {\r\n\t\t\t\t\tRESUtils.addCSS(template.text({\r\n\t\t\t\t\t\toffset: this.getOffset()\r\n\t\t\t\t\t}));\r\n\t\t\t\t}).bind(this));\r\n\t\t\t},\r\n\t\t\tgo: function() {\r\n\t\t\t\twindow.addEventListener('scroll', RESUtils.debounce.bind(RESUtils, 'scroll.floater', 300, this.onScroll.bind(this)));\r\n\t\t\t\tsetTimeout(this.onScroll.bind(this), 500);\r\n\t\t\t},\r\n\t\t\tadd: function(element, options) {\r\n\t\t\t\tif (options && options.separate) {\r\n\t\t\t\t\t$(this.element).append(element);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar container = $('<li />');\r\n\t\t\t\t\tcontainer.append(element);\r\n\t\t\t\t\t$(this.element).find('> ul').append(container);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetOffset: function() {\r\n\t\t\t\tif (typeof this._offset !== 'number') {\r\n\t\t\t\t\tthis._offset = 5 + RESUtils.getHeaderOffset() + $('#header-bottom-left .tabmenu').height();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this._offset;\r\n\t\t\t},\r\n\t\t\tonScroll: function() {\r\n\t\t\t\tvar show = $(window).scrollTop() > this.getOffset();\r\n\t\t\t\t$(this.element).toggle(show);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.beforeLoad = function() {\r\n\t\t$.each(containers, function(name, container) {\r\n\t\t\tif (!container.element && typeof container.renderElement === 'function') {\r\n\t\t\t\tcontainer.element = container.renderElement();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tmodule.go = function() {\r\n\t\tvar elements = $.map(containers, function(container) {\r\n\t\t\treturn container.element;\r\n\t\t});\r\n\t\t$(document.body).append(elements);\r\n\r\n\t\tvar css = $.map(containers, function(container) {\r\n\t\t\tvar currentCss;\r\n\t\t\tif (typeof container.css === 'function') {\r\n\t\t\t\tcurrentCss = container.css();\r\n\t\t\t} else if (typeof container.css !== 'undefined') {\r\n\t\t\t\tcurrentCss = container.css;\r\n\t\t\t}\r\n\r\n\t\t\treturn currentCss;\r\n\t\t}).filter(function(css) {\r\n\t\t\treturn !!css;\r\n\t\t});\r\n\t\tcss.forEach(function(css) {\r\n\t\t\tRESUtils.addCSS(css);\r\n\t\t});\r\n\r\n\t\t$.each(containers, function(name, container) {\r\n\t\t\tif (typeof container.go === 'function') {\r\n\t\t\t\tcontainer.go();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tmodule.addElement = function(element, options) {\r\n\t\tvar container = containers[options && options.container] || containers[defaultContainer];\r\n\t\tif (typeof container.add === 'function') {\r\n\t\t\tcontainer.add(element, options);\r\n\t\t} else {\r\n\t\t\t$(container.element).append(element);\r\n\t\t}\r\n\t};\r\n\r\n});\r\n"],"sourceRoot":"/source/"}
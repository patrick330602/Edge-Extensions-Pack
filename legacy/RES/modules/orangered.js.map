{"version":3,"sources":["modules/orangered.js"],"names":[],"mappings":";;AAAA,UAAU,WAAV,EAAuB,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AACjD,QAAO,UAAP,GAAoB,iBAApB,CADiD;AAEjD,QAAO,QAAP,GAAkB,YAAlB,CAFiD;AAGjD,QAAO,WAAP,GAAqB,+CAArB,CAHiD;;AAKjD,QAAO,OAAP,GAAiB;AAChB,oBAAkB;AACjB,gBAAa,0EAAb;AACA,SAAM,SAAN;AACA,UAAO,KAAP;GAHD;AAKA,oBAAkB;AACjB,gBAAa,mEAAb;AACA,SAAM,SAAN;AACA,UAAO,IAAP;GAHD;AAKA,mBAAiB;AAChB,gBAAa,qDAAb;AACA,SAAM,SAAN;AACA,UAAO,IAAP;GAHD;AAKA,wBAAsB;AACrB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,uDAAb;GAHD;AAKA,mBAAiB;AAChB,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,2BAAb;AACA,cAAW,IAAX;GAJD;AAMA,oBAAkB;AACjB,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,yHAAb;AACA,cAAW,IAAX;GAJD;AAMA,0BAAwB;AACvB,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,8CAAb;GAHD;AAKA,4BAA0B;AACzB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,uCAAb;GAHD;AAKA,uBAAqB;AACpB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,2IAAb;GAHD;AAKA,sBAAoB;AACnB,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,yEAAb;AACA,aAAU,IAAV;AACA,cAAW,kBAAX;GALD;AAOA,eAAa;AACZ,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,uCAAb;AACA,cAAW,IAAX;GAJD;EAvDD,CALiD;;AAoEjD,KAAI,OAAJ,CApEiD;AAqEjD,KAAI,UAAJ,EAAgB,eAAhB,CArEiD;AAsEjD,KAAI,mBAAJ,EAAyB,kBAAzB,CAtEiD;;AAwEjD,QAAO,EAAP,GAAY,YAAW;AACtB,MAAI,EAAE,OAAO,SAAP,MAAsB,OAAO,UAAP,EAAtB,CAAF,EAA8C,OAAlD;;AAEA,MAAI,OAAO,OAAP,CAAe,gBAAf,CAAgC,KAAhC,EAAuC;AAC1C,KAAE,iBAAF,EAAqB,IAArB,CAA0B,QAA1B,EAAoC,QAApC,EAD0C;GAA3C;;AAIA,MAAI,SAAS,YAAT,OAA4B,IAA5B,EAAkC;AACrC,uBADqC;AAErC,0BAFqC;;AAIrC,oBAJqC;GAAtC;EAPW,CAxEqC;;AAuFjD,QAAO,cAAP,GAAwB,cAAxB,CAvFiD;AAwFjD,UAAS,cAAT,CAAwB,GAAxB,EAA6B;AAC5B,MAAI,CAAC,OAAO,OAAP,CAAe,gBAAf,CAAgC,KAAhC,EAAuC,OAA5C;;AAEA,MAAI,QAAQ,eAAe,GAAf,CAAR;;;;AAHwB,MAOxB,OAAO,KAAP,KAAiB,WAAjB,EAA8B;AACjC,kBAAe,KAAf,EAAsB,OAAO,KAAP,CAAtB,CADiC;GAAlC,MAEO,IAAI,CAAC,GAAD,EAAM;;;AAGhB,OAAI,mBAAmB,gBAAgB,QAAhB,GAA2B,YAA3B,GAA0C,SAAS,YAAT,EAA1C,CAHP;AAIhB,YAAS,KAAT,CAAe,KAAf,CAAqB;AACpB,SAAK,gBAAL;AACA,cAAU,iCAAV;AACA,gBAAY,oBAAS,QAAT,EAAmB;AAC9B,YAAO,SAAS,IAAT,CAAc,QAAd,CAAuB,MAAvB,IAAiC,CAAjC,CADuB;KAAnB;AAGZ,cAAU,cAAV;IAND,EAJgB;GAAV;EATR;;AAwBA,QAAO,cAAP,GAAwB,cAAxB,CAhHiD;AAiHjD,UAAS,cAAT,CAAwB,KAAxB,EAA+B,MAA/B,EAAuC;AACtC,qBAAmB,KAAnB,EADsC;AAEtC,cAAY,KAAZ,EAFsC;AAGtC,sBAAoB,KAApB,EAA2B,MAA3B,EAHsC;AAItC,0BAAwB,KAAxB,EAA+B,MAA/B,EAJsC;;AAMtC,MAAI,OAAO,OAAP,CAAe,eAAf,CAA+B,KAA/B,IAAyC,WAAW,KAAX,IAAqB,OAAO,KAAP,KAAiB,WAAjB,EAA8B;AAC/F,kBAAe,WAAf,CAA2B;AAC1B,iBAAa,WAAb;AACA,cAAU,QAAV;AACA,YAAQ,gBAAR;AACA,eAAW,CAAE,KAAF,CAAX;IAJD,EAD+F;GAAhG;EAND;;AAgBA,UAAS,WAAT,CAAqB,KAArB,EAA4B;AAC3B,MAAI,CAAC,OAAO,OAAP,CAAe,sBAAf,CAAsC,KAAtC,EAA6C,OAAlD;AACA,MAAI,QAAQ,CAAR,EAAW;AACd,YAAS,KAAT,GAAiB,MAAM,KAAN,GAAc,IAAd,GAAqB,SAAS,KAAT,CAAe,OAAf,CAAuB,cAAvB,EAAuC,EAAvC,CAArB,CADH;GAAf,MAEO;AACN,YAAS,KAAT,GAAiB,SAAS,KAAT,CAAe,OAAf,CAAuB,cAAvB,EAAuC,EAAvC,CAAjB,CADM;GAFP;EAFD;AAQA,UAAS,mBAAT,CAA6B,KAA7B,EAAoC,MAApC,EAA4C;AAC3C,UAAQ,SAAS,CAAT,CADmC;AAE3C,MAAI,OAAO,EAAE,mBAAF,CAAP,CAFuC;AAG3C,MAAI,OAAO,OAAP,CAAe,gBAAf,CAAgC,KAAhC,KAA0C,WAAW,KAAX,IAAoB,WAAW,KAAX,CAA9D,EAAiF;AACpF,UAAO,KAAK,GAAL,CAAS,UAAT,CAAP,CADoF;GAArF;;AAIA,OAAK,IAAL,CAAU,OAAV,EAAmB,QAAQ,WAAR,GAAsB,aAAtB,CAAnB,CACE,WADF,CACc,UADd,EAC0B,CAAC,CAAC,KAAD,CAD3B,CAEE,WAFF,CAEc,YAFd,EAE4B,CAAC,KAAD,CAF5B,CAGE,IAHF,CAGO,MAHP,EAGe,aAAa,KAAb,CAHf,EAP2C;EAA5C;AAYA,UAAS,uBAAT,CAAiC,KAAjC,EAAwC,MAAxC,EAAgD;AAC/C,MAAI,mBAAmB,OAAO,OAAP,CAAe,gBAAf,CAAgC,KAAhC,KAA0C,WAAW,KAAX,IAAoB,WAAW,KAAX,CAAjF,EAAoG;AACvG,mBAAgB,KAAhB,CAAsB,OAAtB,GAAgC,QAAQ,cAAR,GAAyB,MAAzB,CADuE;AAEvG,mBAAgB,WAAhB,GAA8B,KAA9B,CAFuG;GAAxG;;AAKA,MAAI,kBAAJ,EAAwB;AACvB,sBAAmB,KAAnB,CAAyB,OAAzB,GAAmC,QAAQ,cAAR,GAAyB,MAAzB,CADZ;AAEvB,sBAAmB,WAAnB,GAAiC,KAAjC,CAFuB;AAGvB,sBAAmB,SAAnB,CAA6B,GAA7B,CAAiC,eAAjC,EAHuB;GAAxB;EAND;AAYA,UAAS,kBAAT,CAA4B,KAA5B,EAAmC;AAClC,MAAI,CAAC,OAAO,OAAP,CAAe,wBAAf,CAAwC,KAAxC,EAA+C,OAApD;AACA,sBAFkC;;AAIlC,UAAQ,SAAS,CAAT,CAJ0B;AAKlC,UAAQ,KAAR,CAAc,KAAd,EALkC;EAAnC;AAOA,UAAS,iBAAT,GAA6B;AAC5B,MAAI,OAAJ,EAAa,OAAb;AACA,MAAI,CAAC,OAAO,OAAP,CAAe,wBAAf,CAAwC,KAAxC,EAA+C,OAApD;;AAEA,MAAI,iBAAiB,+mLAAjB;;AAJwB,GAM5B,CAAE,uDAAF,EAA2D,IAA3D,CAAgE,MAAhE,EAAwE,cAAxE;;;AAN4B,SAS5B,GAAU,IAAI,MAAJ,EAAV,CAT4B;;AAW5B,MAAI,OAAO,OAAP,CAAe,mBAAf,CAAmC,KAAnC,EAA0C;;AAE7C,KAAE,MAAF,EAAU,EAAV,CAAa,cAAb,EAA6B,YAAW;AACvC,YAAQ,KAAR,GADuC;IAAX,CAA7B,CAF6C;GAA9C;EAXD;;AAmBA,UAAS,oBAAT,GAAgC;AAC/B,MAAI,CAAC,OAAO,OAAP,CAAe,oBAAf,CAAoC,KAApC,EAA2C,OAAhD;AACA,MAAI,kBAAJ,EAAwB,OAAxB;;AAEA,MAAI,YAAY,QAAQ,aAAR,EAAuB,OAAvB,CAA+B,SAA/B,CAAyC,KAAzC,CAJe;AAK/B,MAAI,cAAc,KAAd,IAAuB,cAAc,MAAd,EAAsB;AAChD,yBAAsB,SAAS,aAAT,CAAuB,GAAvB,EAA4B,SAA5B,CAAtB,CADgD;AAEhD,WAAQ,SAAR,EAAmB,UAAnB,CAA8B,mBAA9B,EAFgD;;AAIhD,wBAAqB,SAAS,aAAT,CAAuB,GAAvB,EAA4B,cAA5B,CAArB,CAJgD;AAKhD,sBAAmB,OAAnB,GAA6B,MAA7B,CALgD;AAMhD,sBAAmB,YAAnB,CAAgC,MAAhC,EAAwC,aAAa,IAAb,CAAxC,EANgD;AAOhD,WAAQ,SAAR,EAAmB,UAAnB,CAA8B,kBAA9B,EAPgD;GAAjD;EALD;;AAgBA,UAAS,YAAT,CAAsB,QAAtB,EAAgC;AAC/B,MAAI,YAAY,CAAC,OAAO,OAAP,CAAe,kBAAf,CAAkC,KAAlC,EAAyC;AACzD,UAAO,kBAAP,CADyD;GAA1D;;AAIA,SAAO,iBAAP,CAL+B;EAAhC;AAOA,UAAS,cAAT,CAAwB,SAAxB,EAAmC;AAClC,cAAY,aAAa,SAAS,IAAT,CADS;AAElC,MAAI,YAAY,UAAU,aAAV,CAAwB,gBAAxB,CAAZ,CAF8B;AAGlC,MAAI,QAAQ,aAAa,SAAS,UAAU,WAAV,EAAuB,CAAhC,CAAb,CAHsB;;AAKlC,SAAO,KAAP,CALkC;EAAnC;CAlNsB,CAAvB","file":"modules/orangered.js","sourcesContent":["addModule('orangered', function(module, moduleID) {\r\n\tmodule.moduleName = 'Unread Messages';\r\n\tmodule.category = 'My account';\r\n\tmodule.description = 'Helping you get your daily dose of orangereds';\r\n\r\n\tmodule.options = {\r\n\t\topenMailInNewTab: {\r\n\t\t\tdescription: 'When clicking the mail envelope or modmail icon, open mail in a new tab?',\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false\r\n\t\t},\r\n\t\tupdateCurrentTab: {\r\n\t\t\tdescription: 'Update mail buttons on current tab when RES checks for orangereds',\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t},\r\n\t\tupdateOtherTabs: {\r\n\t\t\tdescription: 'Update all open tabs when RES checks for orangereds',\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t},\r\n\t\tshowFloatingEnvelope: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Show an envelope (inbox) icon in the top right corner'\r\n\t\t},\r\n\t\thideUnreadCount: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Hide unread message count',\r\n\t\t\tbodyClass: true\r\n\t\t},\r\n\t\tretroUnreadCount: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'If you dislike the unread count provided by native reddit, you can replace it with the RES-style bracketed unread count',\r\n\t\t\tbodyClass: true\r\n\t\t},\r\n\t\tshowUnreadCountInTitle: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Show unread message count in page/tab title?'\r\n\t\t},\r\n\t\tshowUnreadCountInFavicon: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Show unread message count in favicon?'\r\n\t\t},\r\n\t\tresetFaviconOnLeave: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Reset the favicon before leaving the page. \\n\\n This prevents the unread badge from appearing in bookmarks, but may hurt browser caching.'\r\n\t\t},\r\n\t\tunreadLinksToInbox: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Always go to the inbox, not unread messages, when clicking on orangered',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'updateCurrentTab'\r\n\t\t},\r\n\t\thideModMail: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Hide the mod mail button in user bar.',\r\n\t\t\tbodyClass: true\r\n\t\t}\r\n\t};\r\n\r\n\tvar favicon;\r\n\tvar mailButton, nativeMailCount;\r\n\tvar floatingInboxButton, floatingInboxCount;\r\n\r\n\tmodule.go = function() {\r\n\t\tif (!(module.isEnabled() && module.isMatchURL())) return;\r\n\r\n\t\tif (module.options.openMailInNewTab.value) {\r\n\t\t\t$('#mail, #modmail').attr('target', '_blank');\r\n\t\t}\r\n\r\n\t\tif (RESUtils.loggedInUser() !== null) {\r\n\t\t\tsetupFaviconBadge();\r\n\t\t\tsetupFloatingButtons();\r\n\r\n\t\t\tupdateFromPage();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.updateFromPage = updateFromPage;\r\n\tfunction updateFromPage(doc) {\r\n\t\tif (!module.options.updateCurrentTab.value) return;\r\n\r\n\t\tvar count = getUnreadCount(doc);\r\n\r\n\t\t// the new way of getting message count is right from reddit, as it will soon\r\n\t\t// output the message count, replacing RES's check.\r\n\t\tif (typeof count !== 'undefined') {\r\n\t\t\tsetUnreadCount(count, doc && 'ner');\r\n\t\t} else if (!doc) {\r\n\t\t\t// if the countDiv doesn't exist, we still need to use the old way of polling\r\n\t\t\t// reddit for unread count\r\n\t\t\tvar msgCountCacheKey = 'RESmodules.' + moduleID + '.msgCount.' + RESUtils.loggedInUser();\r\n\t\t\tRESUtils.cache.fetch({\r\n\t\t\t\tkey: msgCountCacheKey,\r\n\t\t\t\tendpoint: 'message/unread/.json?mark=false',\r\n\t\t\t\thandleData: function(response) {\r\n\t\t\t\t\treturn response.data.children.length || 0;\r\n\t\t\t\t},\r\n\t\t\t\tcallback: setUnreadCount\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.setUnreadCount = setUnreadCount;\r\n\tfunction setUnreadCount(count, source) {\r\n\t\tupdateFaviconBadge(count);\r\n\t\tupdateTitle(count);\r\n\t\tupdateInboxElements(count, source);\r\n\t\tupdateMailCountElements(count, source);\r\n\r\n\t\tif (module.options.updateOtherTabs.value && (source !== 'rpc') && typeof count !== 'undefined') {\r\n\t\t\tRESEnvironment.sendMessage({\r\n\t\t\t\trequestType: 'multicast',\r\n\t\t\t\tmoduleID: moduleID,\r\n\t\t\t\tmethod: 'setUnreadCount',\r\n\t\t\t\targuments: [ count ]\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateTitle(count) {\r\n\t\tif (!module.options.showUnreadCountInTitle.value) return;\r\n\t\tif (count > 0) {\r\n\t\t\tdocument.title = '[' + count + '] ' + document.title.replace(/^\\[[\\d]+\\]\\s/, '');\r\n\t\t} else {\r\n\t\t\tdocument.title = document.title.replace(/^\\[[\\d]+\\]\\s/, '');\r\n\t\t}\r\n\t}\r\n\tfunction updateInboxElements(count, source) {\r\n\t\tcount = count || 0;\r\n\t\tvar $ele = $(floatingInboxButton);\r\n\t\tif (module.options.updateCurrentTab.value && (source === 'rpc' || source === 'ner')) {\r\n\t\t\t$ele = $ele.add(mailButton);\r\n\t\t}\r\n\r\n\t\t$ele.attr('title', count ? 'new mail!' : 'No new mail')\r\n\t\t\t.toggleClass('havemail', !!count)\r\n\t\t\t.toggleClass('nohavemail', !count)\r\n\t\t\t.attr('href', getInboxLink(count));\r\n\t}\r\n\tfunction updateMailCountElements(count, source) {\r\n\t\tif (nativeMailCount && module.options.updateCurrentTab.value && (source === 'rpc' || source === 'ner')) {\r\n\t\t\tnativeMailCount.style.display = count ? 'inline-block' : 'none';\r\n\t\t\tnativeMailCount.textContent = count;\r\n\t\t}\r\n\r\n\t\tif (floatingInboxCount) {\r\n\t\t\tfloatingInboxCount.style.display = count ? 'inline-block' : 'none';\r\n\t\t\tfloatingInboxCount.textContent = count;\r\n\t\t\tfloatingInboxCount.classList.add('message-count');\r\n\t\t}\r\n\t}\r\n\tfunction updateFaviconBadge(count) {\r\n\t\tif (!module.options.showUnreadCountInFavicon.value) return;\r\n\t\tsetupFaviconBadge();\r\n\r\n\t\tcount = count || 0;\r\n\t\tfavicon.badge(count);\r\n\t}\r\n\tfunction setupFaviconBadge() {\r\n\t\tif (favicon) return;\r\n\t\tif (!module.options.showUnreadCountInFavicon.value) return;\r\n\r\n\t\tvar faviconDataurl = 'data:image/x-icon;base64,AAABAAEAICAAAAAAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA///n///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb////n/wAAAAD/8Nb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv//8Nb/AAAAAP7u1f/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//ngyP//5s3//+3T///w1v//8Nb//u7V//7u1f/+7tX///DW//7u1f/+6M//+eDI//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//7u1f8AAAAA/u7V//bdxv/23cb/9t3G//bdxv/23cb/9t3G///mzf//8Nb//ePL/9O/qv+hkYL/eW1g/1pQRv9HPzf/Rz83/1VLQf91aV3/mYl6/8i1of/23cb//u7V//7p0P/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb//u7V/wAAAAD+7tX/9t3G//bdxv/23cb/9t3G//3jy///8Nb/2cax/3VpXf8fGxj/BAQE/xIUFv8sLzH/RkhK/1pcXf9bXV//TE5Q/zAzNf8WGBn/BAQE/xQRDv9cUkj/xbOg//7s0v/+6M//9t3G//bdxv/23cb/9t3G//bdxv/+7tX/AAAAAP/w1v/23cb/9t3G//bdxv//7dP/7NfA/2RbUf8CAQH/IyQm/4GDhP/Ozs//+Pj4//////////////////////////////////39/f/Z2dr/lZaW/zc5O/8AAAD/RDw1/9TBrf//8Nb/9t3G//bdxv/23cb/9t3G///w1v8AAAAA/u7V//bdxv/23cb//u7V/8Oyn/8TEA3/ICIk/6+vsP/+/v7//v7+//7+/v/+/v7//v7+//7+/v/29vb/8/P0//39/f/+/v7//v7+//7+/v/+/v7//v7+/8vLy/8/QUL/AAAA/52PgP/+8df/+N7G//bdxv/23cb//u7V/wAAAAD+7tX/9t3G//7u1f+/rZr/AAAA/2JjZP/6+vr//v7+//7+/v/+/v7//v7+/7Ozs/9RUVH/IyMj/xYWFv8UFBT/Ghoa/zg4OP+MjIz/+Pj4//7+/v/+/v7//v7+//7+/v+Pj4//AAAA/41/cv//8Nb/9t3G//bdxv/+7tX/AAAAAP7u1f/85c3/59G7/wUDAv9pamv//v7+//7+/v/+/v7//v7+//7+/v9dXV3/AAAA/1dXV/+bm5v/vb2+/8PDw/+tra3/dnZ2/xYWFv8lJSX/8fHx//7+/v/+/v7//v7+//7+/v+hoqL/AAAA/7+tmv/+7NL/9t3G//7u1f8AAAAA//DW///w1v9aUEb/IyQm/////////////////////////////////4+Pj//Ly8v/////////////////////////////////8PDw/4WFhf/w8PD///////////////////////////9WWFr/Ix8a//znzv/54Mj///DW/wAAAAD+9dv/6dK7/wIBAf+rrK3//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+/9/f4P8AAAD/w66b//7p0P/+7tX/AAAAAP784P+8qZb/BgcH/+vr6//+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+/yMkJv+CdGb//u7V//7u1f8AAAAA/v7j/76rmP8ODg//9PT1//7+/v/+/v7//v7+//7+/v/+/v7//v7+/9TY/v/z9f7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+/8vP/v/s7/7//v7+//7+/v/+/v7//v7+//7+/v/+/v7/LzEz/4J0Zv/+99z//u7V/wAAAAD//+X/b2NY/wAAAP/d3d3///////////////////////f5//9QVv//AAD//yUq///d4f////////////////////////f5//9KT///AAD//x0h///Y2/////////////////////////////8VFxj/Ni8o/+zZwv//+N3/AAAAALWjkf8DBQf/EBAQ/3R0dP/+/v7//v7+//7+/v/+/v7/xsv+/wAA//8AAP//AAD//4GH/v/+/v7//v7+//7+/v/+/v7/yM3+/wAA//8AAP//AAD//32D/v/+/v7//v7+//7+/v/+/v7/t7e3/wQEBP8jJCb/Miwn//7z2v8AAAAAQTgx/3p7ff+3t7f/AAAA/9LS0v/+/v7//v7+//7+/v/l6P7/Ehb+/wAA//8AAP//t7z+//7+/v/+/v7//v7+//7+/v/p7P7/GR7+/wAA//8AAP//ub7+//7+/v/+/v7//v7+//n5+f8WFhb/ZWVl//Pz9P8DBQf/t6KQ/wAAAAAxKiT/jI2P//7+/v9RUVH/Dg4P/9vb2//+/v7//v7+//7+/v/U2P7/fYP+/7G2/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/b3/7/iI3+/7m+/v/+/v7//v7+//7+/v/09PX/PDw8/xkZGf/x8fH//v7+/zAzNf+Ddmj/AAAAAH9wY/8XGhz/8PDw//////9XV1f/EhIS/6anp///////////////////////////////////////////////////////////////////////////////////////xcXG/ysrLP8vLy//8PDw///////q6ur/AQMF/7mkkv8AAAAA9+rS/y4pJf8QEhT/YGJj/0lLTf8AAAD/AAAA/zU3Of+vr7D/+Pj4//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7/xcXG/1JTVf8CAQH/AAAA/0JERv+1trf/nZ6e/xkbHf82MCr//vXb/wAAAAD/+N3/89vE/4l7bf9EPDX/WE5F/7+tmv/Ww6//Vk1E/wYFBP8SFBb/UlNV/5KTlP+9vb7/3d3d/+rq6v/r6+v/39/g/8vLy/+fn6D/X2Bi/x4gIv8CAQH/OzUu/8Gwnf/Rv6r/Rz83/w4MCf8TEA3/ZFpP/+/Zwv/+99z/AAAAAP7u1f/74sn//u7V//7u1f/+7tX//unQ//7oz//+7tX/4s23/5aHeP9JQTj/GxcT/wkIB/8GBwf/BwgJ/w4OD/8KCgr/BgUE/xMQDf8+Ny//g3Zo/9O/qv/+7NL//unQ//7oz//+6dD/79fA//PbxP/+7tX/++LJ//7u1f8AAAAA//DW//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/948v//u7V//7u1f/74sn/5s+5/9G9qP+olob/AAAA/5+QgP/iz7n/89vE///t0//+7tX//+bN//bdxv/23cb//+bN//7p0P//5s3/+eDI//bdxv/23cb///DW/wAAAAD+7tX/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//ngyP/948v//unQ///w1v8jIB3/hHdr///43f/54Mj/9t3G//bdxv/23cb/++LJ//7p0P/Tvan/w7Cc//PbxP/+6M//9tzE//bdxv/+7tX/AAAAAP7u1f/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb//vHX/21jWf8uKSX//unQ//bdxv/23cb/9t3G//ngyP/85c3/YllP/wMCAv8GBwf/IR0a/9TBrf/+6M//9t3G//7u1f8AAAAA/u7V//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/+6dD/vquY/wMCAv/iy7X//ePL//bdxv/74sn//vne/5SFdv8BAwX/wcLC/+Li4v9ERkj/KCMf//nlzP/54Mj//u7V/wAAAAD/8Nb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//viyf/z28T/DAsL/6GRgv///+X//+3T/+/Zwv/JvKj/Ix8a/2NlZv///////////9nZ2v8AAAD/3MWw///mzf//8Nb/AAAAAP7u1f/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G///w1v9PR0D/Mi0p/3l1af84My7/EBAQ/woKCv8PDQz/NDU2//v7+//+/v7/iYqL/wgGBP/v18D/++LJ//7u1f8AAAAA/u7V//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb//uzS/7Ggj/8UEhH/MCom/2phV/+omYj/4M23/9/Ltv8fGxj/Gx0f/zI0Nv8AAAD/mot9//7s0v/23cb//u7V/wAAAAD+7tX/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/+eDI/+/XwP/+6dD///DW//7s0v/948v//unQ/+fRu/+Ddmj/bmJW/8Gum//+7NL/9t3G//bdxv/+7tX/AAAAAP/w1v/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/23cb/9t3G//bdxv/43sb/++LJ//jexv/23cb/9t3G//bdxv/23cb//ePL//7u1f//8Nb//unQ//bdxv/23cb/9t3G///w1v8AAAAA///n///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb///DW///w1v//8Nb////n/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAP////8=';\r\n\t\t// Remove current favicons and replace accordingly, or Favico has a cross domain issue since the real favicon is on redditstatic.com.\r\n\t\t$('head link[rel=\"shortcut icon\"], head link[rel=\"icon\"]').attr('href', faviconDataurl);\r\n\r\n\t\t// Init Favico\r\n\t\tfavicon = new Favico();\r\n\r\n\t\tif (module.options.resetFaviconOnLeave.value) {\r\n\t\t\t// Prevent notification icon from showing up in bookmarks\r\n\t\t\t$(window).on('beforeunload', function() {\r\n\t\t\t\tfavicon.reset();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setupFloatingButtons() {\r\n\t\tif (!module.options.showFloatingEnvelope.value) return;\r\n\t\tif (floatingInboxCount) return;\r\n\r\n\t\tvar pinHeader = modules['betteReddit'].options.pinHeader.value;\r\n\t\tif (pinHeader === 'sub' || pinHeader === 'none') {\r\n\t\t\tfloatingInboxButton = RESUtils.createElement('a', 'NREMail');\r\n\t\t\tmodules['floater'].addElement(floatingInboxButton);\r\n\r\n\t\t\tfloatingInboxCount = RESUtils.createElement('a', 'NREMailCount');\r\n\t\t\tfloatingInboxCount.display = 'none';\r\n\t\t\tfloatingInboxCount.setAttribute('href', getInboxLink(true));\r\n\t\t\tmodules['floater'].addElement(floatingInboxCount);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getInboxLink(havemail) {\r\n\t\tif (havemail && !module.options.unreadLinksToInbox.value) {\r\n\t\t\treturn '/message/unread/';\r\n\t\t}\r\n\r\n\t\treturn '/message/inbox/';\r\n\t}\r\n\tfunction getUnreadCount(container) {\r\n\t\tcontainer = container || document.body;\r\n\t\tvar mailCount = container.querySelector('.message-count');\r\n\t\tvar value = mailCount && parseInt(mailCount.textContent, 0);\r\n\r\n\t\treturn value;\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
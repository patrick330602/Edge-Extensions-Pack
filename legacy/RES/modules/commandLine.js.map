{"version":3,"sources":["modules/commandLine.js"],"names":[],"mappings":"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","file":"modules/commandLine.js","sourcesContent":["addModule('commandLine', function(module, moduleID) {\r\n\tmodule.moduleName = 'RES Command Line';\r\n\tmodule.description = 'Command line for navigating reddit, toggling RES settings, and debugging RES';\r\n\tmodule.category = ['Core'];\r\n\tmodule.options.launch = {\r\n\t\ttype: 'button',\r\n\t\ttext: 'Launch',\r\n\t\tdescription: 'Open the RES Command Line',\r\n\t\tcallback: function() { module.toggleCmdLine(true); }\r\n\t};\r\n\tmodule.options.menuItem = {\r\n\t\ttype: 'boolean',\r\n\t\ttext: 'Add a \"launch command line\" item to the RES dropdown menu',\r\n\t\tvalue: false\r\n\t};\r\n\tmodule.options.launchFromMenuButton = {\r\n\t\ttype: 'boolean',\r\n\t\ttext: 'Launch the command line by clicking the RES menu <span class=\"gearIcon\"></span> gear button',\r\n\t\tvalue: false\r\n\t};\r\n\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tattachCommandLineWidget();\r\n\r\n\t\t\tif (module.options.menuItem.value) {\r\n\t\t\t\taddMenuItem();\r\n\t\t\t}\r\n\r\n\t\t\tif (module.options.launchFromMenuButton.value) {\r\n\t\t\t\taddMenuButtonHandler();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction addMenuItem() {\r\n\t\tvar menuItem = RESUtils.createElement('div', null, null, 'command line');\r\n\t\tvar button = RESUtils.createElement('span', null, 'RESMenuItemButton res-icon', '\\uF060');\r\n\t\tmenuItem.appendChild(button);\r\n\r\n\r\n\t\tmodules['RESMenu'].addMenuItem(menuItem, _onClickMenu);\r\n\t}\r\n\r\n\tfunction addMenuButtonHandler() {\r\n\t\tmodules['RESMenu'].onClickMenuButton(_onClickMenu);\r\n\t}\r\n\r\n\tfunction _onClickMenu(e) {\r\n\t\tmodules['RESMenu'].hidePrefsDropdown();\r\n\t\tmodule.toggleCmdLine(true);\r\n\t}\r\n\r\n\tfunction attachCommandLineWidget() {\r\n\t\tRESTemplates.load('commandLine', _attachCommandLineWidget);\r\n\t}\r\n\r\n\tvar commandLineWidget, commandLineInput, commandLineInputTip, commandLineInputError;\r\n\r\n\tfunction _attachCommandLineWidget(template) {\r\n\t\tvar widget = template.html();\r\n\r\n\t\tcommandLineWidget = widget[0];\r\n\r\n\t\tcommandLineWidget.style.display = 'none';\r\n\r\n\t\tcommandLineInput = widget.find('#keyCommandInput')[0];\r\n\r\n\t\tcommandLineInput.setAttribute('autocomplete', 'off');\r\n\r\n\t\tcommandLineInput.addEventListener('blur', function(e) {\r\n\t\t\tif (!commandLineInput.value.length) {\r\n\t\t\t\tmodule.toggleCmdLine(false);\r\n\t\t\t} else {\r\n\t\t\t\tcmdLineShowError('click into the text input and press escape to close the command line');\r\n\t\t\t}\r\n\t\t}, false);\r\n\t\tcommandLineInput.addEventListener('keyup', function(e) {\r\n\t\t\tif (e.keyCode === 27) {\r\n\t\t\t\t// close prompt.\r\n\t\t\t\tmodule.toggleCmdLine(false);\r\n\t\t\t} else {\r\n\t\t\t\t// auto suggest?\r\n\t\t\t\tcmdLineHelper(e.target.value);\r\n\t\t\t}\r\n\t\t}, false);\r\n\t\tcommandLineInputTip = widget.find('#keyCommandInputTip')[0];\r\n\t\tcommandLineInputError = widget.find('#keyCommandInputError')[0];\r\n\r\n\t\tvar commandLineForm = widget.find('#keyCommandForm')[0];\r\n\t\tcommandLineForm.addEventListener('keydown', function(e) {\r\n\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\tcmdLineSubmit(e);\r\n\t\t\t}\r\n\t\t}, false);\r\n\r\n\t\tdocument.body.appendChild(commandLineWidget);\r\n\r\n\t}\r\n\r\n\tfunction cmdLineShowTip(str) {\r\n\t\tif (str === false) {\r\n\t\t\t$(commandLineInputTip).empty();\r\n\t\t} else {\r\n\t\t\t$(commandLineInputTip).safeHtml(str);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cmdLineShowError(str) {\r\n\t\tif (str === false) {\r\n\t\t\t$(commandLineInputError).empty();\r\n\t\t} else {\r\n\t\t\t$(commandLineInputError).safeHtml(str);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.toggleCmdLine = function(force) {\r\n\t\tif (!(this.isEnabled() && this.isMatchURL())) return;\r\n\r\n\t\tvar open = ((force === undefined || force) && commandLineWidget.style.display !== 'block');\r\n\r\n\t\tif (open) {\r\n\t\t\tcmdLineShowError(false);\r\n\t\t\tcmdLineShowTip(false);\r\n\t\t\tcommandLineWidget.style.display = 'block';\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tcommandLineInput.focus();\r\n\t\t\t}, 20);\r\n\t\t\tcommandLineInput.value = '';\r\n\t\t} else {\r\n\t\t\tcommandLineInput.blur();\r\n\t\t\tcommandLineWidget.style.display = 'none';\r\n\t\t}\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(!open, 'cmdline');\r\n\t};\r\n\r\n\tfunction cmdLineHelper(val) {\r\n\t\tvar splitWords = val.split(' '),\r\n\t\t\tcommand = splitWords[0];\r\n\t\tsplitWords.splice(0, 1);\r\n\t\tval = splitWords.join(' ');\r\n\t\tvar tip = getTip(command, val);\r\n\t\tcmdLineShowTip(tip);\r\n\t\tif (tip) {\r\n\t\t\tcmdLineShowError(false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cmdLineSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tcmdLineShowError(false);\r\n\r\n\t\tvar val = commandLineInput.value;\r\n\r\n\t\tvar splitWords = val.split(' '),\r\n\t\t\tcommand = splitWords[0];\r\n\t\tsplitWords.splice(0, 1);\r\n\t\tval = splitWords.join(' ');\r\n\r\n\t\tvar error = executeCommand(command, val, e);\r\n\t\tif (error) {\r\n\t\t\tcmdLineShowError(error);\r\n\t\t} else if (error !== false) {\r\n\t\t\t// hide the commandline tool...\r\n\t\t\tmodule.toggleCmdLine(false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction navigateTo(url, e) {\r\n\t\tif (e.shiftKey) {\r\n\t\t\tif (e.altKey) { // background tab\r\n\t\t\t\tRESEnvironment.openLinkInNewTab(url);\r\n\t\t\t} else { // new tab\r\n\t\t\t\tRESEnvironment.openInNewWindow(url);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlocation.href = url;\r\n\t\t}\r\n\t}\r\n\r\n\tvar commands = [];\r\n\tmodule.registerCommand = function registerCommand(commandPredicate, description, getTip, executeCommand) {\r\n\t\tcommands.push({\r\n\t\t\tcommandPredicate: commandPredicate,\r\n\t\t\tdescription: description,\r\n\t\t\tgetTip: getTip,\r\n\t\t\texecuteCommand: executeCommand\r\n\t\t});\r\n\t};\r\n\r\n\tfunction getCommandSpec(command, val) {\r\n\t\tvar result;\r\n\t\tcommands.some(function(commandSpec) {\r\n\t\t\tvar predicateResult;\r\n\t\t\tif (commandSpec.commandPredicate.exec) {\r\n\t\t\t\tpredicateResult = commandSpec.commandPredicate.exec(command);\r\n\t\t\t} else if (typeof commandSpec.commandPredicate === 'string') {\r\n\t\t\t\tpredicateResult = commandSpec.commandPredicate === command;\r\n\t\t\t} else if (typeof commandSpec.commandPredicate === 'function') {\r\n\t\t\t\tpredicateResult = commandSpec.commandPredicate(command, val);\r\n\t\t\t}\r\n\t\t\tif (predicateResult) {\r\n\t\t\t\tresult = {};\r\n\t\t\t\tfor (var key in commandSpec) {\r\n\t\t\t\t\tif (!commandSpec.hasOwnProperty(key)) continue;\r\n\t\t\t\t\tresult[key] = commandSpec[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult.predicateResult = predicateResult;\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getTip(command, val) {\r\n\t\tvar str = false;\r\n\t\tvar matchingCommandSpec = getCommandSpec(command, val);\r\n\t\tif (matchingCommandSpec) {\r\n\t\t\tstr = matchingCommandSpec.getTip(command, val, matchingCommandSpec.predicateResult);\r\n\t\t}\r\n\r\n\t\treturn str;\r\n\t}\r\n\r\n\tfunction executeCommand(command, value, event) {\r\n\t\t// see what kind of input it is:\r\n\t\tvar matchingCommandSpec = getCommandSpec(command, value);\r\n\t\tif (matchingCommandSpec) {\r\n\t\t\tvar result = matchingCommandSpec.executeCommand(command, value, matchingCommandSpec.predicateResult, event);\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\treturn 'unknown command - type ? for help';\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.registerCommand(/^\\/?r\\/(.*)/, 'r/[subreddit] - navigates to subreddit',\r\n\t\tfunction(command, val, match) {\r\n\t\t\treturn 'navigate to subreddit: ' + match[1];\r\n\t\t}, function(command, val, match, e) {\r\n\t\t\tnavigateTo('/r/' + match[1], e);\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand(/^\\/?m\\/(.*)/, 'm/[multi] - view your multi-reddit [multi]',\r\n\t\tfunction(command, val, match) {\r\n\t\t\treturn 'navigate to multi-reddit: /me/m/' + match[1];\r\n\t\t}, function(command, val, match, e) {\r\n\t\t\tnavigateTo('/me/m/' + match[1], e);\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand('m', 'm - go to inbox',\r\n\t\tfunction() {\r\n\t\t\treturn 'View messages';\r\n\t\t}, function(command, value, match, e) {\r\n\t\t\tnavigateTo('/message/inbox/', e);\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand('mm', 'mm - go to moderator mail',\r\n\t\tfunction() {\r\n\t\t\treturn 'View moderator mail';\r\n\t\t}, function(command, value, match, e) {\r\n\t\t\tnavigateTo('/message/moderator/', e);\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand(/^XHR/, 'XHRCache clear - manipulate the XHR cache',\r\n\t\tfunction(command, value, match) {\r\n\t\t\treturn 'clear - clear the cache (use if inline images aren\\'t loading properly)';\r\n\t\t}, function(command, value, match, e) {\r\n\t\t\tif (/^\\s*$/.test(value)) {\r\n\t\t\t\treturn 'Operation required [clear]';\r\n\t\t\t}\r\n\r\n\t\t\tswitch (value) {\r\n\t\t\t\tcase 'clear':\r\n\t\t\t\t\tRESUtils.xhrCache('clear');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn 'The only accepted operation is <tt>clear</tt>';\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\r\n\tmodule.registerCommand(/^user$|^u$|^\\/?u(?:ser)?\\/(\\w*((?!\\/m\\/).)*)$/, 'user [username] or u/[username] - view profile for [username]',\r\n\t\tfunction(command, val, match) {\r\n\t\t\tval = RESUtils.firstValid(val || undefined, match[1] || undefined, false);\r\n\t\t\tif (val === false && RESUtils.loggedInUser()) {\r\n\t\t\t\treturn 'go to profile';\r\n\t\t\t} else if (val === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn 'go to profile for: ' + val;\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\tval = RESUtils.firstValid(val || undefined, match[1] || undefined, RESUtils.loggedInUser(), false);\r\n\t\t\tif (val === false) {\r\n\t\t\t\treturn 'not logged in';\r\n\t\t\t}\r\n\t\t\tnavigateTo('/u/' + val, e);\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand(/^\\/?u(?:ser)?\\/(\\w+)\\/m(?:\\/(.+))?/, 'u/[username]/m/[multi] - view the multireddit [multi] curated by [username]',\r\n\t\tfunction(command, val, match) {\r\n\t\t\treturn 'navigate to multi-reddit: /u/' + match[1] + '/m/' + (match[2] || '');\r\n\t\t},\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\tif (!match[1]) {\r\n\t\t\t\treturn 'no multi-reddit specified';\r\n\t\t\t}\r\n\t\t\tnavigateTo('/u/' + match[1] + '/m/' + match[2], e);\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand(/^\\/?me(?:\\/?(.*))$/,\r\n\t\t[\r\n\t\t\t'me - view profile for current user',\r\n\t\t\t'me/saved or me/s - view current user\\'s saved links',\r\n\t\t\t'me/saved#comments or me/sc - view current user\\'s saved comments',\r\n\t\t\t'me/submitted or me/sub - view current user\\'s submitted content',\r\n\t\t\t'me/comments or me/c - view current user\\'s comments',\r\n\t\t\t'me/gilded or me/g - view current user\\'s gilded content',\r\n\t\t\t'me/liked or me/l - view current user\\'s liked content ',\r\n\t\t\t'me/disliked or me/d - view current user\\'s disliked content',\r\n\t\t\t'me/hidden or me/h - view current user\\'s hidden content'\r\n\t\t],\r\n\t\tfunction(command, val, match) {\r\n\t\t\tif (!RESUtils.loggedInUser()) {\r\n\t\t\t\treturn 'not logged in';\r\n\t\t\t}\r\n\t\t\tvar str;\r\n\t\t\tswitch (match[1]) {\r\n\t\t\t\tcase '':\r\n\t\t\t\t\t// go to current user's page\r\n\t\t\t\t\tstr = 'navigate to user profile: ' + modules['accountSwitcher'].loggedInUser;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saved':\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\t// go to current user's saved content\r\n\t\t\t\t\tstr = 'navigate to current user\\'s saved content';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saved#comments':\r\n\t\t\t\tcase 'sc':\r\n\t\t\t\t\t// go to current RES's saved comments\r\n\t\t\t\t\tstr = 'navigate to current RES\\'s saved comments';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'submitted':\r\n\t\t\t\tcase 'sub':\r\n\t\t\t\t\t// go to current user's submitted content\r\n\t\t\t\t\tstr = 'navigate to current user\\'s submitted content';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'comments':\r\n\t\t\t\tcase 'c':\r\n\t\t\t\t\t// go to current user's comments page\r\n\t\t\t\t\tstr = 'navigate to current user\\'s comments';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'gilded':\r\n\t\t\t\tcase 'g':\r\n\t\t\t\t\t// go to current user's gilded content\r\n\t\t\t\t\tstr = 'navigate to current user\\'s gilded content';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'liked':\r\n\t\t\t\tcase 'l':\r\n\t\t\t\t\t// go to current user's liked content\r\n\t\t\t\t\tstr = 'navigate to current user\\'s liked content';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'disliked':\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\t// go to current user's disliked content\r\n\t\t\t\t\tstr = 'navigate to current user\\'s disliked content';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'hidden':\r\n\t\t\t\tcase 'h':\r\n\t\t\t\t\t// go to current user's hidden content\r\n\t\t\t\t\tstr = 'navigate to current user\\'s hidden content';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstr = 'navigate to [s]aved, [s]aved[c]omments, [sub]mitted, [c]omments, [g]ilded, [l]iked, [d]isliked, [h]idden';\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t},\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\tif (!RESUtils.loggedInUser()) {\r\n\t\t\t\treturn 'not logged in';\r\n\t\t\t}\r\n\t\t\tvar currentUser = modules['accountSwitcher'].loggedInUser;\r\n\t\t\tswitch (match[1]) {\r\n\t\t\t\tcase '':\r\n\t\t\t\t\t// go to current user's page\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser, e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saved':\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\t// go to current user's saved content\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/saved', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'saved#comments':\r\n\t\t\t\tcase 'sc':\r\n\t\t\t\t\t// go to current user's saved comments\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/saved#comments', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'submitted':\r\n\t\t\t\tcase 'sub':\r\n\t\t\t\t\t// go to current user's submitted content\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/submitted', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'comments':\r\n\t\t\t\tcase 'c':\r\n\t\t\t\t\t// go to current user's comments page\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/comments', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'gilded':\r\n\t\t\t\tcase 'g':\r\n\t\t\t\t\t// go to current user's gilded content\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/gilded', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'liked':\r\n\t\t\t\tcase 'l':\r\n\t\t\t\t\t// go to current user's liked content\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/liked', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'disliked':\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\t// go to current user's disliked content\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/disliked', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'hidden':\r\n\t\t\t\tcase 'h':\r\n\t\t\t\t\t// go to current user's hidden content\r\n\t\t\t\t\tnavigateTo('/user/' + currentUser + '/hidden', e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn 'unknown command - type ? for help';\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand('userinfo', false,\r\n\t\tfunction() { },\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\t// view JSON data for username (username is required)\r\n\t\t\tif (val.length <= 1) {\r\n\t\t\t\treturn 'No username specified.';\r\n\t\t\t} else {\r\n\t\t\t\tRESEnvironment.ajax({\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\turl: location.protocol + '//' + location.hostname + '/user/' + encodeURIComponent(val) + '/about.json?app=res',\r\n\t\t\t\t\tonload: function(response) {\r\n\t\t\t\t\t\talert(response.responseText);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand('userbadge', false,\r\n\t\tfunction() { },\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\t// get CSS code for a badge for username (username is required)\r\n\t\t\tif (val.length <= 1) {\r\n\t\t\t\treturn 'No username specified.';\r\n\t\t\t} else {\r\n\t\t\t\tRESEnvironment.ajax({\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\turl: location.protocol + '//' + location.hostname + '/user/' + val + '/about.json?app=res',\r\n\t\t\t\t\tonload: function(response) {\r\n\t\t\t\t\t\tvar thisResponse = JSON.parse(response.responseText);\r\n\t\t\t\t\t\tvar css = ', .id-t2_' + thisResponse.data.id + ':before';\r\n\t\t\t\t\t\talert(css);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand(/(?:RES)?stor(?:e|age)?/i, 'RESStorage [get|set|update|remove] [key] [value] - For debug use only, you shouldn\\'t mess with this unless you know what you\\'re doing.',\r\n\t\tfunction(command, value, match) { },\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\t// get or set RESStorage data\r\n\t\t\tvar splitWords = val.split(' ');\r\n\t\t\tif (splitWords.length < 2) {\r\n\t\t\t\treturn 'You must specify \"get [key]\", \"update [key]\" or \"set [key] [value]\"';\r\n\t\t\t} else {\r\n\t\t\t\tcommand = splitWords[0];\r\n\t\t\t\tvar key = splitWords[1],\r\n\t\t\t\t\tvalue;\r\n\t\t\t\tif (splitWords.length > 2) {\r\n\t\t\t\t\tvalue = splitWords.slice(2).join(' ');\r\n\t\t\t\t}\r\n\t\t\t\tkey = storage.sanitizeStorageKey(key);\r\n\r\n\t\t\t\t// console.log(command);\r\n\t\t\t\treturn storage.executeCommand(command, key, value);\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\tvar storage = {\r\n\t\toptionsRegex: /(?:RES)?opt(?:ion)?s?[\\.\\s]+(.*)/i,\r\n\t\tmoduleDataRegex: /(?:RES)?mod(?:ule)?s?[\\.\\s]+(.*)/i,\r\n\t\tsanitizeStorageKey: function(key) {\r\n\t\t\tvar match;\r\n\t\t\tif ((match = storage.optionsRegex.exec(key))) {\r\n\t\t\t\tkey = 'RESoptions.' + match[1];\r\n\t\t\t} else if ((match = storage.moduleDataRegex.exec(key))) {\r\n\t\t\t\tkey = 'RESmodules.' + match[1];\r\n\t\t\t}\r\n\r\n\t\t\treturn key;\r\n\t\t},\r\n\t\texecuteCommand: function(command, key, value) {\r\n\t\t\tif (command === 'get') {\r\n\t\t\t\talert('Value of RESStorage[' + escapeHTML(key) + ']: <br><br><textarea rows=\"5\" cols=\"50\">' + escapeHTML(RESStorage.getItem(key)) + '</textarea>');\r\n\t\t\t} else if (command === 'update') {\r\n\t\t\t\tvar now = Date.now();\r\n\t\t\t\talert('Value of RESStorage[' + escapeHTML(key) + ']: <br><br><textarea id=\"RESStorageUpdate' + now + '\" rows=\"5\" cols=\"50\">' + escapeHTML(RESStorage.getItem(key)) + '</textarea>', function() {\r\n\t\t\t\t\tvar textArea = document.getElementById('RESStorageUpdate' + now);\r\n\t\t\t\t\tif (textArea) {\r\n\t\t\t\t\t\tvar value = textArea.value;\r\n\t\t\t\t\t\tRESStorage.setItem(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (command === 'remove') {\r\n\t\t\t\tRESStorage.removeItem(key);\r\n\t\t\t\talert('RESStorage[' + escapeHTML(key) + '] deleted');\r\n\t\t\t} else if (command === 'set') {\r\n\t\t\t\tRESStorage.setItem(key, value);\r\n\t\t\t\talert('RESStorage[' + escapeHTML(key) + '] set to:<br><br><textarea rows=\"5\" cols=\"50\">' + escapeHTML(value) + '</textarea>');\r\n\t\t\t} else {\r\n\t\t\t\treturn 'You must specify either \"get [key]\" or \"set [key] [value]\"';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar sortTypes = {\r\n\t\tn: 'new',\r\n\t\tt: 'top',\r\n\t\th: 'hot',\r\n\t\tr: 'rising',\r\n\t\tc: 'controversial',\r\n\t\tg: 'gilded',\r\n\t\tp: 'ads'\r\n\t};\r\n\tmodule.registerCommand(/^\\/([nthrcgp])?/, '/n, /t, /h, /r, /c, /g, or /p - goes to new, top, hot, rising, controversial, gilded, or promoted sort of current subreddit, multireddit or user page',\r\n\t\tfunction(command, val, match) {\r\n\t\t\treturn 'sort by ([n]ew, [t]op, [h]ot, [r]ising, [c]ontroversial, [g]ilded, [p]romoted): ' + (match[1] || '');\r\n\t\t},\r\n\t\tfunction(command, val, match, e) {\r\n\t\t\tvar theInput = sortTypes[match[1]];\r\n\t\t\tif (theInput) {\r\n\t\t\t\tif (RESUtils.currentUserProfile()) {\r\n\t\t\t\t\t// Special-case for user pages since they behave a little differently\r\n\t\t\t\t\t// than subreddits/multireddits.\r\n\t\t\t\t\tif (theInput === 'gilded') {\r\n\t\t\t\t\t\tnavigateTo('/user/' + RESUtils.currentUserProfile() + '/' + theInput, e);\r\n\t\t\t\t\t} else if (theInput === 'ads' || theInput === 'rising') {\r\n\t\t\t\t\t\treturn 'invalid sort command - \"' + theInput + '\" is not supported on profile pages';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnavigateTo('/user/' + RESUtils.currentUserProfile() + '?sort=' + theInput, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (RESUtils.currentSubreddit()) {\r\n\t\t\t\t\tnavigateTo('/r/' + RESUtils.currentSubreddit() + '/' + theInput, e);\r\n\t\t\t\t} else if (RESUtils.currentMultireddit()) {\r\n\t\t\t\t\tnavigateTo('/' + RESUtils.currentMultireddit() + '/' + theInput, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavigateTo('/' + theInput, e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn 'invalid sort command - must be one of [n]ew, [t]op, [h]ot, [r]ising, [c]ontroversial, [g]ilded, [p]romoted';\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tmodule.registerCommand('?', false,\r\n\t\tfunction() {\r\n\t\t\tvar descriptions = commands.map(function(command) {\r\n\t\t\t\treturn command.description;\r\n\t\t\t}).reduce(function(a, b) {\r\n\t\t\t\treturn b ? a.concat(b) : a;\r\n\t\t\t}, []);\r\n\r\n\t\t\tif (descriptions.length) {\r\n\t\t\t\treturn '<ul><li>' + descriptions.join('</li><li>') + '</li></ul>';\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction() {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t);\r\n});\r\n"],"sourceRoot":"/source/"}
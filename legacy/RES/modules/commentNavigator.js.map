{"version":3,"sources":["modules/commentNavigator.js"],"names":[],"mappings":"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","file":"modules/commentNavigator.js","sourcesContent":["addModule('commentNavigator', function(module, moduleID) {\r\n\tmodule.moduleName = 'Comment Navigator';\r\n\tmodule.category = 'Comments';\r\n\tmodule.description = 'Provides a comment navigation tool to easily find comments by OP, mod, etc.';\r\n\tmodule.options = {\r\n\t\tshowByDefault: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Display Comment Navigator by default'\r\n\t\t},\r\n\t\topenOnHighlightUser: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Display Comment Navigator when a user is highlighted',\r\n\t\t\tadvanced: true\r\n\t\t}\r\n\t};\r\n\tmodule.include = [\r\n\t\t'comments'\r\n\t];\r\n\r\n\tvar _posts = [];\r\n\tvar _nav = [];\r\n\tvar commentNavBox, commentNavToggle, navSelect, commentNavPostCount, commentNavButtons, commentNavUp, commentNavDown;\r\n\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\t// draw the commentNav box\r\n\t\t\tcommentNavBox = RESUtils.createElement('div', 'REScommentNavBox');\r\n\t\t\tcommentNavBox.classList.add('RESDialogSmall');\r\n\t\t\t// var commentArea = document.body.querySelector('div.sitetable.nestedlisting');\r\n\t\t\tvar commentArea = document.body.querySelector('.commentarea .menuarea');\r\n\t\t\tif (commentArea) {\r\n\t\t\t\tcommentNavToggle = RESUtils.createElement('div', 'REScommentNavToggle');\r\n\t\t\t\t$(commentNavToggle).html('<span>navigate by:</span> ');\r\n\t\t\t\tvar sortTypes = ['submitter', 'moderator', 'friend', 'me', 'admin', 'highlighted', 'gilded', 'IAmA', 'images', 'videos', 'popular', 'new'];\r\n\t\t\t\tfor (var i = 0, len = sortTypes.length; i < len; i++) {\r\n\t\t\t\t\tvar thisCategory = sortTypes[i];\r\n\t\t\t\t\t// var thisEle = document.createElement('div');\r\n\t\t\t\t\tvar thisEle = RESUtils.createElement('div', 'navigateBy' + thisCategory, 'commentNavSortType noCtrlF', thisCategory);\r\n\t\t\t\t\tthisEle.setAttribute('index', i + 1);\r\n\t\t\t\t\tswitch (thisCategory) {\r\n\t\t\t\t\t\tcase 'submitter':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate comments made by the post submitter');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'moderator':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate comments made by moderators');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'friend':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate comments made by users on your friends list');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'me':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate comments made by you');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'admin':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate comments made by reddit admins');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'highlighted':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate comments made by highlighted user');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'gilded':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate through gilded comments');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'IAmA':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate through questions that have been answered by the submitter (most useful in /r/IAmA)');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'images':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate through comments with images');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'videos':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate through comments with videos');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'popular':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate through comments in order of highest vote total');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'new':\r\n\t\t\t\t\t\t\tthisEle.setAttribute('title', 'Navigate through new comments (Reddit Gold users only)');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar isGold;\r\n\t\t\t\t\tif (thisCategory === 'new') {\r\n\t\t\t\t\t\tisGold = document.body.querySelector('.gold-accent.comment-visits-box');\r\n\t\t\t\t\t\tif (isGold) {\r\n\t\t\t\t\t\t\tthisEle.setAttribute('style', 'color: #9A7D2E;');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthisEle.classList.add('commentNavSortTypeDisabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (thisCategory !== 'new' || isGold) {\r\n\t\t\t\t\t\tthisEle.addEventListener('click', function(e) {\r\n\t\t\t\t\t\t\tmodule.showNavigator(e.target.getAttribute('index'));\r\n\t\t\t\t\t\t}, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcommentNavToggle.appendChild(thisEle);\r\n\t\t\t\t\tif (i < len - 1) {\r\n\t\t\t\t\t\tvar thisDivider = document.createElement('span');\r\n\t\t\t\t\t\tthisDivider.textContent = ' | ';\r\n\t\t\t\t\t\tcommentNavToggle.appendChild(thisDivider);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcommentArea.appendChild(commentNavToggle, commentArea.firstChild);\r\n\t\t\t\tif (!(this.options.showByDefault.value)) {\r\n\t\t\t\t\tmodule.hideNavigator();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tRESTemplates.load('commentNavigator', function(template) {\r\n\t\t\t\t\tvar navBoxHTML = template.html();\r\n\t\t\t\t\t$(commentNavBox).html(navBoxHTML);\r\n\r\n\t\t\t\t\tnavSelect = commentNavBox.querySelector('#commentNavBy');\r\n\t\t\t\t\tcommentNavPostCount = commentNavBox.querySelector('#commentNavPostCount');\r\n\t\t\t\t\tcommentNavButtons = commentNavBox.querySelector('#commentNavButtons');\r\n\t\t\t\t\tcommentNavBox.querySelector('#commentNavCloseButton').addEventListener('click', function(e) {\r\n\t\t\t\t\t\tmodule.hideNavigator();\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\tcommentNavUp = commentNavBox.querySelector('#commentNavUp');\r\n\t\t\t\t\tcommentNavUp.addEventListener('click', module.moveUp, false);\r\n\t\t\t\t\tcommentNavDown = commentNavBox.querySelector('#commentNavDown');\r\n\t\t\t\t\tcommentNavDown.addEventListener('click', module.moveDown, false);\r\n\t\t\t\t\tnavSelect.addEventListener('change', changeCategory, false);\r\n\r\n\t\t\t\t\tmodules['floater'].addElement(commentNavBox, { separate: true });\r\n\t\t\t\t\twindow.addEventListener('scroll', RESUtils.debounce.bind(RESUtils, 'scroll.commentNavigator', 300, onScroll));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar currentCategory;\r\n\r\n\tfunction onScroll() {\r\n\t\tvar category = currentCategory,\r\n\t\t\ti = 0,\r\n\t\t\theaderOffset = 0,\r\n\t\t\tposts, len, thisXY;\r\n\r\n\t\tif (category) {\r\n\t\t\t// add space for header offset if pinheader is used\r\n\t\t\tif (modules['betteReddit'].options.pinHeader.value === 'sub') {\r\n\t\t\t\theaderOffset += $('#sr-header-area').height() + 8;\r\n\t\t\t} else if (modules['betteReddit'].options.pinHeader.value === 'subanduser') {\r\n\t\t\t\theaderOffset += $('#sr-header-area').height() + 8;\r\n\t\t\t} else if (modules['betteReddit'].options.pinHeader.value === 'header') {\r\n\t\t\t\theaderOffset += $('#header').height() + 8;\r\n\t\t\t}\r\n\t\t\tposts = _posts[category];\r\n\t\t\tlen = posts.length;\r\n\t\t\tfor (; i < len; i++) {\r\n\t\t\t\tthisXY = RESUtils.getXYpos(posts[i]);\r\n\t\t\t\tif (thisXY.y > window.pageYOffset + headerOffset) {\r\n\t\t\t\t\tsetNavIndex(Math.max(i-1, 0));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tfunction changeCategory() {\r\n\t\tvar index = navSelect.selectedIndex;\r\n\t\tif (index === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcurrentCategory = navSelect.options[index].value;\r\n\t\tif (currentCategory !== '') {\r\n\t\t\tmodule.getPostsByCategory();\r\n\t\t\tcommentNavButtons.style.display = 'block';\r\n\t\t} else {\r\n\t\t\tcommentNavButtons.style.display = 'none';\r\n\t\t}\r\n\t\t$('#commentNavBy').blur();\r\n\t}\r\n\r\n\tmodule.showNavigator = function(category) {\r\n\t\tmodule.isOpen = true;\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(false, 'commentNavigator');\r\n\t\tcommentNavBox.style.display = 'block';\r\n\t\tif (typeof category === 'undefined') {\r\n\t\t\tcategory = currentCategory;\r\n\t\t}\r\n\r\n\t\tif (isNaN(category)) {\r\n\t\t\tnavSelect.value = category;\r\n\t\t} else if (typeof category === 'number') {\r\n\t\t\tnavSelect.selectedIndex = category;\r\n\t\t} else if (!isNaN(parseInt(category, 10))) {\r\n\t\t\tnavSelect.selectedIndex = parseInt(category, 10);\r\n\t\t}\r\n\t\t$('#commentNavBy').focus();\r\n\t\tchangeCategory();\r\n\t};\r\n\r\n\tmodule.hideNavigator = function() {\r\n\t\tmodule.isOpen = false;\r\n\t\tcommentNavBox.style.display = 'none';\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(true, 'commentNavigator');\r\n\t};\r\n\r\n\tmodule.getPostsByCategory = function() {\r\n\t\tvar category = currentCategory;\r\n\t\tif ((typeof category !== 'undefined') && (category !== '')) {\r\n\t\t\tif (typeof _posts[category] === 'undefined' || category === 'highlighted') {\r\n\t\t\t\tswitch (category) {\r\n\t\t\t\t\tcase 'submitter':\r\n\t\t\t\t\tcase 'moderator':\r\n\t\t\t\t\tcase 'friend':\r\n\t\t\t\t\tcase 'admin':\r\n\t\t\t\t\t\t_posts[category] = document.querySelectorAll('.noncollapsed a.author.' + category);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'me':\r\n\t\t\t\t\t\tRESUtils.getUserInfo(function(userInfo) {\r\n\t\t\t\t\t\t\tvar myID = 't2_' + userInfo.data.id;\r\n\t\t\t\t\t\t\t_posts[category] = document.querySelectorAll('.noncollapsed a.author.id-' + myID);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'highlighted':\r\n\t\t\t\t\t\tif (modules['userInfo'].highlightedUsers) {\r\n\t\t\t\t\t\t\tvar highlightedUserSelectors = $.map(modules['userInfo'].highlightedUsers, function(element, key) {\r\n\t\t\t\t\t\t\t\treturn '.noncollapsed .author.id-t2_'+key;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar highlightedUserSelector = highlightedUserSelectors.join(', ');\r\n\t\t\t\t\t\t\t_posts[category] = highlightedUserSelector ? document.querySelectorAll(highlightedUserSelector) : [];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_posts[category] = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'gilded':\r\n\t\t\t\t\t\tvar gildedPosts = document.querySelectorAll('.noncollapsed .gilded-icon');\r\n\t\t\t\t\t\t_posts[category] = gildedPosts;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'IAmA':\r\n\t\t\t\t\t\tvar submitterPosts = document.querySelectorAll('.noncollapsed a.author.submitter'),\r\n\t\t\t\t\t\t\ti = 0,\r\n\t\t\t\t\t\t\tlen = submitterPosts.length,\r\n\t\t\t\t\t\t\tparent;\r\n\t\t\t\t\t\t_posts[category] = [];\r\n\t\t\t\t\t\tfor (; i < len; i++) {\r\n\t\t\t\t\t\t\t// get the proper parent post\r\n\t\t\t\t\t\t\tparent = $(submitterPosts[i]).closest('.comment').parent().closest('.comment');\r\n\t\t\t\t\t\t\tif (!parent.length) {\r\n\t\t\t\t\t\t\t\t_posts[category].push(submitterPosts[i].parentNode.parentNode);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_posts[category].push($(parent)[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'images':\r\n\t\t\t\t\t\tvar imagePosts = document.querySelectorAll('.expando-button.image');\r\n\t\t\t\t\t\t_posts[category] = imagePosts;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'videos':\r\n\t\t\t\t\t\tvar videoPosts = document.querySelectorAll('.expando-button.video');\r\n\t\t\t\t\t\t_posts[category] = videoPosts;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'popular':\r\n\t\t\t\t\t\tvar allComments = document.querySelectorAll('.noncollapsed');\r\n\t\t\t\t\t\tvar commentsObj = Array.prototype.slice.call(allComments).map(function(comment) {\r\n\t\t\t\t\t\t\tvar thisScore = comment.querySelector('.score.unvoted');\r\n\t\t\t\t\t\t\tvar score;\r\n\t\t\t\t\t\t\tif (thisScore) {\r\n\t\t\t\t\t\t\t\tvar scoreSplit = thisScore.textContent.split(' ');\r\n\t\t\t\t\t\t\t\tscore = parseInt(scoreSplit[0], 10);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tscore = 0;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tcomment: comment,\r\n\t\t\t\t\t\t\t\tscore: score\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).sort(function(a, b) {\r\n\t\t\t\t\t\t\treturn b.score - a.score;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t_posts[category] = commentsObj.map(function(commentObj) {\r\n\t\t\t\t\t\t\treturn commentObj.comment;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'new':\r\n\t\t\t\t\t\t_posts[category] = document.querySelectorAll('.new-comment');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresetNavigator(category);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction resetNavigator(category) {\r\n\t\t_nav[category] = 0;\r\n\t\tif (_posts[category] && _posts[category].length) {\r\n\t\t\tscrollToNavElement();\r\n\t\t\tcommentNavUp.disabled = false;\r\n\t\t\tcommentNavDown.disabled = false;\r\n\t\t\tcommentNavButtons.classList.remove('noNav');\r\n\t\t} else {\r\n\t\t\tcommentNavPostCount.textContent = 'none';\r\n\t\t\tcommentNavUp.disabled = true;\r\n\t\t\tcommentNavDown.disabled = true;\r\n\t\t\tcommentNavButtons.classList.add('noNav');\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.moveUp = function() {\r\n\t\tvar category = currentCategory;\r\n\t\tif (typeof category === 'undefined') {\r\n\t\t\tmodule.showNavigator();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (_posts[category].length) {\r\n\t\t\tif (_nav[category] > 0) {\r\n\t\t\t\t_nav[category]--;\r\n\t\t\t} else {\r\n\t\t\t\t_nav[category] = _posts[category].length - 1;\r\n\t\t\t}\r\n\t\t\tscrollToNavElement();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.moveDown = function() {\r\n\t\tvar category = currentCategory;\r\n\t\tif (typeof category === 'undefined') {\r\n\t\t\tmodule.showNavigator();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (_posts[category].length) {\r\n\t\t\tif (_nav[category] < _posts[category].length - 1) {\r\n\t\t\t\t_nav[category]++;\r\n\t\t\t} else {\r\n\t\t\t\t_nav[category] = 0;\r\n\t\t\t}\r\n\t\t\tscrollToNavElement();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction setNavIndex(idx) {\r\n\t\tvar category = currentCategory;\r\n\t\t_nav[category] = idx;\r\n\t\t$(commentNavPostCount).text(_nav[category] + 1 + '/' + _posts[category].length);\r\n\t}\r\n\r\n\tfunction scrollToNavElement() {\r\n\t\tvar category = currentCategory,\r\n\t\t\tthisXY;\r\n\t\tsetNavIndex(_nav[category]);\r\n\t\tthisXY = RESUtils.getXYpos(_posts[category][_nav[category]]);\r\n\t\tRESUtils.scrollTo(0, thisXY.y);\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
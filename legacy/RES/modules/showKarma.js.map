{"version":3,"sources":["modules/showKarma.js"],"names":[],"mappings":";;AAAA,UAAU,WAAV,EAAuB,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AACjD,QAAO,UAAP,GAAoB,YAApB,CADiD;AAEjD,QAAO,QAAP,GAAkB,YAAlB,CAFiD;AAGjD,QAAO,WAAP,GAAqB,mFAArB,CAHiD;AAIjD,QAAO,OAAP,GAAiB;AAChB,oBAAkB;AACjB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,8CAAb;GAHD;AAKA,aAAW;AACV,SAAM,MAAN;AACA,UAAO,GAAP;AACA,gBAAa,gDAAb;AACA,aAAU,IAAV;GAJD;AAMA,aAAW;AACV,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,oCAAb;GAHD;EAZD,CAJiD;AAsBjD,QAAO,EAAP,GAAY,YAAW;AACtB,MAAI,IAAC,CAAK,SAAL,EAAD,IAAuB,KAAK,UAAL,EAAvB,EAA2C;AAC9C,OAAI,SAAS,YAAT,EAAJ,EAA6B;AAC5B,QAAI,KAAK,OAAL,CAAa,gBAAb,CAA8B,KAA9B,EAAqC;AACxC,cAAS,WAAT,CAAqB,cAArB,EADwC;KAAzC,MAEO;AACN,uBADM;KAFP;IADD;GADD;EADW,CAtBqC;;AAkCjD,UAAS,cAAT,CAAwB,QAAxB,EAAkC;AACjC,MAAI,WAAW,SAAS,aAAT,CAAuB,iCAAvB,CAAX;MACH,SADD;MACY,YADZ,CADiC;AAGjC,MAAI,QAAJ,EAAc;AACb,eAAY,SAAS,WAAT,CADC;AAEb,YAAS,KAAT,GAAiB,EAAjB,CAFa;AAGb,OAAI,OAAO,SAAS,IAAT,KAAkB,WAAzB,EAAsC;AACzC,gBAAY,SAAS,IAAT,CAAc,UAAd,CAD6B;AAEzC,mBAAe,SAAS,IAAT,CAAc,aAAd,CAF0B;AAGzC,QAAI,OAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,EAAgC;AACnC,iBAAY,YAAY,SAAZ,CAAZ,CADmC;AAEnC,oBAAe,YAAY,YAAZ,CAAf,CAFmC;KAApC,MAGO;AACN,iBAAY,cAAc,SAAd,CAAZ,CADM;KAHP;AAMA,MAAE,QAAF,EAAY,QAAZ,CAAqB,uCAAuC,SAAS,YAAT,EAAvC,GAAiE,eAAjE,GAAmF,SAAnF,GAA+F,OAA/F,GAAyG,OAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,GAAiC,wCAA1I,GAAqL,SAAS,YAAT,EAArL,GAA+M,cAA/M,GAAgO,YAAhO,GAA+O,MAA/O,CAArB,CATyC;IAA1C,MAUO;;IAVP;GAHD;EAHD;;AAsBA,UAAS,eAAT,CAAyB,KAAzB,EAAgC;AAC/B,MAAI,YAAY,SAAS,aAAT,CAAuB,uCAAvB,CAAZ,CAD2B;AAE/B,UAAQ,OAAQ,KAAP,KAAiB,WAAjB,GAAgC,KAAjC,GAAyC,UAAU,WAAV,CAFlB;;AAI/B,MAAI,CAAC,OAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,EAAgC;AACpC,aAAU,WAAV,GAAwB,cAAc,KAAd,CAAxB,CADoC;GAArC;EAJD;;AASA,UAAS,WAAT,CAAqB,KAArB,EAA4B;AAC3B,SAAO,SAAS,aAAT,CAAuB,oBAAvB,CAA4C,KAA5C,CAAP,CAD2B;EAA5B;;AAIA,UAAS,aAAT,CAAuB,KAAvB,EAA8B;AAC7B,UAAQ,SAAS,CAAT,CADqB;AAE7B,UAAQ,CAAC,QAAQ,EAAR,CAAD,CAAa,KAAb,CAAmB,QAAnB,CAAR,CAF6B;AAG7B,UAAQ,CAAC,SAAS,KAAT,CAAD,CAAiB,IAAjB,CAAsB,EAAtB,KAA6B,CAA7B,CAHqB;AAI7B,SAAO,KAAP,CAJ6B;EAA9B;CArEsB,CAAvB","file":"modules/showKarma.js","sourcesContent":["addModule('showKarma', function(module, moduleID) {\r\n\tmodule.moduleName = 'Show Karma';\r\n\tmodule.category = 'My account';\r\n\tmodule.description = 'Add more info and tweaks to the karma next to your username in the user menu bar.';\r\n\tmodule.options = {\r\n\t\tshowCommentKarma: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Show comment karma in addition to link karma'\r\n\t\t},\r\n\t\tseparator: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: '\\u00b7',\r\n\t\t\tdescription: 'Separator character between post/comment karma',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tuseCommas: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Use commas for large karma numbers'\r\n\t\t}\r\n\t};\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tif (RESUtils.loggedInUser()) {\r\n\t\t\t\tif (this.options.showCommentKarma.value) {\r\n\t\t\t\t\tRESUtils.getUserInfo(updateKarmaDiv);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tformatLinkKarma();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction updateKarmaDiv(userInfo) {\r\n\t\tvar karmaDiv = document.querySelector('#header-bottom-right .userkarma'),\r\n\t\t\tlinkKarma, commentKarma;\r\n\t\tif (karmaDiv) {\r\n\t\t\tlinkKarma = karmaDiv.textContent;\r\n\t\t\tkarmaDiv.title = '';\r\n\t\t\tif (typeof userInfo.data !== 'undefined') {\r\n\t\t\t\tlinkKarma = userInfo.data.link_karma;\r\n\t\t\t\tcommentKarma = userInfo.data.comment_karma;\r\n\t\t\t\tif (module.options.useCommas.value) {\r\n\t\t\t\t\tlinkKarma = commaNumber(linkKarma);\r\n\t\t\t\t\tcommentKarma = commaNumber(commentKarma);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlinkKarma = uncommaNumber(linkKarma);\r\n\t\t\t\t}\r\n\t\t\t\t$(karmaDiv).safeHtml('<a title=\"link karma\" href=\"/user/' + RESUtils.loggedInUser() + '/submitted/\">' + linkKarma + '</a> ' + module.options.separator.value + ' <a title=\"comment karma\" href=\"/user/' + RESUtils.loggedInUser() + '/comments/\">' + commentKarma + '</a>');\r\n\t\t\t} else {\r\n\t\t\t\t// User has been shadowbanned\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction formatLinkKarma(value) {\r\n\t\tvar container = document.querySelector('#header-bottom-right .user .userkarma');\r\n\t\tvalue = (typeof value !== 'undefined') ? value : container.textContent;\r\n\r\n\t\tif (!module.options.useCommas.value) {\r\n\t\t\tcontainer.textContent = uncommaNumber(value);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction commaNumber(value) {\r\n\t\treturn RESUtils.createElement.commaDelimitedNumber(value);\r\n\t}\r\n\r\n\tfunction uncommaNumber(value) {\r\n\t\tvalue = value || 0;\r\n\t\tvalue = (value + '').match(/(\\w+)/g);\r\n\t\tvalue = (value && value).join('') || 0;\r\n\t\treturn value;\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
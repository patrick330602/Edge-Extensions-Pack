{"version":3,"sources":["modules/settingsNavigation.js"],"names":[],"mappings":"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","file":"modules/settingsNavigation.js","sourcesContent":["addModule('settingsNavigation', function(module, moduleId) {\r\n\tmodule.moduleName = 'RES Settings Navigation';\r\n\tmodule.category = 'Core';\r\n\tmodule.description = 'Helping you get around the RES Settings Console with greater ease';\r\n\tmodule.hidden = true;\r\n\tmodule.alwaysEnabled = true;\r\n\tmodule.options = {\r\n\t\tshowAllOptions: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'All options are displayed by default. Uncheck this box if you would like to hide advanced options.',\r\n\t\t\tnoconfig: true\r\n\t\t},\r\n\t\tshowAllOptionsAlert: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'If a user clicks on a link to an advanced option while advanced options are hidden, should an alert be shown?',\r\n\t\t\tnoconfig: true\r\n\t\t}\r\n\t};\r\n\tmodule.go = function() {\r\n\t\tif (!(this.isEnabled() && this.isMatchURL())) return;\r\n\r\n\t\twindow.addEventListener('hashchange', onHashChange);\r\n\t\twindow.addEventListener('popstate', onPopState);\r\n\t\tsetTimeout(onHashChange, 300); // for initial pageload; wait until after RES has completed loading\r\n\r\n\t\t// consoleTip();\r\n\t};\r\n\r\n\t/*function consoleTip() {\r\n\t\t// first, ensure that we've at least run dailyTip once (so RES first-run has happened)...\r\n\t\tvar lastToolTip = RESStorage.getItem('RESLastToolTip');\r\n\t\tif (lastToolTip) {\r\n\t\t\t// if yes, see if the user has ever opened the settings console.\r\n\t\t\tvar hasOpenedConsole = RESStorage.getItem('RESConsole.hasOpenedConsole');\r\n\t\t\tif (!hasOpenedConsole) {\r\n\t\t\t\t// if no, nag them once daily that the console exists until they use it.  Once it's been opened, this check will never run again.\r\n\t\t\t\tvar lastCheckDailyTip = parseInt(RESStorage.getItem('RESLastToolTip'), 10) || 0;\r\n\t\t\t\tvar now = Date.now();\r\n\t\t\t\t// 86400000 = 1 day - remind users once a day if they've never opened the settings that they should check out the console sometime...\r\n\t\t\t\tvar lastCheck = parseInt(RESStorage.getItem('RESConsole.hasOpenedCheck'), 10) || 0;\r\n\t\t\t\tif (((now - lastCheckDailyTip) > 1000) && ((now - lastCheck) > 86400000)) {\r\n\t\t\t\t\tRESStorage.setItem('RESConsole.hasOpenedCheck', now);\r\n\t\t\t\t\tmodules['RESTips'].showTip(0, 'console');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}*/\r\n\r\n\tmodule.makeUrlHashLink = function(moduleID, optionKey, displayText, cssClass) {\r\n\t\tif (!displayText) {\r\n\t\t\tif (optionKey) {\r\n\t\t\t\tdisplayText = optionKey;\r\n\t\t\t} else if (modules[moduleID]) {\r\n\t\t\t\tdisplayText = modules[moduleID].moduleName;\r\n\t\t\t} else if (moduleID) {\r\n\t\t\t\tdisplayText = moduleID;\r\n\t\t\t} else {\r\n\t\t\t\tdisplayText = 'Settings';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hash = modules['settingsNavigation'].makeUrlHash(moduleID, optionKey);\r\n\t\tvar link = ['<a ', 'class=\"', cssClass || '', '\" ', 'href=\"', hash, '\"', '>', displayText, '</a>'].join('');\r\n\t\treturn link;\r\n\t};\r\n\r\n\tmodule.makeUrlHash = function(moduleID, optionKey) {\r\n\t\tvar hashComponents = ['#!settings'];\r\n\r\n\t\tif (moduleID) {\r\n\t\t\thashComponents.push(moduleID);\r\n\t\t}\r\n\r\n\t\tif (moduleID && optionKey) {\r\n\t\t\thashComponents.push(optionKey);\r\n\t\t}\r\n\r\n\t\tvar hash = hashComponents.join('/');\r\n\t\treturn hash;\r\n\t};\r\n\r\n\tmodule.setUrlHash = function(moduleID, optionKey) {\r\n\t\tvar titleComponents = ['RES Settings'];\r\n\r\n\t\tif (moduleID) {\r\n\t\t\tvar module = modules[moduleID];\r\n\t\t\tvar moduleName = module && module.moduleName || moduleID;\r\n\t\t\ttitleComponents.push(moduleName);\r\n\r\n\t\t\tif (optionKey) {\r\n\t\t\t\ttitleComponents.push(optionKey);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar hash = this.makeUrlHash(moduleID, optionKey);\r\n\t\tvar title = titleComponents.join(' - ');\r\n\r\n\t\tif (location.hash != hash) {\r\n\t\t\thistory.pushState(hash, title, hash);\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.resetUrlHash = function() {\r\n\t\thistory.pushState('', document.title, location.pathname + location.search);\r\n\t};\r\n\r\n\tfunction onHashChange(event) {\r\n\t\tvar hash = location.hash, moduleID, optionKey;\r\n\t\tif (hash.substring(0, 10) !== '#!settings') return;\r\n\r\n\t\tvar params = hash.match(/\\/(?:\\w|\\s|%20)+/g);\r\n\t\tif (params && params[0]) {\r\n\t\t\tmoduleID = params[0].substring(1).replace('%20', ' ');\r\n\t\t}\r\n\t\tif (params && params[1]) {\r\n\t\t\toptionKey = params[1].substring(1).replace('%20', ' ');\r\n\t\t}\r\n\r\n\t\tmodules['settingsNavigation'].loadSettingsPage(moduleID, optionKey);\r\n\t}\r\n\r\n\tfunction onPopState(event) {\r\n\t\tvar state = typeof event.state === 'string' && event.state.split('/');\r\n\t\tif (!state || state[0] !== '#!settings') {\r\n\t\t\tif (modules['settingsConsole'].isOpen) {\r\n\t\t\t\t// Avoid adding a duplicate page to the browser history\r\n\t\t\t\tvar resetUrl = false;\r\n\t\t\t\tmodules['settingsConsole'].close({\r\n\t\t\t\t\tresetUrl: resetUrl\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar moduleID = state[1];\r\n\t\tvar optionKey = state[2];\r\n\r\n\t\tmodules['settingsNavigation'].loadSettingsPage(moduleID, optionKey);\r\n\t}\r\n\r\n\tmodule.loadSettingsPage = function(moduleID, optionKey, optionValue) {\r\n\t\tvar module, category;\r\n\t\tif (moduleID && modules.hasOwnProperty(moduleID)) {\r\n\t\t\tmodule = modules[moduleID];\r\n\t\t}\r\n\t\tif (module) {\r\n\t\t\tcategory = [].concat(module.category)[0];\r\n\t\t}\r\n\r\n\t\tmodules['settingsConsole'].open(module && module.moduleID);\r\n\t\tif (moduleID == 'search') {\r\n\t\t\tmodules['search'].search(optionKey);\r\n\t\t} else if (module) {\r\n\t\t\tif (optionKey && module.options.hasOwnProperty(optionKey)) {\r\n\t\t\t\tvar optionsPanel = $(modules['settingsConsole'].RESConsoleContent);\r\n\t\t\t\tvar optionElement = optionsPanel.find('label[for=\"' + optionKey + '\"]');\r\n\t\t\t\tvar optionParent = optionElement.parent();\r\n\t\t\t\toptionParent.addClass('highlight');\r\n\t\t\t\toptionParent.show();\r\n\t\t\t\tif (optionElement.length) {\r\n\t\t\t\t\tif (optionParent.hasClass('advanced') && !modules['settingsNavigation'].options.showAllOptions.value) {\r\n\t\t\t\t\t\tdocument.getElementById('RESConsoleContent').classList.remove('advanced-options-disabled');\r\n\t\t\t\t\t\tif (modules['settingsNavigation'].options.showAllOptionsAlert.value) {\r\n\t\t\t\t\t\t\talert('You opened a link to an advanced option, but not all options are shown. These options will be shown until you leave or refresh the page. If you want to see all options in the future, check the <i>Show all options</i> checkbox in the settings console title bar above.<br /><br /><label><input type=\"checkbox\" class=\"disableAlert\" checked=\"\" style=\"margin:1px 5px 0px 0px;\"> Always show this type of notification</label>');\r\n\t\t\t\t\t\t\t$('#alert_message .disableAlert').click(function(){\r\n\t\t\t\t\t\t\t\tRESUtils.options.setOption('settingsNavigation', 'showAllOptionsAlert', this.checked);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar configPanel = $(modules['settingsConsole'].RESConfigPanelOptions);\r\n\t\t\t\t\tvar offset = optionElement.offset().top - configPanel.offset().top - 10;\r\n\t\t\t\t\tconfigPanel.scrollTop(offset);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\r\n\r\n\r\n\r\naddModule('search', function(module, moduleID) {\r\n\tmodule.moduleName = 'Search RES Settings';\r\n\tmodule.category = 'About RES';\r\n\tmodule.alwaysEnabled = true;\r\n\tmodule.sort = -9;\r\n\r\n\tvar menuItem;\r\n\r\n\tmodule.beforeLoad = function() {\r\n\t\tRESTemplates.load('searchRESPanel', function(template) {\r\n\t\t\tmodule.description = template.html();\r\n\t\t});\r\n\t};\r\n\r\n\tmodule.go = function() {\r\n\t\tmenuItem = RESUtils.createElement('span', 'RESSearchMenuItem', 'RESMenuItemButton res-icon', '\\uF094');\r\n\t\tmenuItem.setAttribute('title', 'search settings');\r\n\t\tmenuItem.addEventListener('click', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\tshowSearch();\r\n\t\t}, false);\r\n\t\tmodules['settingsConsole'].menuItem.appendChild(menuItem);\r\n\r\n\t\tmodules['commandLine'].registerCommand(/^set(?:t?ings?)?$/, 'settings [words to search for]- search RES settings console',\r\n\t\t\tfunction(command, val) {\r\n\t\t\t\tvar str = 'Search RES settings';\r\n\t\t\t\tif (val && val.length) {\r\n\t\t\t\t\tstr += ' for: ' + val;\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t},\r\n\t\t\tfunction(command, val, match, e) {\r\n\t\t\t\tmodule.search(val);\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tmodule.search = function(query) {\r\n\t\tdrawSearchResults(query);\r\n\t\tgetSearchResults(query);\r\n\t\tmodules['settingsNavigation'].setUrlHash('search', query);\r\n\t};\r\n\r\n\tmodule.PRESERVE_SPACES = true;\r\n\r\n\tfunction showSearch() {\r\n\t\tmodules['RESMenu'].hidePrefsDropdown();\r\n\t\tdrawSearchResults();\r\n\t\t$('#SearchRES-input').focus();\r\n\t}\r\n\r\n\tfunction doneSearch(query, results) {\r\n\t\tdrawSearchResults(query, results);\r\n\t}\r\n\r\n\tfunction getSearchResults(query) {\r\n\t\tif (!query || !query.toString().length) {\r\n\t\t\tdoneSearch(query, []);\r\n\t\t}\r\n\r\n\t\tvar sanitizedQuery = sanitizeString(query, module.PRESERVE_SPACES);\r\n\t\tvar queryTerms = sanitizedQuery && sanitizedQuery.length ? sanitizedQuery.split(' ') : [];\r\n\t\tvar results = [];\r\n\r\n\t\t// Search options\r\n\t\tif (queryTerms && queryTerms.length) {\r\n\t\t\tresults = searchDomain();\r\n\r\n\t\t\tresults = results.map(function(item) {\r\n\t\t\t\titem.rank = item.getRank.apply(item, [queryTerms].concat(item.context));\r\n\t\t\t\treturn item;\r\n\t\t\t}).filter(function(item) {\r\n\t\t\t\treturn item && item.rank !== false && item.rank !== Infinity;\r\n\t\t\t}).sort(function(a, b) {\r\n\t\t\t\treturn b.rank - a.rank;\r\n\t\t\t}).map(function(item) {\r\n\t\t\t\treturn item.format.apply(item, item.context);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdoneSearch(query, results);\r\n\r\n\t}\r\n\r\n\tfunction searchDomain() {\r\n\t\tvar results = [];\r\n\t\tfor (var moduleID in modules) {\r\n\t\t\tif (!modules.hasOwnProperty(moduleID)) continue;\r\n\t\t\tif (moduleID == module.moduleID) continue;\r\n\t\t\tvar mod = modules[moduleID];\r\n\t\t\tif (mod.hidden) continue;\r\n\r\n\t\t\tresults.push({ context: [moduleID], getRank: rankModule, format: makeModuleSearchResult });\r\n\r\n\t\t\tvar options = mod.options;\r\n\r\n\t\t\tfor (var optionKey in options) {\r\n\t\t\t\tif (!options.hasOwnProperty(optionKey)) continue;\r\n\t\t\t\tvar option = options[optionKey];\r\n\t\t\t\tif (option.noconfig) continue;\r\n\r\n\t\t\t\tresults.push({ context: [moduleID, optionKey], getRank: rankOption, format: makeOptionSearchResult });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tfunction rankString(queryTerms, string) {\r\n\t\tif (!queryTerms || !queryTerms.length || !string) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar indexes = indexesOfSearchTermsInString(queryTerms, sanitizeString(string, false));\r\n\t\tvar weighted = indexes.map(function(item) {\r\n\t\t\t// Better score: lower value and lower matchedIndex\r\n\t\t\treturn 100 - (item.value * ( ( Math.log(item.matchedIndex + 1) / Math.log(5) ) + 1 ) );\r\n\t\t});\r\n\t\tvar reduced = weighted.length ?\r\n\t\t\tweighted.reduce(function(a, b) {\r\n\t\t\t\treturn a + b;\r\n\t\t\t}, 0) :\r\n\t\t\tInfinity;\r\n\t\treturn reduced;\r\n\t}\r\n\r\n\tfunction rankModule(queryTerms, moduleID) {\r\n\t\tvar mod = modules[moduleID],\r\n\t\t\tstring = mod.moduleID + mod.moduleName + [].concat(mod.category).join('') + mod.description;\r\n\t\treturn rankString(queryTerms, string) * 0.9;\r\n\t}\r\n\r\n\tfunction rankOption(queryTerms, moduleID, optionKey) {\r\n\t\tvar mod = modules[moduleID],\r\n\t\t\toption = mod.options[optionKey],\r\n\t\t\tstring = optionKey + mod.moduleID + mod.moduleName + [].concat(mod.category).join('') + option.description;\r\n\t\treturn rankString(queryTerms, string);\r\n\t}\r\n\r\n\tfunction indexesOfSearchTermsInString(needles, haystack) {\r\n\t\tvar matches;\r\n\t\tif (!haystack || !haystack.length)\r\n\t\t\treturn false;\r\n\r\n\t\tmatches = needles.filter(function(needle) {\r\n\t\t\treturn haystack.indexOf(needle) !== -1;\r\n\t\t}).map(function(needle, i) {\r\n\t\t\treturn {\r\n\t\t\t\tmatchedIndex: i,\r\n\t\t\t\tvalue: haystack.indexOf(needle)\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn matches;\r\n\t}\r\n\r\n\tfunction sanitizeString(text, preserveSpaces) {\r\n\t\tif (text === undefined || text === null) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tvar replaceSpacesWith = preserveSpaces ? ' ' : '';\r\n\t\treturn text.toString().toLowerCase()\r\n\t\t\t.replace(/[,\\/\\s]+/g, replaceSpacesWith);\r\n\t}\r\n\r\n\tfunction makeOptionSearchResult(moduleKey, optionKey) {\r\n\t\tvar mod = modules[moduleKey];\r\n\t\tvar option = mod.options[optionKey];\r\n\r\n\t\tvar result = {};\r\n\t\tresult.type = 'option';\r\n\t\tresult.breadcrumb = ['RES settings console',\r\n\t\t\t[].concat(mod.category)[0],\r\n\t\t\tmod.moduleName + ' (' + mod.moduleID + ')'\r\n\t\t].join(' > ');\r\n\t\tresult.title = optionKey;\r\n\t\tresult.description = (option.description || '').replace(/<(?:br|p|div|span)>/g, '\\n').split('\\n')[0];\r\n\t\tresult.advanced = option.advanced;\r\n\t\tresult.category = [].concat(mod.category)[0];\r\n\t\tresult.moduleName = mod.moduleName;\r\n\t\tresult.moduleID = moduleKey;\r\n\t\tresult.optionKey = optionKey;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction makeModuleSearchResult(moduleKey) {\r\n\t\tvar mod = modules[moduleKey];\r\n\r\n\t\tvar result = {};\r\n\t\tresult.type = 'module';\r\n\t\tresult.breadcrumb = ['RES settings console',\r\n\t\t\t[].concat(mod.category)[0],\r\n\t\t\t'(' + mod.moduleID + ')'\r\n\t\t].join(' > ');\r\n\t\tresult.title = mod.moduleName;\r\n\t\tresult.moduleName = mod.moduleName;\r\n\t\tresult.description = mod.description;\r\n\t\tresult.category = [].concat(mod.category)[0];\r\n\t\tresult.moduleID = moduleKey;\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction onSearchResultSelected(result) {\r\n\t\tif (!result) return;\r\n\r\n\t\tswitch (result.type) {\r\n\t\t\tcase 'module':\r\n\t\t\t\tmodules['settingsNavigation'].loadSettingsPage(result.moduleID);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'option':\r\n\t\t\t\tmodules['settingsNavigation'].loadSettingsPage(result.moduleID, result.optionKey);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\talert('Could not load search result');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// ---------- View ------\r\n\tmodule.renderSearchForm = function(container) {\r\n\t\tRESTemplates.load('settingsConsoleSearch', function(template) {\r\n\t\t\t$(container).find('#SearchRES-input-container').replaceWith(template.html());\r\n\t\t});\r\n\r\n\t\t$(container).on('submit', '#SearchRES-input-container', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar RESSearchBox = container.querySelector('#SearchRES-input');\r\n\t\t\tmodule.search(RESSearchBox.value);\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\t};\r\n\r\n\tfunction drawSearchResultsPage() {\r\n\t\tmodules['settingsConsole'].open('search');\r\n\t}\r\n\r\n\tfunction drawSearchResults(query, results) {\r\n\t\tdrawSearchResultsPage();\r\n\r\n\t\tvar resultsContainer = $('#SearchRES-results-container');\r\n\t\tresultsContainer.off('click', handleSearchResultClick)\r\n\t\t\t.on('click', '.SearchRES-result-item', handleSearchResultClick);\r\n\r\n\t\tif (!query || !query.length) {\r\n\t\t\tresultsContainer.hide();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar count = 0, advancedResults = 0;\r\n\t\tif (results) {\r\n\t\t\tresults.forEach(function(result) {\r\n\t\t\t\tif (result.advanced) {\r\n\t\t\t\t\tadvancedResults++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// display number of results.\r\n\t\tvar plural = (count !== 1 ? 's' : '');\r\n\t\tvar resultsMessage = count + ' result' + plural + ' for ' + query;\r\n\t\t$('#SearchRES-count').text(resultsMessage);\r\n\r\n\t\tresultsContainer.show();\r\n\t\tresultsContainer.find('#SearchRES-query').text(query);\r\n\t\t$('#SearchRES-input', module.searchForm).val(query);\r\n\r\n\t\tif (advancedResults) {\r\n\t\t\tresultsContainer.find('#SearchRES-results-hidden').addClass('advancedResults');\r\n\t\t\t$('#SearchRES-results-hidden a').off('click').on('click', function(e) {\r\n\t\t\t\t$(document.getElementById('RESAllOptions')).click();\r\n\t\t\t\tgetSearchResults(query);\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tresultsContainer.find('#SearchRES-results-hidden').removeClass('advancedResults');\r\n\t\t}\r\n\t\tif (!results || !results.length) {\r\n\t\t\tresultsContainer.find('#SearchRES-results').hide();\r\n\t\t} else {\r\n\t\t\tvar resultsList = $('#SearchRES-results', resultsContainer).show();\r\n\r\n\t\t\tresultsList.empty();\r\n\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\tvar result = results[i];\r\n\r\n\t\t\t\tvar element = drawSearchResultItem(result);\r\n\t\t\t\tresultsList.append(element);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction drawSearchResultItem(result) {\r\n\t\tvar element = $('<li>');\r\n\t\telement.addClass('SearchRES-result-item')\r\n\t\t\t.toggleClass('advanced', !!result.advanced)\r\n\t\t\t.data('SearchRES-result', result);\r\n\r\n\r\n\t\t$('<span>', {\r\n\t\t\tclass: 'SearchRES-result-copybutton res-icon'\r\n\t\t}).html('&#xF159')\r\n\t\t\t.appendTo(element)\r\n\t\t\t.attr('title', 'copy this for a comment');\r\n\r\n\t\tRESTemplates.load('searchResultOptionHtml', function(template) {\r\n\t\t\tvar details = template.html(result);\r\n\t\t\telement.append(details);\r\n\t\t});\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction handleSearchResultClick(e) {\r\n\t\tvar element = $(this);\r\n\t\tvar result = element.data('SearchRES-result');\r\n\t\tif ($(e.target).is('.SearchRES-result-copybutton')) {\r\n\t\t\tonSearchResultCopy(result, element);\r\n\t\t} else {\r\n\t\t\tonSearchResultSelected(result);\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t}\r\n\r\n\tfunction onSearchResultCopy(result, element) {\r\n\t\tvar markdown = makeOptionSearchResultLink(result);\r\n\t\talert('<textarea rows=\"5\" cols=\"50\">' + markdown + '</textarea>' + '<p>Copy and paste this into your comment</p>');\r\n\t}\r\n\r\n\tfunction makeOptionSearchResultLink(result) {\r\n\t\tvar baseUrl = document.location.protocol + '//' + document.location.host + document.location.pathname,\r\n\t\t\tcontext;\r\n\r\n\t\tcontext = $.extend(true, {}, result);\r\n\t\t$.extend(context, {\r\n\t\t\turl: baseUrl + modules['settingsNavigation'].makeUrlHash(result.moduleID, result.optionKey),\r\n\t\t\tsettingsUrl: baseUrl + modules['settingsNavigation'].makeUrlHash(),\r\n\t\t\tmoduleUrl: baseUrl + modules['settingsNavigation'].makeUrlHash(result.moduleID),\r\n\t\t\toptionUrl: baseUrl + modules['settingsNavigation'].makeUrlHash(result.moduleID, result.optionKey)\r\n\t\t});\r\n\r\n\t\tresult = RESTemplates.getSync('optionLinkSnudown').text(context);\r\n\t\tresult = $.trim(result) + '\\n\\n\\n';\r\n\t\treturn result;\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
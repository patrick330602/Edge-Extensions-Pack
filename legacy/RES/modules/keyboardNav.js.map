{"version":3,"sources":["modules/keyboardNav.js"],"names":[],"mappings":";;AAAA,UAAU,aAAV,EAAyB,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AACnD,QAAO,UAAP,GAAoB,qBAApB,CADmD;AAEnD,QAAO,QAAP,GAAkB,CAAE,UAAF,CAAlB,CAFmD;AAGnD,QAAO,WAAP,GAAqB,iCAArB,CAHmD;AAInD,QAAO,OAAP,GAAiB;AAChB,mBAAiB;AAChB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,4GAAb;GAHD;AAKA,mBAAiB;AAChB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,kFAAb;AACA,aAAU,IAAV;GAJD;AAMA,eAAa;AACZ,SAAM,MAAN;AACA,WAAQ,CAAC;AACR,UAAM,aAAN;AACA,WAAO,aAAP;IAFO,EAGL;AACF,UAAM,cAAN;AACA,WAAO,MAAP;IALO,EAML;AACF,UAAM,aAAN;AACA,WAAO,KAAP;IARO,CAAR;AAUA,UAAO,aAAP;AACA,gBAAa,gFACZ,kGADY,GAEZ,mFAFY,GAGZ,8EAHY;AAIb,aAAU,IAAV;GAjBD;AAmBA,uBAAqB;AACpB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,gEAAb;GAHD;AAKA,8BAA4B;AAC3B,SAAM,MAAN;AACA,WAAQ,CAAC;AACR,UAAM,gBAAN;AACA,WAAO,OAAP;IAFO,EAGL;AACF,UAAM,eAAN;AACA,WAAO,MAAP;IALO,CAAR;AAOA,UAAO,OAAP;AACA,gBAAa,8CAAb;AACA,aAAU,IAAV;GAXD;AAaA,sBAAoB;AACnB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,oCAAb;AACA,aAAU,IAAV;GAJD;AAMA,kBAAgB;AACf,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,yDAAb;AACA,aAAU,IAAV;GAJD;AAMA,kBAAgB;AACf,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,4DAAb;AACA,aAAU,IAAV;GAJD;AAMA,yBAAuB;AACtB,SAAM,SAAN;AACA,UAAO,KAAP;AACA,gBAAa,kEAAb;AACA,aAAU,IAAV;GAJD;AAMA,aAAW;AACV,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,iFAAb;GAHD;AAKA,yBAAuB;AACtB,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,mDAAb;AACA,aAAU,IAAV;GAJD;EA9ED,CAJmD;;AA0FnD,KAAI,WAAW;AACd,cAAY;AACX,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,IAApB,CAAP;AACA,gBAAa,kCAAb;GAFD;AAIA,UAAQ;AACP,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,oEAAb;GAFD;AAIA,iBAAe;AACd,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,yBAAb;AACA,aAAU,oBAAW;AAAE,YAAQ,aAAR,EAAuB,aAAvB,GAAF;IAAX;GAHX;AAKA,QAAM;AACL,YAAS,CAAE,UAAF,EAAc,SAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,WAAb;GAHD;AAKA,UAAQ;AACP,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,uDAAb;GAHD;AAKA,YAAU;AACT,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,qDAAb;GAHD;AAKA,iBAAe;AACd,YAAS,CAAE,UAAF,EAAc,OAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,2DAAb;GAHD;AAKA,mBAAiB;AAChB,YAAS,CAAE,UAAF,EAAc,OAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,yDAAb;GAHD;AAKA,WAAS;AACR,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,OAAzB,EAAkC,QAAlC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,qCAAb;GAHD;AAKA,cAAY;AACX,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,OAAzB,EAAkC,QAAlC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,wCAAb;GAHD;AAKA,iBAAe;AACd,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,uFAAb;GAHD;AAKA,mBAAiB;AAChB,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,+EAAb;GAHD;AAKA,gBAAc;AACb,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,IAAL,EAAW,KAAX,EAAkB,IAAlB,CAAP;AACA,gBAAa,mEAAb;GAHD;AAKA,kBAAgB;AACf,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,IAAL,EAAW,KAAX,EAAkB,IAAlB,CAAP;AACA,gBAAa,+DAAb;GAHD;AAKA,oBAAkB;AACjB,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,kEAAb;GAHD;AAKA,gBAAc;AACb,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,+BAAb;GAHD;AAKA,eAAa;AACZ,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,0BAAb;GAHD;AAKA,cAAY;AACX,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,oEAAb;GAHD;AAKA,oBAAkB;AACjB,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,EAAsC,QAAtC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,0CAAb;AACA,aAAU,oBAAW;AACpB,QAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADgB;AAEpB,QAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,QAAI,CAAC,SAAS,UAAT,CAAoB,UAApB,CAAD,IAAoC,SAAS,KAAT,CAAe,SAAf,CAAyB,QAAzB,CAAkC,MAAlC,CAApC,EAA+E;AAClF,YAAO,UAAP,CAAkB,IAAlB,EADkF;KAAnF;IAJS;GAJX;AAaA,iBAAe;AACd,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,qDAAb;AACA,aAAU,oBAAW;AACpB,QAAI,SAAS,UAAT,CAAoB,UAApB,CAAJ,EAAqC;AACpC,yBADoC;KAArC,MAEO;AACN,YAAO,aAAP,GADM;KAFP;IADS;GAHX;AAWA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,4DAAb;GAFD;AAIA,iBAAe;AACd,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,4DAAb;GAFD;AAIA,mBAAiB;AAChB,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,IAApB,CAAP;AACA,gBAAa,4EAAb;AACA,aAAU,oBAAW;AAAE,WAAO,WAAP,CAAmB,IAAnB,EAAF;IAAX;GAHX;AAKA,qBAAmB;AAClB,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,IAApB,CAAP;AACA,gBAAa,4EAAb;AACA,aAAU,oBAAW;AAAE,WAAO,aAAP,CAAqB,IAArB,EAAF;IAAX;GAHX;AAKA,eAAa;AACZ,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,CAAP;AACA,gBAAa,mDAAb;GAFD;AAIA,iBAAe;AACd,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,CAAP;AACA,gBAAa,qDAAb;GAFD;AAIA,iBAAe;AACd,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,CAAP;AACA,gBAAa,qDAAb;GAFD;AAIA,kBAAgB;AACf,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,IAAZ,EAAkB,KAAlB,CAAP;AACA,gBAAa,sDAAb;GAFD;AAIA,wBAAsB;AACrB,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,+CAAb;GAFD;AAIA,oBAAkB;AACjB,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,2CAAb;GAFD;AAIA,oBAAkB;AACjB,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,6BAAb;GAFD;AAIA,kBAAgB;AACf,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,gDAAb;GAHD;AAKA,kBAAgB;AACf,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,wDAAb;GAHD;AAKA,wBAAsB;AACrB,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,qCAAb;AACA,aAAU,oBAAW;AAAE,WAAO,cAAP,CAAsB,IAAtB,EAAF;IAAX;GAJX;AAMA,+BAA6B;AAC5B,YAAS,CAAE,UAAF,EAAc,SAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,oCAAb;AACA,aAAU,oBAAW;AAAE,4BAAF;IAAX;GAJX;AAMA,iCAA+B;AAC9B,YAAS,CAAE,UAAF,EAAc,SAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,+CAAb;AACA,aAAU,oBAAW;AAAE,0BAAsB,IAAtB,EAAF;IAAX;GAJX;AAMA,UAAQ;AACP,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,EAAqC,sBAArC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,wDAAb;GAHD;AAKA,YAAU;AACT,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,EAAqC,sBAArC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,4DAAb;GAHD;AAKA,yBAAuB;AACtB,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,EAAqC,sBAArC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,gEAAb;AACA,aAAU,oBAAW;AAAE,WAAO,MAAP,CAAc,IAAd,EAAF;IAAX;GAJX;AAMA,2BAAyB;AACxB,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,EAAqC,sBAArC,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,oEAAb;AACA,aAAU,oBAAW;AAAE,WAAO,QAAP,CAAgB,IAAhB,EAAF;IAAX;GAJX;AAMA,YAAU;AACT,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,UAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,4KAAb;AACA,aAAU,oBAAW;AAAE,WAAO,QAAP,GAAF;IAAX;GAJX;AAMA,eAAa;AACZ,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,+KAAb;GAHD;AAKA,WAAS;AACR,YAAS,CAAE,UAAF,EAAc,SAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,oHAAb;AACA,aAAU,oBAAW;AAAE,WAAO,cAAP,GAAF;IAAX;GAJX;AAMA,SAAO;AACN,YAAS,CAAE,UAAF,EAAc,OAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,+CAAb;GAHD;AAKA,mBAAiB;AAChB,YAAS,CAAE,UAAF,EAAc,OAAd,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,4DAAb;GAHD;AAKA,yBAAuB;AACtB,YAAS,CAAE,UAAF,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,yEAAb;AACA,aAAU,oBAAW;AAAE,WAAO,eAAP,CAAuB,IAAvB,EAAF;IAAX;GAJX;AAMA,mBAAiB;AAChB,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,oDAAb;GAHD;AAKA,yBAAuB;AACtB,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,QAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,iEAAb;AACA,aAAU,oBAAW;AAAE,WAAO,eAAP,CAAuB,IAAvB,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,aAAb;AACA,cAAW,QAAX;GAHD;AAKA,eAAa;AACZ,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,0BAAb;AACA,cAAW,QAAX;AACA,aAAU,oBAAW;AAAE,WAAO,KAAP,CAAa,IAAb,EAAF;IAAX;GAJX;AAMA,WAAS;AACR,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,eAAb;AACA,cAAW,QAAX;GAHD;AAKA,iBAAe;AACd,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,4BAAb;AACA,cAAW,QAAX;AACA,aAAU,oBAAW;AAAE,WAAO,OAAP,CAAe,IAAf,EAAF;IAAX;GAJX;AAMA,WAAS;AACR,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,eAAb;AACA,cAAW,QAAX;GAHD;AAKA,iBAAe;AACd,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,4BAAb;AACA,cAAW,QAAX;AACA,aAAU,oBAAW;AAAE,WAAO,OAAP,CAAe,IAAf,EAAF;IAAX;GAJX;AAMA,aAAW;AACV,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,kBAAb;AACA,cAAW,QAAX;GAHD;AAKA,sBAAoB;AACnB,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,4BAAb;AACA,cAAW,QAAX;AACA,aAAU,oBAAW;AAAE,WAAO,SAAP,CAAiB,IAAjB,EAAF;IAAX;GAJX;AAMA,UAAQ;AACP,UAAO,CAAC,EAAD,EAAK,IAAL,EAAW,KAAX,EAAkB,KAAlB,CAAP;AACA,gBAAa,0BAAb;AACA,cAAW,QAAX;GAHD;AAKA,YAAU;AACT,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,OAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,wCAAb;AACA,cAAW,QAAX;GAJD;AAMA,YAAU;AACT,YAAS,CAAE,UAAF,EAAc,SAAd,EAAyB,OAAzB,CAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,wCAAb;AACA,cAAW,QAAX;GAJD;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,iCAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,SAAO;AACN,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,UAAQ;AACP,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,+BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,iCAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,eAAa;AACZ,UAAO,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAAP;AACA,gBAAa,8BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,gBAAc;AACb,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,+BAAb;AACA,aAAU,IAAV;AACA,aAAU,oBAAW;AAAE,gBAAY,CAAZ,EAAF;IAAX;GAJX;AAMA,0BAAwB;AACvB,YAAS,UAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,KAAnB,CAAP;AACA,gBAAa,wBAAb;GAHD;AAKA,0BAAwB;AACvB,YAAS,UAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,iCAAb;GAHD;AAKA,4BAA0B;AACzB,YAAS,UAAT;AACA,UAAO,CAAC,EAAD,EAAK,KAAL,EAAY,KAAZ,EAAmB,IAAnB,CAAP;AACA,gBAAa,mCAAb;GAHD;EA5bG,CA1F+C;AA4hBnD,QAAO,kBAAP,GAA4B,YAAW;AACtC,IAAE,IAAF,CAAO,QAAP,EAAiB,eAAjB,EADsC;EAAX,CA5hBuB;AA+hBnD,QAAO,UAAP,GAAoB,YAAW;AAC9B,MAAI,IAAC,CAAK,SAAL,EAAD,IAAuB,KAAK,UAAL,EAAvB,EAA2C;AAC9C,yBAD8C;AAE9C,kCAF8C;GAA/C;EADmB,CA/hB+B;AAqiBnD,QAAO,EAAP,GAAY,YAAW;AACtB,MAAI,IAAC,CAAK,SAAL,EAAD,IAAuB,KAAK,UAAL,EAAvB,EAA2C;;AAE9C,UAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAS,CAAT,EAAY;AAC9C,QAAI,eAAe,CAAf,CAAJ,EAAuB;AACtB,OAAE,cAAF,GADsB;KAAvB;IADkC,EAIhC,IAJH,EAF8C;GAA/C;EADW,CAriBuC;;AAgjBnD,UAAS,mBAAT,GAA+B;AAC9B,UAAQ,aAAR,EAAuB,eAAvB,CAAuC,KAAvC,EAA8C,yFAA9C,EACC,UAAS,OAAT,EAAkB,GAAlB,EAAuB,KAAvB,EAA8B,EAA9B,EACA,UAAS,OAAT,EAAkB,GAAlB,EAAuB,KAAvB,EAA8B,CAA9B,EAAiC;;AAEhC,OAAI,SAAS,UAAT,CAAoB,UAApB,CAAJ,EAAqC;;AAEpC,gBAAY,SAAS,OAAT,EAAkB,EAAlB,IAAwB,CAAxB,CAAZ,CAFoC;IAArC,MAGO,IAAI,SAAS,UAAT,CAAoB,UAApB,CAAJ,EAAqC;AAC3C,QAAI,aAAa,SAAS,OAAT,EAAkB,EAAlB,CAAb,CADuC;AAE3C,qBAAiB,UAAjB,EAF2C;IAArC;GALR,CAFD,CAD8B;EAA/B;;AAgBA,UAAS,4BAAT,GAAwC;AACvC,UAAQ,eAAR,EAAyB,WAAzB,CAAqC,iBAArC,EADuC;EAAxC;;AAIA,UAAS,eAAT,CAAyB,WAAzB,EAAsC,IAAtC,EAA4C;AAC3C,MAAI,CAAC,KAAK,QAAL,EAAe;AACnB,OAAI,OAAO,WAAP,CAAJ,EAAyB;AACxB,SAAK,QAAL,GAAgB,OAAO,WAAP,EAAoB,IAApB,CAAyB,MAAzB,CAAhB,CADwB;IAAzB,MAEO;AACN,YAAQ,KAAR,CAAc,qCAAd,EAAqD,WAArD,EADM;AAEN,SAAK,QAAL,GAAgB,YAAW;AAC1B,aAAQ,IAAR,CAAa,qCAAb,EAAoD,WAApD,EAD0B;KAAX,CAFV;IAFP;GADD;;AAWA,SAAO,OAAP,CAAe,WAAf,IAA8B,EAAE,MAAF,CAAS,IAAT,EAC7B,EAAE,MAAM,SAAN,EAD2B,EAE7B,OAAO,OAAP,CAAe,WAAf,CAF6B,EAG7B,IAH6B,CAA9B,CAZ2C;EAA5C;;AAmBA,UAAS,WAAT,GAAuB;AACtB,MAAI,CAAC,SAAS,YAAT,EAAD,EAA0B;AAC7B,OAAI,cAAc,SAAS,aAAT,CAAuB,yBAAvB,CAAd,CADyB;AAE7B,OAAI,WAAJ,EAAiB;AAChB,aAAS,KAAT,CAAe,WAAf,EADgB;IAAjB;;AAIA,UAAO,IAAP,CAN6B;GAA9B;EADD;;AAWA,KAAI,cAAJ,CAlmBmD;;AAomBnD,UAAS,SAAT,GAAqB;AACpB,SAAO,cAAP,GAAwB,IAAxB,CADoB;AAEpB,eAAa,cAAb,EAFoB;AAGpB,mBAAiB,WAAW,YAAW;AACtC,UAAO,cAAP,GAAwB,KAAxB,CADsC;GAAX,EAEzB,IAFc,CAAjB,CAHoB;EAArB;;AAQA,UAAS,iBAAT,CAA2B,QAA3B,EAAqC,IAArC,EAA2C;AAC1C,MAAI,YAAY,SAAS,UAAT,CAAoB,UAApB,CAAZ,IAA+C,OAAO,OAAP,CAAe,mBAAf,CAAmC,KAAnC,EAA0C;AAC5F,OAAI,QAAQ,gBAAgB,SAAS,KAAT,CAAxB,CADwF;AAE5F,OAAI,kBAAkB,CAAlB,CAFwF;AAG5F,QAAK,IAAI,IAAI,CAAJ,EAAO,MAAM,MAAM,MAAN,EAAc,IAAI,GAAJ,EAAS,GAA7C,EAAkD;;AAEjD,QAAI,aAAa,SAAS,aAAT,CAAuB,MAAvB,CAAb,CAF6C;AAGjD,sBAHiD;AAIjD,eAAW,SAAX,CAAqB,GAArB,CAAyB,SAAzB,EAJiD;AAKjD,eAAW,YAAX,CAAwB,WAAxB,EAAqC,MAAM,eAAN,GAAwB,IAAxB,CAArC,CALiD;AAMjD,QAAI,mBAAmB,CAAnB,EAAsB;AACzB,gBAAW,KAAX,GAAmB,WAAW,eAAX,GAA6B,eAA7B,CADM;KAA1B,MAEO,IAAI,oBAAoB,EAApB,EAAwB;AAClC,gBAAW,KAAX,GAAmB,sBAAnB,CADkC;KAA5B,MAEA;AACN,gBAAW,KAAX,GAAmB,WAAW,OAAO,cAAP,CAAsB,eAAtB,CAAX,GAAoD,QAApD,GAA8D,eAA9D,GAAgF,yBAAhF,CADb;KAFA;AAKP,eAAW,SAAX,CAAqB,GAArB,CAAyB,kBAAzB,EAbiD;AAcjD,QAAI,OAAO,OAAP,CAAe,0BAAf,CAA0C,KAA1C,KAAoD,OAApD,EAA6D;AAChE,cAAS,WAAT,CAAqB,MAAM,CAAN,CAArB,EAA+B,UAA/B,EADgE;KAAjE,MAEO;AACN,WAAM,CAAN,EAAS,UAAT,CAAoB,YAApB,CAAiC,UAAjC,EAA6C,MAAM,CAAN,CAA7C,EADM;KAFP;IAdD;GAHD;;AAyBA,MAAI,QAAQ,SAAS,UAAT,CAAoB,UAApB,CAAR,EAAyC;AAC5C,OAAI,cAAc,KAAK,KAAL,CAAW,gBAAX,CAA4B,0BAA5B,CAAd,CADwC;AAE5C,KAAE,WAAF,EAAe,MAAf,GAF4C;GAA7C;EA1BD;;AAgCA,UAAS,aAAT,CAAuB,IAAvB,EAA6B;AAC5B,MAAI,KAAK,SAAL,CAAe,QAAf,CAAwB,aAAxB,CAAJ,EAA4C;AAC3C,YAAS,KAAT,CAAe,IAAf,EAD2C;AAE3C,UAAO,KAAP,CAF2C;GAA5C;AAIA,MAAI,UAAU,KAAK,YAAL,CAAkB,MAAlB,CAAV;MACH,SAAS,MAAC,CAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,GAA8C,CAA/C,GAAmD,CAAnD,CANkB;;AAQ5B,MAAI,OAAO,OAAP,CAAe,kBAAf,CAAkC,KAAlC,EAAyC;AAC5C,OAAI,WAAW;AACd,iBAAa,aAAb;AACA,aAAS,OAAT;AACA,YAAQ,MAAR;IAHG,CADwC;;AAO5C,kBAAe,WAAf,CAA2B,QAA3B,EAP4C;GAA7C,MAQO;AACN,YAAS,IAAT,GAAgB,KAAK,YAAL,CAAkB,MAAlB,CAAhB,CADM;GARP;EARD;;AAqBA,KAAI,OAAJ,EAAa,SAAb,CAjqBmD;;AAmqBnD,UAAS,QAAT,GAAoB;AACnB,YAAU,SAAS,aAAT,CAAuB,KAAvB,EAA8B,SAA9B,CAAV,CADmB;AAEnB,MAAI,YAAY,SAAS,aAAT,CAAuB,OAAvB,CAAZ,CAFe;AAGnB,UAAQ,WAAR,CAAoB,SAApB,EAHmB;AAInB,MAAI,kBAAkB,SAAS,aAAT,CAAuB,OAAvB,CAAlB,CAJe;AAKnB,MAAI,qBAAqB,SAAS,aAAT,CAAuB,IAAvB,CAArB,CALe;AAMnB,MAAI,qBAAqB,SAAS,aAAT,CAAuB,IAAvB,CAArB,CANe;AAOnB,IAAE,kBAAF,EAAsB,IAAtB,CAA2B,KAA3B,EAPmB;AAQnB,qBAAmB,WAAnB,CAA+B,kBAA/B,EARmB;AASnB,MAAI,0BAA0B,SAAS,aAAT,CAAuB,IAAvB,CAA1B,CATe;AAUnB,IAAE,uBAAF,EAA2B,IAA3B,CAAgC,UAAhC,EAVmB;AAWnB,qBAAmB,WAAnB,CAA+B,uBAA/B,EAXmB;AAYnB,kBAAgB,WAAhB,CAA4B,kBAA5B,EAZmB;AAanB,YAAU,WAAV,CAAsB,eAAtB,EAbmB;AAcnB,MAAI,gBAAgB,SAAS,aAAT,CAAuB,OAAvB,CAAhB,CAde;AAenB,MAAI,SAAS,cAAT,CAfe;AAgBnB,OAAK,IAAI,CAAJ,IAAS,OAAO,OAAP,EAAgB;AAC7B,OAAI,MAAC,CAAO,OAAP,CAAe,CAAf,EAAkB,IAAlB,KAA2B,SAA3B,IAA0C,CAAC,OAAO,IAAP,CAAY,CAAZ,CAAD,EAAkB;AAChE,QAAI,UAAU,SAAS,aAAT,CAAuB,IAAvB,CAAV,CAD4D;AAEhE,QAAI,aAAa,SAAS,aAAT,CAAuB,IAAvB,CAAb,CAF4D;AAGhE,QAAI,cAAc,OAAO,cAAP,CAAsB,CAAtB,CAAd,CAH4D;AAIhE,QAAI,OAAO,OAAP,CAAe,CAAf,EAAkB,SAAlB,IAA+B,OAAO,OAAP,CAAe,OAAO,OAAP,CAAe,CAAf,EAAkB,SAAlB,CAAf,CAA4C,IAA5C,KAAqD,SAArD,EAAiE;AACnG,mBAAc,CAAE,OAAO,cAAP,CAAsB,OAAO,OAAP,CAAe,CAAf,EAAkB,SAAlB,CAAxB,EAAsD,WAAtD,EAAoE,IAApE,CAAyE,IAAzE,CAAd,CADmG;KAApG;AAGA,MAAE,UAAF,EAAc,IAAd,CAAmB,WAAnB,EAPgE;AAQhE,YAAQ,WAAR,CAAoB,UAApB,EARgE;AAShE,QAAI,cAAc,SAAS,aAAT,CAAuB,IAAvB,CAAd,CAT4D;AAUhE,MAAE,WAAF,EAAe,IAAf,CAAoB,OAAO,OAAP,CAAe,CAAf,EAAkB,WAAlB,CAApB,CAVgE;AAWhE,YAAQ,WAAR,CAAoB,WAApB,EAXgE;AAYhE,kBAAc,WAAd,CAA0B,OAA1B,EAZgE;IAAjE;GADD;AAgBA,YAAU,WAAV,CAAsB,aAAtB,EAhCmB;AAiCnB,WAAS,IAAT,CAAc,WAAd,CAA0B,OAA1B,EAjCmB;AAkCnB,cAAY,IAAZ,CAlCmB;EAApB;;AAqCA,QAAO,cAAP,GAAwB,UAAS,SAAT,EAAoB;AAC3C,MAAI,eAAe,OAAO,OAAP,CAAe,SAAf,EAA0B,KAA1B,CADwB;AAE3C,MAAI,CAAC,YAAD,EAAe;AAClB,UADkB;GAAnB;;AAIA,MAAI,OAAO,YAAP,KAAwB,QAAxB,EAAkC;AACrC,kBAAe,SAAS,YAAT,EAAuB,EAAvB,CAAf,CADqC;GAAtC;AAGA,MAAI,OAAO,YAAP,KAAwB,QAAxB,EAAkC;AACrC,kBAAe,CAAC,YAAD,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,CAAf,CADqC;GAAtC;AAGA,MAAI,cAAc,SAAS,WAAT,CAAqB,YAArB,CAAd,CAZuC;AAa3C,SAAO,WAAP,CAb2C;EAApB,CAxsB2B;;AAwtBnD,KAAI,cAAJ,CAxtBmD;;AA0tBnD,UAAS,sBAAT,CAAgC,QAAhC,EAA0C;AACzC,MAAI,CAAC,cAAD,EAAiB;AACpB,OAAI,SAAS,EAAT,CADgB;AAEpB,KAAE,IAAF,CAAO,OAAO,OAAP,EAAgB,UAAS,IAAT,EAAe,MAAf,EAAuB;AAC7C,QAAI,OAAO,IAAP,KAAgB,SAAhB,EAA2B,OAA/B;AACA,QAAI,CAAC,OAAO,QAAP,EAAiB,OAAtB;AACA,QAAI,CAAC,SAAS,mBAAT,CAA6B,OAAO,OAAP,EAAgB,OAAO,OAAP,CAA9C,EAA+D,OAAnE;;AAEA,QAAI,OAAO,SAAS,YAAT,CAAsB,OAAO,KAAP,CAA7B,CALyC;AAM7C,QAAI,CAAC,OAAO,IAAP,CAAD,EAAe;AAClB,YAAO,IAAP,IAAe,EAAE,SAAF,EAAf,CADkB;KAAnB;AAGA,WAAO,IAAP,EAAa,GAAb,CAAiB,OAAO,QAAP,CAAjB,CAT6C;IAAvB,CAAvB,CAFoB;AAapB,oBAAiB,MAAjB,CAboB;GAArB;;AAgBA,MAAI,OAAO,SAAS,YAAT,CAAsB,QAAtB,CAAP,CAjBqC;AAkBzC,MAAI,YAAY,eAAe,IAAf,CAAZ,CAlBqC;;AAoBzC,SAAO,SAAP,CApByC;EAA1C;;AAuBA,UAAS,cAAT,CAAwB,CAAxB,EAA2B;AAC1B,MAAI,aAAa,CAAC,QAAQ,WAAR,EAAqB,YAArB,EAAD,CADS;AAE1B,MAAI,QAAC,CAAS,aAAT,CAAuB,OAAvB,KAAmC,MAAnC,IAA+C,UAAhD,EAA6D;AAChE,OAAI,YAAY,uBAAuB,CAAvB,CAAZ,CAD4D;AAEhE,OAAI,SAAJ,EAAe;AACd,cAAU,IAAV,CAAe,CAAf,EADc;AAEd,WAAO,IAAP,CAFc;IAAf;GAFD;EAFD;;AAWA,QAAO,UAAP,GAAoB,YAAW;AAC9B,MAAI,WAAW,QAAQ,KAAR,CAAc,OAAd,KAA0B,OAA1B,EAAmC;AACjD,cADiD;GAAlD,MAEO;AACN,cADM;GAFP;EADmB,CA5vB+B;;AAowBnD,UAAS,QAAT,GAAoB;;AAEnB,MAAI,CAAC,SAAD,EAAY;AACf,cADe;GAAhB;AAGA,WAAS,aAAT,CAAuB,OAAvB,EAAgC,GAAhC,EALmB;AAMnB,UAAQ,aAAR,EAAuB,0BAAvB,CAAkD,KAAlD,EAAyD,iBAAzD,EANmB;EAApB;;AASA,UAAS,QAAT,GAAoB;;AAEnB,WAAS,cAAT,CAAwB,OAAxB,EAAiC,GAAjC,EAFmB;AAGnB,UAAQ,aAAR,EAAuB,0BAAvB,CAAkD,IAAlD,EAAwD,iBAAxD,EAHmB;EAApB;;AAMA,QAAO,IAAP,GAAc,YAAW;AACxB,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADoB;AAExB,MAAI,CAAC,QAAD,EAAW,OAAf;;;AAFwB,MAKpB,WAAW,SAAS,KAAT,CAAe,aAAf,CAA6B,6BAA7B,CAAX,CALoB;AAMxB,WAAS,KAAT,CAAe,QAAf;;AANwB,MAQpB,OAAO,OAAP,CAAe,cAAf,CAA8B,KAA9B,EAAqC;AACxC,UAAO,QAAP,GADwC;GAAzC;EARa,CAnxBqC;;AAgyBnD,QAAO,eAAP,GAAyB,UAAS,SAAT,EAAoB;AAC5C,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADwC;AAE5C,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C;;;AAJgC,MAOxC,SAAS,SAAS,gBAAT,EAAT,CAPwC;AAQ5C,MAAI,MAAJ,EAAY;AACX,OAAI,WAAW,OAAO,YAAP,CAAoB,MAApB,CAAX,CADO;AAEX,OAAI,SAAJ,EAAe;AACd,QAAI,SAAS,MAAC,CAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,GAA8C,CAA/C,GAAmD,CAAnD;QACZ,WAAW;AACV,kBAAa,aAAb;AACA,cAAS,QAAT;AACA,aAAQ,MAAR;KAHD,CAFa;;AAQd,mBAAe,WAAf,CAA2B,QAA3B,EARc;IAAf,MASO;AACN,aAAS,IAAT,GAAgB,QAAhB,CADM;IATP;GAFD;EARwB,CAhyB0B;;AAyzBnD,QAAO,MAAP,GAAgB,YAAW;AAC1B,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADsB;AAE1B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,UAAQ,SAAS,KAAT,CAAR,CAJ0B;EAAX,CAzzBmC;;AAg0BnD,QAAO,aAAP,GAAuB,YAAW;AACjC,SAAO,MAAP,GADiC;EAAX,CAh0B4B;;AAo0BnD,UAAS,OAAT,CAAiB,SAAjB,EAA4B;AAC3B,MAAI,UAAU,SAAV,CADuB;AAE3B,MAAI,SAAS,QAAQ,eAAR,EAAyB,gBAAzB,EAAT,CAFuB;AAG3B,MAAI,QAAQ,OAAO,KAAP,CAAa,OAAb,CAAR,CAHuB;;AAK3B,MAAI,MAAJ,CAL2B;AAM3B,MAAI,cAAc,KAAK,GAAL,CAAS,CAAT,EAAY,KAAZ,CAAd,CANuB;AAO3B,KAAG;AACF,iBADE;AAEF,YAAS,OAAO,WAAP,CAAT,CAFE;GAAH,QAGS,UAAU,EAAE,MAAF,EAAU,EAAV,CAAa,mBAAb,CAAV,EAVkB;;AAY3B,MAAI,OAAO,eAAP,CAAuB,MAAvB,EAA+B,SAA/B,CAAJ,EAA+C;AAC9C,gBAAa,MAAb,EAAqB,EAAE,aAAa,KAAb,EAAvB,EAD8C;GAA/C,MAEO;AACN,gBAAa,MAAb,EAAqB;AACpB,iBAAa,OAAO,OAAP,CAAe,WAAf,CAA2B,KAA3B;IADd,EADM;GAFP;;AAQA,cApB2B;EAA5B;;AAuBA,QAAO,QAAP,GAAkB,YAAW;AAC5B,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADwB;AAE5B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,YAAU,SAAS,KAAT,CAAV,CAJ4B;EAAX,CA31BiC;;AAk2BnD,QAAO,eAAP,GAAyB,YAAW;AACnC,SAAO,QAAP,GADmC;EAAX,CAl2B0B;;AAs2BnD,UAAS,SAAT,CAAmB,SAAnB,EAA8B;AAC7B,MAAI,UAAU,SAAV,CADyB;AAE7B,MAAI,SAAS,QAAQ,eAAR,EAAyB,gBAAzB,EAAT,CAFyB;AAG7B,MAAI,QAAQ,OAAO,KAAP,CAAa,OAAb,CAAR,CAHyB;;AAK7B,MAAI,MAAJ,CAL6B;AAM7B,MAAI,cAAc,KAAK,GAAL,CAAS,KAAT,EAAgB,OAAO,MAAP,GAAgB,CAAhB,CAA9B,CANyB;AAO7B,KAAG;AACF,iBADE;AAEF,YAAS,OAAO,WAAP,CAAT,CAFE;GAAH,QAGS,UAAU,EAAE,MAAF,EAAU,EAAV,CAAa,mBAAb,CAAV,EAVoB;;AAY7B,MAAI,OAAO,eAAP,CAAuB,MAAvB,EAA+B,SAA/B,CAAJ,EAA+C;AAC9C,WAAQ,eAAR,EAAyB,MAAzB,CAAgC,MAAhC,EAAwC,EAAE,aAAa,KAAb,EAA1C,EAD8C;GAA/C,MAEO;AACN,WAAQ,eAAR,EAAyB,MAAzB,CAAgC,MAAhC,EAAwC;AACvC,iBAAa,OAAO,OAAP,CAAe,WAAf,CAA2B,KAA3B;IADd,EADM;GAFP;;;AAZ6B,MAsB5B,CAAE,SAAS,gBAAT,CAA0B,WAA1B,CAAD,IACD,SAAS,UAAT,CAAoB,UAApB,CADA,IAEA,OAAO,KAAP,CAAa,MAAb,IAAuB,CAAvB,GAA2B,OAAO,MAAP;AAC3B,UAAQ,mBAAR,EAA6B,SAA7B,EAHA,IAIA,QAAQ,mBAAR,EAA6B,OAA7B,CAAqC,QAArC,CAA8C,KAA9C,EACC;AACD,UAAO,QAAP,CAAgB,IAAhB,EADC;GANF;AASA,cA9B6B;EAA9B;;AAiCA,QAAO,OAAP,GAAiB,YAAW;AAC3B,MAAI,SAAS,QAAQ,eAAR,EAAyB,gBAAzB,EAAT,CADuB;AAE3B,MAAI,SAAS,OAAO,KAAP,EAAT,CAFuB;AAG3B,UAAQ,eAAR,EAAyB,MAAzB,CAAgC,MAAhC,EAH2B;AAI3B,cAJ2B;EAAX,CAv4BkC;;AA84BnD,QAAO,UAAP,GAAoB,YAAW;AAC9B,MAAI,SAAS,QAAQ,eAAR,EAAyB,gBAAzB,EAAT,CAD0B;AAE9B,MAAI,SAAS,OAAO,IAAP,EAAT,CAF0B;AAG9B,UAAQ,eAAR,EAAyB,MAAzB,CAAgC,MAAhC,EAAwC,EAAE,aAAa,KAAb,EAA1C,EAH8B;AAI9B,cAJ8B;EAAX,CA94B+B;;AAq5BnD,UAAS,YAAT,CAAsB,MAAtB,EAA8B,OAA9B,EAAuC;AACtC,MAAI,YAAY,EAAE,MAAF,EAAU,OAAV,CAAkB,kBAAlB,CAAZ,CADkC;AAEtC,MAAI,UAAU,MAAV,EAAkB;AACrB,YAAS,UAAU,IAAV,GAAiB,CAAjB,CAAT,CADqB;GAAtB;;AAIA,UAAQ,eAAR,EAAyB,MAAzB,CAAgC,MAAhC,EAAwC,OAAxC,EANsC;AAOtC,cAPsC;EAAvC;;AAUA,QAAO,eAAP,GAAyB,YAAW;AACnC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD+B;AAEnC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,UAAU,EAAE,SAAS,KAAT,CAAZ,CAJ+B;;AAMnC,MAAI,MAAJ,CANmC;AAOnC,KAAG;AACF,YAAS,QAAQ,OAAR,CAAgB,QAAhB,EAA0B,KAA1B,GAAkC,CAAlC,CAAT,CADE;AAEF,OAAI,CAAC,MAAD,EAAS;AACZ,cAAU,QAAQ,MAAR,GAAiB,OAAjB,CAAyB,QAAzB,CAAV,CADY;IAAb;GAFD,QAKS,CAAC,MAAD,IAAW,QAAQ,MAAR,EAZe;;AAcnC,eAAa,MAAb,EAAqB,EAAE,aAAa,KAAb,EAAvB,EAdmC;EAAX,CA/5B0B;;AAg7BnD,QAAO,aAAP,GAAuB,YAAW;AACjC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD6B;AAEjC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,UAAU,EAAE,SAAS,KAAT,CAAZ,CAJ6B;;AAMjC,MAAI,SAAS,QAAQ,OAAR,CAAgB,QAAhB,EAA0B,KAA1B,GAAkC,CAAlC,CAAT,CAN6B;AAOjC,MAAI,CAAC,MAAD,EAAS;AACZ,YAAS,QAAQ,MAAR,GAAiB,OAAjB,CAAyB,QAAzB,EAAmC,CAAnC,CAAT,CADY;GAAb;;AAIA,eAAa,MAAb,EAAqB,EAAE,aAAa,KAAb,EAAvB,EAXiC;EAAX,CAh7B4B;;AA87BnD,QAAO,YAAP,GAAsB,YAAW;AAChC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD4B;AAEhC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,UAAU,EAAE,SAAS,KAAT,CAAF,CAAkB,OAAlB,CAA0B,QAA1B,EAAoC,IAApC,EAAV,CAJ4B;AAKhC,MAAI,CAAC,QAAQ,MAAR,EAAgB;AACpB,aAAU,EAAE,SAAS,KAAT,CAAF,CAAkB,OAAlB,CAA0B,QAA1B,CAAV,CADoB;GAArB;;AAIA,MAAI,SAAS,QAAQ,OAAR,CAAgB,QAAhB,EAA0B,KAA1B,GAAkC,CAAlC,CAAT,CAT4B;AAUhC,MAAI,CAAC,MAAD,EAAS;AACZ,WAAQ,OAAR,EADY;GAAb,MAEO;AACN,gBAAa,MAAb,EAAqB,EAAE,aAAa,KAAb,EAAvB,EADM;GAFP;EAVqB,CA97B6B;;AA+8BnD,QAAO,cAAP,GAAwB,YAAW;AAClC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD8B;AAElC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,UAAU,EAAE,SAAS,KAAT,CAAF,CAAkB,OAAlB,CAA0B,QAA1B,EAAoC,IAApC,EAAV,CAJ8B;AAKlC,MAAI,CAAC,QAAQ,MAAR,EAAgB;AACpB,aAAU,EAAE,SAAS,KAAT,CAAF,CAAkB,OAAlB,CAA0B,QAA1B,CAAV,CADoB;GAArB;;AAIA,MAAI,SAAS,QAAQ,OAAR,CAAgB,QAAhB,EAA0B,KAA1B,GAAkC,CAAlC,CAAT,CAT8B;AAUlC,MAAI,MAAJ,EAAY;AACX,gBAAa,MAAb,EAAqB,EAAE,aAAa,KAAb,EAAvB,EADW;GAAZ;EAVuB,CA/8B2B;;AA89BnD,QAAO,gBAAP,GAA0B,YAAW;AACpC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADgC;AAEpC,MAAI,CAAC,QAAD,EAAW,OAAf;AACA,MAAI,SAAS,EAAE,SAAS,KAAT,CAAF,CAAkB,OAAlB,CAA0B,QAA1B,EAAoC,IAApC,EAAT,CAHgC;;AAKpC,eAAa,MAAb,EAAqB,EAAE,aAAa,KAAb,EAAvB,EALoC;EAAX,CA99ByB;;AAs+BnD,QAAO,YAAP,GAAsB,YAAW;AAChC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD4B;AAEhC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,SAAS,EAAE,SAAS,KAAT,CAAF,CAAkB,MAAlB,GAA2B,OAA3B,CAAmC,QAAnC,CAAT,CAJ4B;AAKhC,eAAa,MAAb,EALgC;EAAX,CAt+B6B;;AA8+BnD,QAAO,WAAP,GAAqB,YAAW;AAC/B,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD2B;AAE/B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,SAAS,SAAS,KAAT,CAAe,aAAf,CAA6B,6BAA7B,CAAT,CAJ2B;AAK/B,MAAI,MAAJ,EAAY;AACX,WAAQ,OAAR,EAAiB,QAAjB,CAA0B,YAA1B,EACE,MADF,CACS,MADT,EAEE,YAFF,CAEe,QAAQ,YAAR,EAAsB,gBAAtB,CAFf,CAGE,KAHF,GADW;GAAZ;EALoB,CA9+B8B;;AA2/BnD,QAAO,cAAP,GAAwB,YAAW;AAClC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD8B;AAElC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,SAAS,KAAT,CAAe,SAAf,CAAyB,QAAzB,CAAkC,MAAlC,CAAJ,EAA+C;;AAE9C,UAAO,UAAP,GAF8C;AAG9C,UAH8C;GAA/C,MAIO;;AAEN,OAAI,UAAJ,EAAgB,YAAhB,EAA8B,UAA9B,CAFM;;AAIN,gBAAa,SAAS,KAAT,CAAe,aAAf,CAA6B,UAA7B,CAAb;;;AAJM,eAON,GAAe,SAAS,KAAT,CAAe,aAAf,CAA6B,uBAA7B,CAAf,CAPM;AAQN,OAAI,YAAJ,EAAkB;AACjB,iBAAa,YAAb,CADiB;IAAlB;;;AARM,aAaN,GAAa,SAAS,KAAT,CAAe,aAAf,CAA6B,qBAA7B,CAAb,CAbM;AAcN,OAAI,UAAJ,EAAgB;AACf,iBAAa,UAAb,CADe;IAAhB;;AAIA,YAAS,KAAT,CAAe,UAAf,EAlBM;GAJP;EAJuB,CA3/B2B;;AAyhCnD,QAAO,aAAP,GAAuB,YAAW;AACjC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD6B;AAEjC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,cAAc,SAAS,gBAAT,EAAd,CAJ6B;AAKjC,MAAI,WAAJ,EAAiB;AAChB,YAAS,KAAT,CAAe,WAAf,EADgB;AAEhB,OAAI,OAAO,OAAP,CAAe,eAAf,CAA+B,KAA/B,EAAsC;AACzC,aAAS,eAAT,CAAyB,SAAS,KAAT,EAAgB,EAAE,aAAa,KAAb,EAA3C,EADyC;IAA1C;GAFD;EALsB,CAzhC4B;;AAsiCnD,KAAI,0BAA0B,KAA1B,CAtiC+C;;AAwiCnD,QAAO,eAAP,GAAyB,UAAS,QAAT,EAAmB,QAAnB,EAA6B;AACrD,MAAI,CAAC,QAAD,IAAa,CAAC,QAAD,EAAW,OAA5B;AACA,MAAI,SAAS,UAAT,CAAoB,UAApB,EAAgC,QAAhC,KAA6C,OAAO,OAAP,CAAe,eAAf,CAA+B,KAA/B,IAAwC,CAAC,QAAQ,YAAR,EAAsB,mBAAtB,EAA2C;AACpI,OAAI,aAAa,YAAY,SAAS,KAAT,CAAe,QAAf,EAAyB,KAAzB,CAA+B,aAA/B,CAA6C,iBAA7C,CAAZ,CADmH;AAEpI,OAAI,aAAa,YAAY,SAAS,KAAT,CAAe,QAAf,EAAyB,KAAzB,CAA+B,aAA/B,CAA6C,iBAA7C,CAAZ,CAFmH;AAGpI,OAAI,UAAJ,EAAgB;AACf,8BAA0B,WAAW,SAAX,CAAqB,QAArB,CAA8B,UAA9B,CAA1B,CADe;AAEf,QAAI,uBAAJ,EAA6B;AAC5B,cAAS,KAAT,CAAe,UAAf,EAD4B;KAA7B;IAFD;AAMA,OAAI,cAAc,uBAAd,IAAyC,CAAC,WAAW,SAAX,CAAqB,QAArB,CAA8B,UAA9B,CAAD,EAA4C;AACxF,aAAS,KAAT,CAAe,UAAf,EADwF;;AAGxF,WAAO,IAAP,CAHwF;IAAzF;GATD;EAFwB,CAxiC0B;;AA2jCnD,UAAS,WAAT,CAAqB,MAArB,EAA6B;AAC5B,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADwB;AAE5B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,SAAS,EAAE,SAAS,KAAT,CAAF,CAAkB,IAAlB,CAAuB,+BAAvB,CAAT;MACH,SADD,CAJ4B;;AAO5B,OAAK,IAAI,IAAI,CAAJ,EAAO,MAAM,OAAO,MAAP,EAAe,IAAI,GAAJ,EAAS,GAA9C,EAAmD;AAClD,eAAY,EAAE,OAAO,CAAP,CAAF,EAAa,KAAb,EAAZ,CADkD;AAElD,WAAQ,YAAR,EAAsB,WAAtB,CAAkC,OAAO,CAAP,CAAlC,EAA6C,YAAY,MAAZ,CAA7C,CAFkD;GAAnD;EAPD;;AAaA,QAAO,WAAP,GAAqB,UAAS,WAAT,EAAsB;AAC1C,gBAAc,OAAO,WAAP,KAAuB,SAAvB,GAAmC,WAAnC,GAAiD,SAAjD,CAD4B;AAE1C,MAAI,SAAS,cAAgB,EAAhB,GAAqB,GAArB,CAF6B;AAG1C,cAAY,MAAZ,EAH0C;EAAtB,CAxkC8B;;AA8kCnD,QAAO,aAAP,GAAuB,UAAS,WAAT,EAAsB;AAC5C,gBAAc,OAAO,WAAP,KAAuB,SAAvB,GAAmC,WAAnC,GAAiD,SAAjD,CAD8B;AAE5C,MAAI,SAAS,cAAgB,CAAC,EAAD,GAAM,CAAC,GAAD,CAFS;AAG5C,cAAY,MAAZ,EAH4C;EAAtB,CA9kC4B;;AAolCnD,QAAO,WAAP,GAAqB,YAAW;AAC/B,YAAU,CAAV,EAAa,CAAC,EAAD,CAAb,CAD+B;EAAX,CAplC8B;;AAwlCnD,QAAO,aAAP,GAAuB,YAAW;AACjC,YAAU,CAAV,EAAa,EAAb,EADiC;EAAX,CAxlC4B;;AA4lCnD,QAAO,aAAP,GAAuB,YAAW;AACjC,YAAU,CAAC,EAAD,EAAK,CAAf,EADiC;EAAX,CA5lC4B;;AAgmCnD,QAAO,cAAP,GAAwB,YAAW;AAClC,YAAU,EAAV,EAAc,CAAd,EADkC;EAAX,CAhmC2B;;AAomCnD,UAAS,SAAT,CAAmB,MAAnB,EAA2B,MAA3B,EAAmC;AAClC,MAAI,SAAS,EAAE,QAAF,EAAY,IAAZ,CAAiB,WAAjB,CAAT,CAD8B;AAElC,MAAI,OAAO,MAAP,KAAkB,CAAlB,EAAqB;AACxB,UADwB;GAAzB;AAGA,MAAI,cAAc,CAAC,CAAD,CALgB;AAMlC,MAAI,wBAAwB,CAAxB,CAN8B;AAOlC,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,OAAO,MAAP,EAAe,GAAnC,EAAwC;AACvC,OAAI,oBAAoB,SAAS,yBAAT,CAAmC,OAAO,CAAP,CAAnC,CAApB,CADmC;AAEvC,OAAI,oBAAoB,qBAApB,EAA2C;AAC9C,kBAAc,CAAd,CAD8C;AAE9C,4BAAwB,iBAAxB,CAF8C;IAA/C;GAFD;;AAPkC,MAe9B,gBAAgB,CAAC,CAAD,EAAI;AACvB,UAAO,KAAP,CADuB;GAAxB;AAGA,UAAQ,YAAR,EAAsB,SAAtB,CAAgC,OAAO,WAAP,CAAhC,EAAqD,MAArD,EAA6D,MAA7D,EAlBkC;EAAnC;;AAqBA,QAAO,oBAAP,GAA8B,YAAW;AACxC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADoC;AAExC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,iBAAiB,SAAS,KAAT,CAAe,aAAf,CAA6B,+BAA7B,CAAjB,CAJoC;AAKxC,MAAI,cAAJ,EAAoB;AACnB,YAAS,KAAT,CAAe,cAAf,EADmB;GAApB;EAL6B,CAznCqB;;AAmoCnD,QAAO,gBAAP,GAA0B,YAAW;AACpC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADgC;AAEpC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,aAAa,SAAS,KAAT,CAAe,aAAf,CAA6B,2BAA7B,CAAb,CAJgC;AAKpC,MAAI,UAAJ,EAAgB;AACf,YAAS,KAAT,CAAe,UAAf,EADe;GAAhB;EALyB,CAnoCyB;;AA6oCnD,QAAO,gBAAP,GAA0B,YAAW;AACpC,UAAQ,YAAR,EAAsB,aAAtB,GADoC;EAAX,CA7oCyB;;AAipCnD,UAAS,iBAAT,GAA6B;AAC5B,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADwB;AAE5B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,eAAe,SAAS,iBAAT,EAAf,CAJwB;AAK5B,MAAI,YAAJ,EAAkB;AACjB,QAAK,IAAI,IAAI,CAAJ,EAAO,MAAM,aAAa,MAAb,EAAqB,IAAI,GAAJ,EAAS,GAApD,EAAyD;AACxD,aAAS,KAAT,CAAe,aAAa,CAAb,CAAf,EADwD;IAAzD;GADD;EALD;;AAYA,QAAO,UAAP,GAAoB,UAAS,SAAT,EAAoB;AACvC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADmC;AAEvC,MAAI,CAAC,QAAD,EAAW,OAAf;AACA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAH2B;;AAKvC,MAAI,QAAQ,SAAS,WAAT,EAAR,CALmC;AAMvC,MAAI,WAAW,MAAM,IAAN,CANwB;AAOvC,MAAI,SAAS,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,MAA6B,IAA7B,EAAmC;AACtC,cAAW,SAAS,QAAT,GAAoB,QAApB,CAD2B;GAAvC;AAGA,MAAI,SAAJ,EAAe;AACd,OAAI,SAAS,MAAC,CAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,GAA8C,CAA/C,GAAmD,CAAnD;OACZ,WAAW;AACV,iBAAa,aAAb;AACA,aAAS,QAAT;AACA,YAAQ,MAAR;IAHD,CAFa;;AAQd,kBAAe,WAAf,CAA2B,QAA3B,EARc;GAAf,MASO;AACN,YAAS,IAAT,GAAgB,QAAhB,CADM;GATP;EAVmB,CA7pC+B;;AAqrCnD,UAAS,gBAAT,CAA0B,GAA1B,EAA+B;AAC9B,MAAI,SAAS,QAAQ,eAAR,EAAyB,gBAAzB,GAA4C,MAA5C,CAAmD,YAAW;AAC1E,OAAI,OAAO,CAAC,OAAO,KAAK,aAAL,CAAmB,OAAnB,CAAP,CAAD,IAAwC,SAAS,KAAK,WAAL,EAAkB,EAA3B,CAAxC,CAD+D;AAE1E,UAAO,SAAS,GAAT,CAFmE;GAAX,CAA5D,CAD0B;AAK9B,UAAQ,eAAR,EAAyB,MAAzB,CAAgC,MAAhC,EAL8B;AAM9B,SAAO,UAAP,GAN8B;EAA/B;;AASA,QAAO,eAAP,GAAyB,UAAS,SAAT,EAAoB;AAC5C,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADwC;AAE5C,MAAI,CAAC,QAAD,EAAW,OAAf;AACA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAHgC;;AAK5C,MAAI,QAAQ,SAAS,KAAT,CAAe,aAAf,CAA6B,UAA7B,CAAR,CALwC;AAM5C,MAAI,CAAC,KAAD,EAAQ,OAAZ;AACA,MAAI,WAAW,MAAM,YAAN,CAAmB,MAAnB,CAAX,CAPwC;AAQ5C,MAAI,SAAJ,EAAe;AACd,OAAI,SAAS,MAAC,CAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,GAA8C,CAA/C,GAAmD,CAAnD;OACZ,WAAW;AACV,iBAAa,aAAb;AACA,aAAS,QAAT;AACA,YAAQ,MAAR;IAHD,CAFa;;AAQd,kBAAe,WAAf,CAA2B,QAA3B,EARc;GAAf,MASO;AACN,YAAS,IAAT,GAAgB,QAAhB,CADM;GATP;EARwB,CA9rC0B;;AAotCnD,QAAO,cAAP,GAAwB,UAAS,SAAT,EAAoB;AAC3C,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADuC;AAE3C,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAJ+B;AAK3C,MAAI,QAAQ,SAAS,eAAT,EAAR;MACH,WAAW,MAAM,YAAN,CAAmB,MAAnB,CAAX,CAN0C;AAO3C,MAAI,SAAJ,EAAe;AACd,OAAI,SAAS,MAAC,CAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,GAA8C,CAA/C,GAAmD,CAAnD;OACZ,WAAW;AACV,iBAAa,aAAb;AACA,aAAS,QAAT;AACA,YAAQ,MAAR;IAHD,CAFa;;AAQd,kBAAe,WAAf,CAA2B,QAA3B,EARc;GAAf,MASO;AACN,YAAS,IAAT,GAAgB,QAAhB,CADM;GATP;EAPuB,CAptC2B;;AAyuCnD,UAAS,qBAAT,CAA+B,UAA/B,EAA2C;AAC1C,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADsC;AAE1C,MAAI,CAAC,QAAD,EAAW,OAAf;AACA,eAAa,OAAO,UAAP,KAAsB,SAAtB,GAAkC,UAAlC,GAA+C,SAA/C;;;AAH6B,MAMtC,SAAS,SAAS,KAAT,CAAe,aAAf,CAA6B,oBAA7B,CAAT,CANsC;AAO1C,WAAS,SAAT,CAAmB,MAAnB,EAA2B,cAAc,CAAd,CAA3B,CAP0C;EAA3C;;AAUA,QAAO,MAAP,GAAgB,UAAS,aAAT,EAAwB;AACvC,MAAI,aAAJ,EAAmB,OAAnB;AACA,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAFmC;AAGvC,MAAI,CAAC,QAAD,EAAW,OAAf;AACA,kBAAgB,OAAO,aAAP,KAAyB,SAAzB,GAAqC,aAArC,GAAqD,SAArD,CAJuB;;AAMvC,MAAI,eAAe,SAAS,eAAT,EAAf,CANmC;;AAQvC,MAAI,CAAC,YAAD,EAAe;AAClB,UADkB;GAAnB;;AAIA,MAAI,QAAQ,iBAAR,EAA2B,eAA3B,EAAJ,EAAkD;AACjD,WAAQ,iBAAR,EAA2B,YAA3B,GADiD;GAAlD,MAEO;AACN,OAAI,CAAC,aAAD,IAAkB,CAAC,aAAa,SAAb,CAAuB,QAAvB,CAAgC,OAAhC,CAAD,EAA2C;AAChE,aAAS,KAAT,CAAe,YAAf,EADgE;IAAjE;GAHD;;AAQA,MAAI,OAAO,SAAS,UAAT,CAAoB,UAApB,EAAgC,SAAhC,CAAP,CApBmC;AAqBvC,MAAI,QAAQ,OAAO,OAAP,CAAe,cAAf,CAA8B,KAA9B,IAAuC,CAAC,IAAD,IAAS,OAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,EAA4C;AACvG,UAAO,QAAP,GADuG;GAAxG;EArBe,CAnvCmC;;AA6wCnD,QAAO,QAAP,GAAkB,UAAS,aAAT,EAAwB;AACzC,MAAI,aAAJ,EAAmB,OAAnB;AACA,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAFqC;AAGzC,MAAI,CAAC,QAAD,EAAW,OAAf;AACA,kBAAgB,OAAO,aAAP,KAAyB,SAAzB,GAAqC,aAArC,GAAqD,SAArD,CAJyB;;AAMzC,MAAI,iBAAiB,SAAS,iBAAT,EAAjB,CANqC;;AAQzC,MAAI,CAAC,cAAD,EAAiB;AACpB,UADoB;GAArB;;AAIA,MAAI,QAAQ,iBAAR,EAA2B,eAA3B,EAAJ,EAAkD;AACjD,WAAQ,iBAAR,EAA2B,YAA3B,GADiD;GAAlD,MAEO;AACN,OAAI,CAAC,aAAD,IAAkB,CAAC,eAAe,SAAf,CAAyB,QAAzB,CAAkC,SAAlC,CAAD,EAA+C;AACpE,aAAS,KAAT,CAAe,cAAf,EADoE;IAArE;GAHD;;AAQA,MAAI,OAAO,SAAS,UAAT,CAAoB,UAApB,EAAgC,SAAhC,CAAP,CApBqC;AAqBzC,MAAI,QAAQ,OAAO,OAAP,CAAe,cAAf,CAA8B,KAA9B,IAAuC,CAAC,IAAD,IAAS,OAAO,OAAP,CAAe,qBAAf,CAAqC,KAArC,EAA4C;AACvG,UAAO,QAAP,GADuG;GAAxG;EArBiB,CA7wCiC;;AAuyCnD,QAAO,QAAP,GAAkB,YAAW;AAC5B,MAAI,aAAJ,EAAmB,OAAnB;AACA,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAFwB;AAG5B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,WAAW,SAAS,KAAT,CAAe,aAAf,CAA6B,qBAA7B,KAAuD,SAAS,KAAT,CAAe,aAAf,CAA6B,uBAA7B,CAAvD,CALa;AAM5B,MAAI,QAAJ,EAAc;AACb,YAAS,KAAT,CAAe,QAAf,EADa;GAAd;EANiB,CAvyCiC;;AAkzCnD,QAAO,WAAP,GAAqB,YAAW;AAC/B,MAAI,aAAJ,EAAmB,OAAnB;AACA,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAF2B;AAG/B,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,cAAc,SAAS,KAAT,CAAe,aAAf,CAA6B,0BAA7B,CAAd,CAL2B;AAM/B,MAAI,WAAJ,EAAiB;AAChB,YAAS,KAAT,CAAe,WAAf,EADgB;GAAjB;EANoB,CAlzC8B;;AA6zCnD,QAAO,cAAP,GAAwB,YAAW;AAClC,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAD8B;AAElC,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,cAAc,SAAS,KAAT,CAAe,aAAf,CAA6B,gCAA7B,CAAd,CAJ8B;AAKlC,MAAI,WAAJ,EAAiB;AAChB,YAAS,KAAT,CAAe,WAAf,EADgB;AAEhB,WAAQ,cAAR,EAAwB,2BAAxB,GAFgB;GAAjB;EALuB,CA7zC2B;;AAw0CnD,QAAO,KAAP,GAAe,YAAW;AACzB,MAAI,aAAJ,EAAmB,OAAnB;;AAEA,MAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CAHqB;AAIzB,MAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,MAAI,SAAS,KAAT,CAAe,SAAf,CAAyB,QAAzB,CAAkC,MAAlC,KAA6C,SAAS,UAAT,CAAoB,UAApB,CAA7C,EAA8E;;AAEjF,OAAI,SAAS,EAAE,0CAAF,CAAT,CAF6E;AAGjF,OAAI,OAAO,MAAP,CAAc,UAAd,EAA0B,MAA1B,EAAkC;AACrC,WAAO,KAAP,GADqC;AAErC,WAFqC;IAAtC;GAHD;;;AANyB,MAgBrB,cAAc,SAAS,KAAT,CAAe,aAAf,CAA6B,4BAA7B,CAAd,CAhBqB;AAiBzB,MAAI,WAAJ,EAAiB;AAChB,YAAS,KAAT,CAAe,WAAf,EADgB;AAEhB,UAFgB;GAAjB;;;AAjByB,MAuBrB,UAAU,SAAS,KAAT,CAAe,aAAf,CAA6B,wCAA7B,CAAV,CAvBqB;AAwBzB,MAAI,OAAJ,EAAa;AACZ,YAAS,KAAT,CAAe,OAAf,EADY;GAAb;EAxBc,CAx0CoC;;AAq2CnD,UAAS,UAAT,CAAoB,SAApB,EAA+B,QAA/B,EAAyC;AACxC,MAAI,SAAJ,EAAe;AACd,kBAAe,eAAf,CAA+B,QAA/B,EADc;GAAf,MAEO;AACN,YAAS,IAAT,GAAgB,QAAhB,CADM;GAFP;EADD;;AAQA,KAAI,YAAJ,EAAkB,WAAlB,CA72CmD;;AA+2CnD,QAAO,MAAP,GAAgB,YAAW;AAC1B,MAAI,CAAC,OAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,EAAgC;AACpC,UADoC;GAArC;AAGA,iBAAe,CAAC,YAAD,CAJW;AAK1B,MAAI,YAAJ,EAAkB;AACjB,OAAI,CAAC,WAAD,EAAc;AACjB,QAAI,aAAJ,EAAmB,SAAnB,EAA8B,WAA9B,CADiB;;AAGjB,kBAAc,EAAE,+CAAF,EACZ,MADY,CACL,6FADK,CAAd;;;AAHiB,aAOjB,GAAY,EAAE,uCAAF,CAAZ,CAPiB;AAQjB,oBAAgB,EAAE,SAAF,CAAhB,CARiB;AASjB,SAAK,IAAI,GAAJ,IAAW,OAAO,OAAP,EAAgB;AAC/B,SAAI,OAAO,OAAP,CAAe,GAAf,EAAoB,SAApB,KAAkC,QAAlC,EAA4C;AAC/C,oBAAc,OAAO,cAAP,CAAsB,GAAtB,CAAd,CAD+C;AAE/C,oBAAc,MAAd,CAAqB,aAAW,WAAX,GAAuB,wCAAvB,GAAgE,GAAhE,GAAoE,YAApE,CAArB,CAF+C;MAAhD;KADD;AAMA,cAAU,MAAV,CAAiB,aAAjB,EAfiB;AAgBjB,gBAAY,MAAZ,CAAmB,SAAnB,EAhBiB;AAiBjB,gBAAY,EAAZ,CAAe,OAAf,EAAwB,iBAAxB,EAA2C,OAAO,MAAP,CAA3C,CAjBiB;IAAlB;AAmBA,KAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,qBAAtB,EApBiB;AAqBjB,KAAE,SAAS,IAAT,CAAF,CAAiB,MAAjB,CAAwB,WAAxB,EArBiB;AAsBjB,eAAY,MAAZ,GAtBiB;GAAlB,MAuBO;AACN,qBADM;GAvBP;EALe,CA/2CmC;;AAg5CnD,UAAS,eAAT,GAA2B;AAC1B,iBAAe,KAAf,CAD0B;AAE1B,MAAI,WAAJ,EAAiB;AAChB,eAAY,OAAZ,GADgB;AAEhB,KAAE,MAAF,EAAU,GAAV,CAAc,OAAd,EAAuB,qBAAvB,EAFgB;GAAjB;EAFD;;AAQA,UAAS,qBAAT,CAA+B,KAA/B,EAAsC;AACrC,MAAI,MAAM,KAAN,KAAgB,EAAhB,EAAoB;AACvB,qBADuB;GAAxB;EADD;;AAMA,QAAO,KAAP,GAAe,UAAS,SAAT,EAAoB;AAClC,MAAI,MAAC,CAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAoC,CAAC,YAAD,EAAgB;AACxD,UADwD;GAAzD;AAGA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAJsB;AAKlC,oBALkC;AAMlC,MAAI,WAAW,SAAS,QAAT,GAAoB,IAApB,GAA2B,SAAS,QAAT,GAAoB,iBAA/C,CANmB;AAOlC,aAAW,SAAX,EAAsB,QAAtB,EAPkC;EAApB,CA95CoC;;AAw6CnD,QAAO,OAAP,GAAiB,UAAS,SAAT,EAAoB;AACpC,MAAI,MAAC,CAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAoC,CAAC,YAAD,EAAgB;AACxD,UADwD;GAAzD;AAGA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAJwB;AAKpC,oBALoC;AAMpC,MAAI,WAAW,SAAS,QAAT,GAAoB,IAApB,GAA2B,SAAS,QAAT,GAAoB,qBAA/C,CANqB;AAOpC,aAAW,SAAX,EAAsB,QAAtB,EAPoC;EAApB,CAx6CkC;;AAk7CnD,QAAO,OAAP,GAAiB,UAAS,SAAT,EAAoB;AACpC,MAAI,MAAC,CAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAoC,CAAC,YAAD,EAAgB;AACxD,UADwD;GAAzD;AAGA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAJwB;AAKpC,oBALoC;AAMpC,MAAI,WAAW,SAAS,QAAT,GAAoB,IAApB,GAA2B,SAAS,QAAT,GAAoB,QAA/C,GAA0D,SAAS,YAAT,EAA1D,CANqB;AAOpC,aAAW,SAAX,EAAsB,QAAtB,EAPoC;EAApB,CAl7CkC;;AA47CnD,QAAO,SAAP,GAAmB,UAAS,SAAT,EAAoB;AACtC,MAAI,MAAC,CAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAoC,CAAC,YAAD,EAAgB;AACxD,UADwD;GAAzD;AAGA,cAAY,OAAO,SAAP,KAAqB,SAArB,GAAiC,SAAjC,GAA6C,SAA7C,CAJ0B;AAKtC,oBALsC;;AAOtC,MAAI,aAAa,CAAC,SAAS,gBAAT,EAAD,EAA8B;AAC9C,UAD8C;GAA/C;;AAIA,MAAI,UAAU,SAAS,QAAT,GAAoB,IAApB,GAA2B,SAAS,QAAT,GAAoB,GAA/C,CAXwB;AAYtC,MAAI,SAAJ,EAAe;AACd,cAAW,OAAO,SAAS,gBAAT,EAAP,CADG;GAAf;AAGA,WAAS,IAAT,GAAgB,OAAhB,CAfsC;EAApB,CA57CgC;;AA88CnD,QAAO,QAAP,GAAkB,UAAS,QAAT,EAAmB;AACpC,aAAW,OAAO,QAAP,KAAoB,SAApB,GAAgC,QAAhC,GAA2C,SAA3C,CADyB;AAEpC,MAAI,aAAa,IAAb,IAAqB,OAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAkC,CAAC,YAAD,EAAe;AACzE,UADyE;GAA1E;AAGA;;AALoC,MAOhC,OAAC,CAAQ,mBAAR,EAA6B,SAA7B,EAAD,IAA+C,QAAQ,mBAAR,EAA6B,iBAA7B,EAAiD;AACnG,YAAS,KAAT,CAAe,QAAQ,mBAAR,EAA6B,iBAA7B,CAAf,CADmG;AAEnG,UAAO,UAAP,GAFmG;GAApG,MAGO;;AAEN,OAAI,gBAAgB,QAAQ,mBAAR,EAA6B,gBAA7B,EAAhB,CAFE;AAGN,OAAI,OAAO,cAAc,IAAd,CAHL;AAIN,OAAI,IAAJ,EAAU;;AAET,aAAS,IAAT,GAAgB,KAAK,YAAL,CAAkB,MAAlB,CAAhB,CAFS;IAAV;GAPD;EAPiB,CA98CiC;;AAm+CnD,QAAO,QAAP,GAAkB,YAAW;AAC5B,MAAI,MAAC,CAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAoC,CAAC,YAAD,EAAgB;AACxD,UADwD;GAAzD;AAGA;;AAJ4B,MAMxB,QAAQ,mBAAR,EAA6B,SAA7B,EAAJ,EAA8C;AAC7C,UAAO,KAAP,CAD6C;GAA9C,MAEO;AACN,OAAI,gBAAgB,QAAQ,mBAAR,EAA6B,gBAA7B,EAAhB,CADE;AAEN,OAAI,OAAO,cAAc,IAAd,CAFL;AAGN,OAAI,IAAJ,EAAU;;AAET,aAAS,IAAT,GAAgB,KAAK,YAAL,CAAkB,MAAlB,CAAhB,CAFS;IAAV;GALD;EANiB,CAn+CiC;;AAq/CnD,UAAS,eAAT,CAAyB,KAAzB,EAAgC;AAC/B,MAAI,CAAC,KAAD,EAAQ;AACX,OAAI,WAAW,QAAQ,eAAR,EAAyB,QAAzB,EAAX,CADO;AAEX,OAAI,CAAC,QAAD,EAAW,OAAf;;AAEA,WAAQ,YAAY,SAAS,KAAT,CAJT;GAAZ;AAMA,MAAI,QAAQ,MAAM,gBAAN,CAAuB,6HAAvB,CAAR,CAP2B;;AAS/B,UAAQ,MAAM,SAAN,CAAgB,MAAhB,CAAuB,IAAvB,CAA4B,KAA5B,EAAmC,UAAS,IAAT,EAAe;AACzD,UAAQ,CAAC,SAAS,aAAT,CAAuB,IAAvB,CAAD,IAAiC,CAAC,SAAS,WAAT,CAAqB,IAArB,CAAD,CADgB;GAAf,CAA3C,CAT+B;;AAa/B,SAAO,KAAP,CAb+B;EAAhC;;AAgBA,UAAS,WAAT,CAAqB,GAArB,EAA0B;AACzB,MAAI,OAAO,OAAP,CAAe,mBAAf,CAAmC,KAAnC,EAA0C;AAC7C,OAAI,QAAQ,iBAAR,CADyC;AAE7C,OAAI,OAAO,MAAM,GAAN,CAAP,KAAsB,WAAtB,EAAmC;AACtC,QAAI,WAAW,MAAM,GAAN,CAAX,CADkC;AAEtC,QAAI,QAAC,CAAS,WAAT,IAA0B,OAAO,SAAS,WAAT,CAAqB,OAArB,KAAiC,WAAxC,IAAyD,SAAS,WAAT,CAAqB,SAArB,CAA+B,QAA/B,CAAwC,gBAAxC,CAApF,EAAgJ;AACnJ,gBAAW,SAAS,WAAT,CADwI;KAApJ;AAGA,kBAAc,QAAd,EALsC;IAAvC;GAFD;EADD;;AAaA,QAAO,sBAAP,GAAgC,YAAW;AAC1C,MAAI,OAAO,QAAQ,kBAAR,CAAP,CADsC;AAE1C,MAAI,KAAK,SAAL,EAAJ,EAAsB;AACrB,OAAI,KAAK,MAAL,EAAa;AAChB,SAAK,aAAL,GADgB;IAAjB,MAEO;AACN,SAAK,aAAL,GADM;IAFP;GADD;EAF+B,CAlhDmB;;AA6hDnD,QAAO,sBAAP,GAAgC,YAAW;AAC1C,UAAQ,kBAAR,EAA4B,MAA5B,GAD0C;EAAX,CA7hDmB;;AAiiDnD,QAAO,wBAAP,GAAkC,YAAW;AAC5C,UAAQ,kBAAR,EAA4B,QAA5B,GAD4C;EAAX,CAjiDiB;;AAqiDnD,QAAO,MAAP,GAAgB,YAAW;AAC1B,MAAI,MAAC,CAAO,OAAP,CAAe,SAAf,CAAyB,KAAzB,IAAoC,CAAC,YAAD,EAAgB;AACxD,UADwD;GAAzD;AAGA,oBAJ0B;;AAM1B,WAAS,IAAT,GAAgB,WAAhB,CAN0B;EAAX,CAriDmC;CAA3B,CAAzB","file":"modules/keyboardNav.js","sourcesContent":["addModule('keyboardNav', function(module, moduleID) {\r\n\tmodule.moduleName = 'Keyboard Navigation';\r\n\tmodule.category = [ 'Browsing' ];\r\n\tmodule.description = 'Keyboard navigation for reddit!';\r\n\tmodule.options = {\r\n\t\tmediaBrowseMode: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'If media is open on the currently selected post when moving up/down one post, open media on the next post.'\r\n\t\t},\r\n\t\tscrollOnExpando: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Scroll window to top of link when expando key is used (to keep pics etc in view)',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tscrollStyle: {\r\n\t\t\ttype: 'enum',\r\n\t\t\tvalues: [{\r\n\t\t\t\tname: 'directional',\r\n\t\t\t\tvalue: 'directional'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'page up/down',\r\n\t\t\t\tvalue: 'page'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'lock to top',\r\n\t\t\t\tvalue: 'top'\r\n\t\t\t}],\r\n\t\t\tvalue: 'directional',\r\n\t\t\tdescription: 'When moving up/down with keynav, when and how should RES scroll the window?' +\r\n\t\t\t\t'<br>Directional: Scroll just enough to bring the selected element into view, if it\\'s offscreen.' +\r\n\t\t\t\t'<br>Page up/down: Scroll up/down an entire page after reaching the top or bottom.' +\r\n\t\t\t\t'<br>Lock to top: Always align the selected element to the top of the screen.',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tcommentsLinkNumbers: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Assign number keys (e.g. [1]) to links within selected comment'\r\n\t\t},\r\n\t\tcommentsLinkNumberPosition: {\r\n\t\t\ttype: 'enum',\r\n\t\t\tvalues: [{\r\n\t\t\t\tname: 'Place on right',\r\n\t\t\t\tvalue: 'right'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'Place on left',\r\n\t\t\t\tvalue: 'left'\r\n\t\t\t}],\r\n\t\t\tvalue: 'right',\r\n\t\t\tdescription: 'Which side commentsLinkNumbers are displayed',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tcommentsLinkNewTab: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Open number key links in a new tab',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tonHideMoveDown: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'After hiding a link, automatically select the next link',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tonVoteMoveDown: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'After voting on a link, automatically select the next link',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tonVoteCommentMoveDown: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'After voting on a comment, automatically select the next comment',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tuseGoMode: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Use go mode (require go mode before \"go to\" shortcuts are used, e.g. frontpage)'\r\n\t\t},\r\n\t\tfollowLinkNewTabFocus: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'When following a link in new tab - focus the tab?',\r\n\t\t\tadvanced: true\r\n\t\t}\r\n\t};\r\n\r\n\tvar commands = {\r\n\t\ttoggleHelp: {\r\n\t\t\tvalue: [191, false, false, true], // ? (note the true in the shift slot)\r\n\t\t\tdescription: 'Show help for keyboard shortcuts'\r\n\t\t},\r\n\t\tgoMode: {\r\n\t\t\tvalue: [71, false, false, false], // g\r\n\t\t\tdescription: 'Enter \"go mode\" (next keypress goes to a location, e.g. frontpage)'\r\n\t\t},\r\n\t\ttoggleCmdLine: {\r\n\t\t\tvalue: [190, false, false, false], // .\r\n\t\t\tdescription: 'Launch RES command line',\r\n\t\t\tcallback: function() { modules['commandLine'].toggleCmdLine(); }\r\n\t\t},\r\n\t\thide: {\r\n\t\t\tinclude: [ 'linklist', 'profile' ],\r\n\t\t\tvalue: [72, false, false, false], // h\r\n\t\t\tdescription: 'Hide link'\r\n\t\t},\r\n\t\tmoveUp: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search'],\r\n\t\t\tvalue: [75, false, false, false], // k\r\n\t\t\tdescription: 'Move up to the previous link or comment in flat lists'\r\n\t\t},\r\n\t\tmoveDown: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search' ],\r\n\t\t\tvalue: [74, false, false, false], // j\r\n\t\t\tdescription: 'Move down to the next link or comment in flat lists'\r\n\t\t},\r\n\t\tmoveUpComment: {\r\n\t\t\tinclude: [ 'comments', 'inbox' ],\r\n\t\t\tvalue: [75, false, false, false], // k\r\n\t\t\tdescription: 'Move up to the previous comment on threaded comment pages'\r\n\t\t},\r\n\t\tmoveDownComment: {\r\n\t\t\tinclude: [ 'comments', 'inbox' ],\r\n\t\t\tvalue: [74, false, false, false], // j\r\n\t\t\tdescription: 'Move down to the next comment on threaded comment pages'\r\n\t\t},\r\n\t\tmoveTop: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'inbox', 'search' ],\r\n\t\t\tvalue: [75, false, false, true], // shift-k\r\n\t\t\tdescription: 'Move to top of list (on link pages)'\r\n\t\t},\r\n\t\tmoveBottom: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'inbox', 'search' ],\r\n\t\t\tvalue: [74, false, false, true], // shift-j\r\n\t\t\tdescription: 'Move to bottom of list (on link pages)'\r\n\t\t},\r\n\t\tmoveUpSibling: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [75, false, false, true], // shift-k\r\n\t\t\tdescription: 'Move to previous sibling (in comments) - skips to previous sibling at the same depth.'\r\n\t\t},\r\n\t\tmoveDownSibling: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [74, false, false, true], // shift-j\r\n\t\t\tdescription: 'Move to next sibling (in comments) - skips to next sibling at the same depth.'\r\n\t\t},\r\n\t\tmoveUpThread: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [75, true, false, true], // shift-alt-k\r\n\t\t\tdescription: 'Move to the topmost comment of the previous thread (in comments).'\r\n\t\t},\r\n\t\tmoveDownThread: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [74, true, false, true], // shift-alt-j\r\n\t\t\tdescription: 'Move to the topmost comment of the next thread (in comments).'\r\n\t\t},\r\n\t\tmoveToTopComment: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [84, false, false, false], // t\r\n\t\t\tdescription: 'Move to the topmost comment of the current thread (in comments).'\r\n\t\t},\r\n\t\tmoveToParent: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [80, false, false, false], // p\r\n\t\t\tdescription: 'Move to parent (in comments).'\r\n\t\t},\r\n\t\tshowParents: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [80, false, false, true], // p\r\n\t\t\tdescription: 'Display parent comments.'\r\n\t\t},\r\n\t\tfollowLink: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search' ],\r\n\t\t\tvalue: [13, false, false, false], // enter\r\n\t\t\tdescription: 'Follow link (hold shift to open it in a new tab) (link pages only)'\r\n\t\t},\r\n\t\tfollowLinkNewTab: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'comments',  'search' ],\r\n\t\t\tvalue: [13, false, false, true], // shift-enter\r\n\t\t\tdescription: 'Follow link in new tab (link pages only)',\r\n\t\t\tcallback: function() {\r\n\t\t\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\t\t\tif (!selected) return;\r\n\r\n\t\t\t\tif (!RESUtils.isPageType('comments') || selected.thing.classList.contains('link')) {\r\n\t\t\t\t\tmodule.followLink(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoggleExpando: {\r\n\t\t\tvalue: [88, false, false, false], // x\r\n\t\t\tdescription: 'Toggle expando (image/text/video) (link pages only)',\r\n\t\t\tcallback: function() {\r\n\t\t\t\tif (RESUtils.isPageType('comments')) {\r\n\t\t\t\t\ttoggleAllExpandos();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmodule.toggleExpando();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\timageSizeUp: {\r\n\t\t\tvalue: [187, false, false, false], // = -- 61 in firefox\r\n\t\t\tdescription: 'Increase the size of image(s) in the highlighted post area'\r\n\t\t},\r\n\t\timageSizeDown: {\r\n\t\t\tvalue: [189, false, false, false], // - -- 173 in firefox\r\n\t\t\tdescription: 'Decrease the size of image(s) in the highlighted post area'\r\n\t\t},\r\n\t\timageSizeUpFine: {\r\n\t\t\tvalue: [187, false, false, true], // shift-=\r\n\t\t\tdescription: 'Increase the size of image(s) in the highlighted post area (finer control)',\r\n\t\t\tcallback: function() { module.imageSizeUp(true); }\r\n\t\t},\r\n\t\timageSizeDownFine: {\r\n\t\t\tvalue: [189, false, false, true], // shift--\r\n\t\t\tdescription: 'Decrease the size of image(s) in the highlighted post area (finer control)',\r\n\t\t\tcallback: function() { module.imageSizeDown(true); }\r\n\t\t},\r\n\t\timageMoveUp: {\r\n\t\t\tvalue: [38, false, true, false], // ctrl-up\r\n\t\t\tdescription: 'Move the image(s) in the highlighted post area up'\r\n\t\t},\r\n\t\timageMoveDown: {\r\n\t\t\tvalue: [40, false, true, false], // ctrl-down\r\n\t\t\tdescription: 'Move the image(s) in the highlighted post area down'\r\n\t\t},\r\n\t\timageMoveLeft: {\r\n\t\t\tvalue: [37, false, true, false], // ctrl-left\r\n\t\t\tdescription: 'Move the image(s) in the highlighted post area left'\r\n\t\t},\r\n\t\timageMoveRight: {\r\n\t\t\tvalue: [39, false, true, false], // ctrl-right\r\n\t\t\tdescription: 'Move the image(s) in the highlighted post area right'\r\n\t\t},\r\n\t\tpreviousGalleryImage: {\r\n\t\t\tvalue: [219, false, false, false], // [\r\n\t\t\tdescription: 'View the previous image of an inline gallery.'\r\n\t\t},\r\n\t\tnextGalleryImage: {\r\n\t\t\tvalue: [221, false, false, false], // ]\r\n\t\t\tdescription: 'View the next image of an inline gallery.'\r\n\t\t},\r\n\t\ttoggleViewImages: {\r\n\t\t\tvalue: [88, false, false, true], // shift-x\r\n\t\t\tdescription: 'Toggle \"view images\" button',\r\n\t\t},\r\n\t\ttoggleChildren: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [13, false, false, false], // enter\r\n\t\t\tdescription: 'Expand/collapse comments (comments pages only)'\r\n\t\t},\r\n\t\tfollowComments: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search' ],\r\n\t\t\tvalue: [67, false, false, false], // c\r\n\t\t\tdescription: 'View comments for link (shift opens them in a new tab)'\r\n\t\t},\r\n\t\tfollowCommentsNewTab: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search' ],\r\n\t\t\tvalue: [67, false, false, true], // shift-c\r\n\t\t\tdescription: 'View comments for link in a new tab',\r\n\t\t\tcallback: function() { module.followComments(true); }\r\n\t\t},\r\n\t\tfollowLinkAndCommentsNewTab: {\r\n\t\t\tinclude: [ 'linklist', 'profile' ],\r\n\t\t\tvalue: [76, false, false, false], // l\r\n\t\t\tdescription: 'View link and comments in new tabs',\r\n\t\t\tcallback: function() { followLinkAndComments(); }\r\n\t\t},\r\n\t\tfollowLinkAndCommentsNewTabBG: {\r\n\t\t\tinclude: [ 'linklist', 'profile' ],\r\n\t\t\tvalue: [76, false, false, true], // shift-l\r\n\t\t\tdescription: 'View link and comments in new background tabs',\r\n\t\t\tcallback: function() { followLinkAndComments(true); }\r\n\t\t},\r\n\t\tupVote: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'comments', 'search' /* for now */ ],\r\n\t\t\tvalue: [65, false, false, false], // a\r\n\t\t\tdescription: 'Upvote selected link or comment (or remove the upvote)'\r\n\t\t},\r\n\t\tdownVote: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'comments', 'search' /* for now */ ],\r\n\t\t\tvalue: [90, false, false, false], // z\r\n\t\t\tdescription: 'Downvote selected link or comment (or remove the downvote)'\r\n\t\t},\r\n\t\tupVoteWithoutToggling: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'comments', 'search' /* for now */],\r\n\t\t\tvalue: [65, false, false, true], // a\r\n\t\t\tdescription: 'Upvote selected link or comment (but don\\'t remove the upvote)',\r\n\t\t\tcallback: function() { module.upVote(true); }\r\n\t\t},\r\n\t\tdownVoteWithoutToggling: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'comments', 'search' /* for now */ ],\r\n\t\t\tvalue: [90, false, false, true], // z\r\n\t\t\tdescription: 'Downvote selected link or comment (but don\\'t remove the downvote)',\r\n\t\t\tcallback: function() { module.downVote(true); }\r\n\t\t},\r\n\t\tsavePost: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'comments' ],\r\n\t\t\tvalue: [83, false, false, false], // s\r\n\t\t\tdescription: 'Save the current post to your reddit account. This is accessible from anywhere that you\\'re logged in, but does not preserve the original text if it\\'s edited or deleted.',\r\n\t\t\tcallback: function() { module.saveLink(); }\r\n\t\t},\r\n\t\tsaveComment: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [83, false, false, true], // shift-s\r\n\t\t\tdescription: 'Save the current comment to your reddit account. This is accessible from anywhere that you\\'re logged in, but does not preserve the original text if it\\'s edited or deleted.'\r\n\t\t},\r\n\t\tsaveRES: {\r\n\t\t\tinclude: [ 'comments', 'profile' ],\r\n\t\t\tvalue: [83, false, false, false], // s\r\n\t\t\tdescription: 'Save the current comment with RES. This does preserve the original text of the comment, but is only saved locally.',\r\n\t\t\tcallback: function() { module.saveCommentRES(); }\r\n\t\t},\r\n\t\treply: {\r\n\t\t\tinclude: [ 'comments', 'inbox' ],\r\n\t\t\tvalue: [82, false, false, false], // r\r\n\t\t\tdescription: 'Reply to current comment (comment pages only)'\r\n\t\t},\r\n\t\tfollowPermalink: {\r\n\t\t\tinclude: [ 'comments', 'inbox' ],\r\n\t\t\tvalue: [89, false, false, false], // y\r\n\t\t\tdescription: 'Open the current comment\\'s permalink (comment pages only)'\r\n\t\t},\r\n\t\tfollowPermalinkNewTab: {\r\n\t\t\tinclude: [ 'comments' ],\r\n\t\t\tvalue: [89, false, false, true], // shift-y\r\n\t\t\tdescription: 'Open the current comment\\'s permalink in a new tab (comment pages only)',\r\n\t\t\tcallback: function() { module.followPermalink(true); }\r\n\t\t},\r\n\t\tfollowSubreddit: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search' ],\r\n\t\t\tvalue: [82, false, false, false], // r\r\n\t\t\tdescription: 'Go to subreddit of selected link (link pages only)'\r\n\t\t},\r\n\t\tfollowSubredditNewTab: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'search' ],\r\n\t\t\tvalue: [82, false, false, true], // shift-r\r\n\t\t\tdescription: 'Go to subreddit of selected link in a new tab (link pages only)',\r\n\t\t\tcallback: function() { module.followSubreddit(true); }\r\n\t\t},\r\n\t\tinbox: {\r\n\t\t\tvalue: [73, false, false, false], // i\r\n\t\t\tdescription: 'Go to inbox',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tinboxNewTab: {\r\n\t\t\tvalue: [73, false, false, true], // shift+i\r\n\t\t\tdescription: 'Go to inbox in a new tab',\r\n\t\t\tdependsOn: 'goMode',\r\n\t\t\tcallback: function() { module.inbox(true); }\r\n\t\t},\r\n\t\tmodmail: {\r\n\t\t\tvalue: [77, false, false, false], // m\r\n\t\t\tdescription: 'Go to modmail',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tmodmailNewTab: {\r\n\t\t\tvalue: [77, false, false, true], // shift+m\r\n\t\t\tdescription: 'Go to modmail in a new tab',\r\n\t\t\tdependsOn: 'goMode',\r\n\t\t\tcallback: function() { module.modmail(true); }\r\n\t\t},\r\n\t\tprofile: {\r\n\t\t\tvalue: [85, false, false, false], // u\r\n\t\t\tdescription: 'Go to profile',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tprofileNewTab: {\r\n\t\t\tvalue: [85, false, false, true], // shift+u\r\n\t\t\tdescription: 'Go to profile in a new tab',\r\n\t\t\tdependsOn: 'goMode',\r\n\t\t\tcallback: function() { module.profile(true); }\r\n\t\t},\r\n\t\tfrontPage: {\r\n\t\t\tvalue: [70, false, false, false], // f\r\n\t\t\tdescription: 'Go to front page',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tsubredditFrontPage: {\r\n\t\t\tvalue: [70, false, false, true], // shift-f\r\n\t\t\tdescription: 'Go to subreddit front page',\r\n\t\t\tdependsOn: 'goMode',\r\n\t\t\tcallback: function() { module.frontPage(true); }\r\n\t\t},\r\n\t\trandom: {\r\n\t\t\tvalue: [89, true, false, false], // alt-y   SO RANDOM\r\n\t\t\tdescription: 'Go to a random subreddit',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tnextPage: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'inbox' ],\r\n\t\t\tvalue: [78, false, false, false], // n\r\n\t\t\tdescription: 'Go to next page (link list pages only)',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tprevPage: {\r\n\t\t\tinclude: [ 'linklist', 'profile', 'inbox' ],\r\n\t\t\tvalue: [80, false, false, false], // p\r\n\t\t\tdescription: 'Go to prev page (link list pages only)',\r\n\t\t\tdependsOn: 'goMode'\r\n\t\t},\r\n\t\tlink1: {\r\n\t\t\tvalue: [49, false, false, false], // 1\r\n\t\t\tdescription: 'Open first link within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(0); }\r\n\t\t},\r\n\t\tlink2: {\r\n\t\t\tvalue: [50, false, false, false], // 2\r\n\t\t\tdescription: 'Open link #2 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(1); }\r\n\t\t},\r\n\t\tlink3: {\r\n\t\t\tvalue: [51, false, false, false], // 3\r\n\t\t\tdescription: 'Open link #3 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(2); }\r\n\t\t},\r\n\t\tlink4: {\r\n\t\t\tvalue: [52, false, false, false], // 4\r\n\t\t\tdescription: 'Open link #4 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(3); }\r\n\t\t},\r\n\t\tlink5: {\r\n\t\t\tvalue: [53, false, false, false], // 5\r\n\t\t\tdescription: 'Open link #5 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(4); }\r\n\t\t},\r\n\t\tlink6: {\r\n\t\t\tvalue: [54, false, false, false], // 6\r\n\t\t\tdescription: 'Open link #6 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(5); }\r\n\t\t},\r\n\t\tlink7: {\r\n\t\t\tvalue: [55, false, false, false], // 7\r\n\t\t\tdescription: 'Open link #7 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(6); }\r\n\t\t},\r\n\t\tlink8: {\r\n\t\t\tvalue: [56, false, false, false], // 8\r\n\t\t\tdescription: 'Open link #8 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(7); }\r\n\t\t},\r\n\t\tlink9: {\r\n\t\t\tvalue: [57, false, false, false], // 9\r\n\t\t\tdescription: 'Open link #9 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(8); }\r\n\t\t},\r\n\t\tlink10: {\r\n\t\t\tvalue: [48, false, false, false], // 0\r\n\t\t\tdescription: 'Open link #10 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(9); }\r\n\t\t},\r\n\t\tlink1NumPad: {\r\n\t\t\tvalue: [97, false, false, false], // 1\r\n\t\t\tdescription: 'Open first link within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(0); }\r\n\t\t},\r\n\t\tlink2NumPad: {\r\n\t\t\tvalue: [98, false, false, false], // 2\r\n\t\t\tdescription: 'Open link #2 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(1); }\r\n\t\t},\r\n\t\tlink3NumPad: {\r\n\t\t\tvalue: [99, false, false, false], // 3\r\n\t\t\tdescription: 'Open link #3 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(2); }\r\n\t\t},\r\n\t\tlink4NumPad: {\r\n\t\t\tvalue: [100, false, false, false], // 4\r\n\t\t\tdescription: 'Open link #4 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(3); }\r\n\t\t},\r\n\t\tlink5NumPad: {\r\n\t\t\tvalue: [101, false, false, false], // 5\r\n\t\t\tdescription: 'Open link #5 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(4); }\r\n\t\t},\r\n\t\tlink6NumPad: {\r\n\t\t\tvalue: [102, false, false, false], // 6\r\n\t\t\tdescription: 'Open link #6 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(5); }\r\n\t\t},\r\n\t\tlink7NumPad: {\r\n\t\t\tvalue: [103, false, false, false], // 7\r\n\t\t\tdescription: 'Open link #7 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(6); }\r\n\t\t},\r\n\t\tlink8NumPad: {\r\n\t\t\tvalue: [104, false, false, false], // 8\r\n\t\t\tdescription: 'Open link #8 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(7); }\r\n\t\t},\r\n\t\tlink9NumPad: {\r\n\t\t\tvalue: [105, false, false, false], // 9\r\n\t\t\tdescription: 'Open link #9 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(8); }\r\n\t\t},\r\n\t\tlink10NumPad: {\r\n\t\t\tvalue: [96, false, false, false], // 0\r\n\t\t\tdescription: 'Open link #10 within comment.',\r\n\t\t\tnoconfig: true,\r\n\t\t\tcallback: function() { commentLink(9); }\r\n\t\t},\r\n\t\ttoggleCommentNavigator: {\r\n\t\t\tinclude: 'comments',\r\n\t\t\tvalue: [78, false, false, false], // N\r\n\t\t\tdescription: 'Open Comment Navigator'\r\n\t\t},\r\n\t\tcommentNavigatorMoveUp: {\r\n\t\t\tinclude: 'comments',\r\n\t\t\tvalue: [38, false, false, true], // shift+up arrow\r\n\t\t\tdescription: 'Move up using Comment Navigator'\r\n\t\t},\r\n\t\tcommentNavigatorMoveDown: {\r\n\t\t\tinclude: 'comments',\r\n\t\t\tvalue: [40, false, false, true], // shift+down arrow\r\n\t\t\tdescription: 'Move down using Comment Navigator'\r\n\t\t}\r\n\t};\r\n\tmodule.loadDynamicOptions = function() {\r\n\t\t$.each(commands, registerCommand);\r\n\t};\r\n\tmodule.beforeLoad = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tregisterCommandLine();\r\n\t\t\tregisterSelectedThingWatcher();\r\n\t\t}\r\n\t};\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\r\n\t\t\twindow.addEventListener('keydown', function(e) {\r\n\t\t\t\tif (handleKeyPress(e)) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction registerCommandLine() {\r\n\t\tmodules['commandLine'].registerCommand(/\\d+/, '[number] - navigates to the link with that number (comments pages) or rank (link pages)',\r\n\t\t\tfunction(command, val, match) {},\r\n\t\t\tfunction(command, val, match, e) {\r\n\r\n\t\t\t\tif (RESUtils.isPageType('comments')) {\r\n\t\t\t\t\t// comment link number? (integer)\r\n\t\t\t\t\tcommentLink(parseInt(command, 10) - 1);\r\n\t\t\t\t} else if (RESUtils.isPageType('linklist')) {\r\n\t\t\t\t\tvar targetRank = parseInt(command, 10);\r\n\t\t\t\t\tfollowLinkByRank(targetRank);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction registerSelectedThingWatcher() {\r\n\t\tmodules['selectedEntry'].addListener(updateAnnotations);\r\n\t}\r\n\r\n\tfunction registerCommand(commandName, spec) {\r\n\t\tif (!spec.callback) {\r\n\t\t\tif (module[commandName]) {\r\n\t\t\t\tspec.callback = module[commandName].bind(module);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('No callback for keyboardNav command', commandName);\r\n\t\t\t\tspec.callback = function() {\r\n\t\t\t\t\tconsole.warn('No callback for keyboardNav command', commandName);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmodule.options[commandName] = $.extend(true,\r\n\t\t\t{ type: 'keycode' },\r\n\t\t\tmodule.options[commandName],\r\n\t\t\tspec\r\n\t\t);\r\n\t}\r\n\r\n\tfunction promptLogin() {\r\n\t\tif (!RESUtils.loggedInUser()) {\r\n\t\t\tvar loginButton = document.querySelector('#header .login-required');\r\n\t\t\tif (loginButton) {\r\n\t\t\t\tRESUtils.click(loginButton);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\tvar recentKeyTimer;\r\n\r\n\tfunction recentKey() {\r\n\t\tmodule.recentKeyPress = true;\r\n\t\tclearTimeout(recentKeyTimer);\r\n\t\trecentKeyTimer = setTimeout(function() {\r\n\t\t\tmodule.recentKeyPress = false;\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\tfunction updateAnnotations(selected, last) {\r\n\t\tif (selected && RESUtils.isPageType('comments') && module.options.commentsLinkNumbers.value) {\r\n\t\t\tvar links = getCommentLinks(selected.entry);\r\n\t\t\tvar annotationCount = 0;\r\n\t\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\t\tvar annotation = document.createElement('span');\r\n\t\t\t\tannotationCount++;\r\n\t\t\t\tannotation.classList.add('noCtrlF');\r\n\t\t\t\tannotation.setAttribute('data-text', '[' + annotationCount + '] ');\r\n\t\t\t\tif (annotationCount <= 9) {\r\n\t\t\t\t\tannotation.title = 'press ' + annotationCount + ' to open link';\r\n\t\t\t\t} else if (annotationCount === 10) {\r\n\t\t\t\t\tannotation.title = 'press 0 to open link';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tannotation.title = 'press ' + module.getNiceKeyCode('toggleCmdLine') + ' then ' +annotationCount + ' and Enter to open link';\r\n\t\t\t\t}\r\n\t\t\t\tannotation.classList.add('keyNavAnnotation');\r\n\t\t\t\tif (module.options.commentsLinkNumberPosition.value === 'right') {\r\n\t\t\t\t\tRESUtils.insertAfter(links[i], annotation);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlinks[i].parentNode.insertBefore(annotation, links[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (last && RESUtils.isPageType('comments')) {\r\n\t\t\tvar annotations = last.entry.querySelectorAll('div.md .keyNavAnnotation');\r\n\t\t\t$(annotations).remove();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleKeyLink(link) {\r\n\t\tif (link.classList.contains('toggleImage')) {\r\n\t\t\tRESUtils.click(link);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar thisURL = link.getAttribute('href'),\r\n\t\t\tbutton = (module.options.followLinkNewTabFocus.value) ? 0 : 1;\r\n\r\n\t\tif (module.options.commentsLinkNewTab.value) {\r\n\t\t\tvar thisJSON = {\r\n\t\t\t\trequestType: 'keyboardNav',\r\n\t\t\t\tlinkURL: thisURL,\r\n\t\t\t\tbutton: button\r\n\t\t\t};\r\n\r\n\t\t\tRESEnvironment.sendMessage(thisJSON);\r\n\t\t} else {\r\n\t\t\tlocation.href = this.getAttribute('href');\r\n\t\t}\r\n\t}\r\n\r\n\tvar keyHelp, helpDrawn;\r\n\r\n\tfunction drawHelp() {\r\n\t\tkeyHelp = RESUtils.createElement('div', 'keyHelp');\r\n\t\tvar helpTable = document.createElement('table');\r\n\t\tkeyHelp.appendChild(helpTable);\r\n\t\tvar helpTableHeader = document.createElement('thead');\r\n\t\tvar helpTableHeaderRow = document.createElement('tr');\r\n\t\tvar helpTableHeaderKey = document.createElement('th');\r\n\t\t$(helpTableHeaderKey).text('Key');\r\n\t\thelpTableHeaderRow.appendChild(helpTableHeaderKey);\r\n\t\tvar helpTableHeaderFunction = document.createElement('th');\r\n\t\t$(helpTableHeaderFunction).text('Function');\r\n\t\thelpTableHeaderRow.appendChild(helpTableHeaderFunction);\r\n\t\thelpTableHeader.appendChild(helpTableHeaderRow);\r\n\t\thelpTable.appendChild(helpTableHeader);\r\n\t\tvar helpTableBody = document.createElement('tbody');\r\n\t\tvar isLink = /^link[\\d]+$/i;\r\n\t\tfor (var i in module.options) {\r\n\t\t\tif ((module.options[i].type === 'keycode') && (!isLink.test(i))) {\r\n\t\t\t\tvar thisRow = document.createElement('tr');\r\n\t\t\t\tvar thisRowKey = document.createElement('td');\r\n\t\t\t\tvar thisKeyCode = module.getNiceKeyCode(i);\r\n\t\t\t\tif (module.options[i].dependsOn && module.options[module.options[i].dependsOn].type === 'keycode' ) {\r\n\t\t\t\t\tthisKeyCode = [ module.getNiceKeyCode(module.options[i].dependsOn), thisKeyCode ].join(', ');\r\n\t\t\t\t}\r\n\t\t\t\t$(thisRowKey).text(thisKeyCode);\r\n\t\t\t\tthisRow.appendChild(thisRowKey);\r\n\t\t\t\tvar thisRowDesc = document.createElement('td');\r\n\t\t\t\t$(thisRowDesc).text(module.options[i].description);\r\n\t\t\t\tthisRow.appendChild(thisRowDesc);\r\n\t\t\t\thelpTableBody.appendChild(thisRow);\r\n\t\t\t}\r\n\t\t}\r\n\t\thelpTable.appendChild(helpTableBody);\r\n\t\tdocument.body.appendChild(keyHelp);\r\n\t\thelpDrawn = true;\r\n\t}\r\n\r\n\tmodule.getNiceKeyCode = function(optionKey) {\r\n\t\tvar keyCodeArray = module.options[optionKey].value;\r\n\t\tif (!keyCodeArray) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (typeof keyCodeArray === 'string') {\r\n\t\t\tkeyCodeArray = parseInt(keyCodeArray, 10);\r\n\t\t}\r\n\t\tif (typeof keyCodeArray === 'number') {\r\n\t\t\tkeyCodeArray = [keyCodeArray, false, false, false, false];\r\n\t\t}\r\n\t\tvar niceKeyCode = RESUtils.niceKeyCode(keyCodeArray);\r\n\t\treturn niceKeyCode;\r\n\t};\r\n\r\n\tvar _commandLookup;\r\n\r\n\tfunction getCommandsForKeyEvent(keyEvent) {\r\n\t\tif (!_commandLookup) {\r\n\t\t\tvar lookup = {};\r\n\t\t\t$.each(module.options, function(name, option) {\r\n\t\t\t\tif (option.type !== 'keycode') return;\r\n\t\t\t\tif (!option.callback) return;\r\n\t\t\t\tif (!RESUtils.matchesPageLocation(option.include, option.exclude)) return;\r\n\r\n\t\t\t\tvar hash = RESUtils.hashKeyArray(option.value);\r\n\t\t\t\tif (!lookup[hash]) {\r\n\t\t\t\t\tlookup[hash] = $.Callbacks();\r\n\t\t\t\t}\r\n\t\t\t\tlookup[hash].add(option.callback);\r\n\t\t\t});\r\n\t\t\t_commandLookup = lookup;\r\n\t\t}\r\n\r\n\t\tvar hash = RESUtils.hashKeyEvent(keyEvent);\r\n\t\tvar callbacks = _commandLookup[hash];\r\n\r\n\t\treturn callbacks;\r\n\t}\r\n\r\n\tfunction handleKeyPress(e) {\r\n\t\tvar konamitest = !modules['easterEgg'].konamiActive();\r\n\t\tif ((document.activeElement.tagName === 'BODY') && (konamitest)) {\r\n\t\t\tvar callbacks = getCommandsForKeyEvent(e);\r\n\t\t\tif (callbacks) {\r\n\t\t\t\tcallbacks.fire(e);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.toggleHelp = function() {\r\n\t\tif (keyHelp && keyHelp.style.display === 'block') {\r\n\t\t\thideHelp();\r\n\t\t} else {\r\n\t\t\tshowHelp();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction showHelp() {\r\n\t\t// show help!\r\n\t\tif (!helpDrawn) {\r\n\t\t\tdrawHelp();\r\n\t\t}\r\n\t\tRESUtils.fadeElementIn(keyHelp, 0.3);\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(false, 'keyboardnavhelp');\r\n\t}\r\n\r\n\tfunction hideHelp() {\r\n\t\t// hide help!\r\n\t\tRESUtils.fadeElementOut(keyHelp, 0.3);\r\n\t\tmodules['styleTweaks'].setSRStyleToggleVisibility(true, 'keyboardnavhelp');\r\n\t}\r\n\r\n\tmodule.hide = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\t// find the hide link and click it...\r\n\t\tvar hideLink = selected.entry.querySelector('form.hide-button > span > a');\r\n\t\tRESUtils.click(hideLink);\r\n\t\t// if ((module.options.onHideMoveDown.value) && (!modules['betteReddit'].options.fixHideLink.value)) {\r\n\t\tif (module.options.onHideMoveDown.value) {\r\n\t\t\tmodule.moveDown();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.followSubreddit = function(newWindow) {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\r\n\t\t// find the subreddit link and click it...\r\n\t\tvar srLink = selected.getSubredditLink();\r\n\t\tif (srLink) {\r\n\t\t\tvar thisHREF = srLink.getAttribute('href');\r\n\t\t\tif (newWindow) {\r\n\t\t\t\tvar button = (module.options.followLinkNewTabFocus.value) ? 0 : 1,\r\n\t\t\t\t\tthisJSON = {\r\n\t\t\t\t\t\trequestType: 'keyboardNav',\r\n\t\t\t\t\t\tlinkURL: thisHREF,\r\n\t\t\t\t\t\tbutton: button\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\tRESEnvironment.sendMessage(thisJSON);\r\n\t\t\t} else {\r\n\t\t\t\tlocation.href = thisHREF;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.moveUp = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\t_moveUp(selected.thing);\r\n\t};\r\n\r\n\tmodule.moveUpComment = function() {\r\n\t\tmodule.moveUp();\r\n\t};\r\n\r\n\tfunction _moveUp(fromThing) {\r\n\t\tvar current = fromThing;\r\n\t\tvar things = modules['selectedEntry'].selectableThings();\r\n\t\tvar index = things.index(current);\r\n\r\n\t\tvar target;\r\n\t\tvar targetIndex = Math.max(1, index);\r\n\t\tdo {\r\n\t\t\ttargetIndex--;\r\n\t\t\ttarget = things[targetIndex];\r\n\t\t} while (target && $(target).is('.collapsed .thing'));\r\n\r\n\t\tif (module.mediaBrowseMode(target, fromThing)) {\r\n\t\t\t_moveToThing(target, { scrollStyle: 'top' });\r\n\t\t} else {\r\n\t\t\t_moveToThing(target, {\r\n\t\t\t\tscrollStyle: module.options.scrollStyle.value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\trecentKey();\r\n\t}\r\n\r\n\tmodule.moveDown = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\t_moveDown(selected.thing);\r\n\t};\r\n\r\n\tmodule.moveDownComment = function() {\r\n\t\tmodule.moveDown();\r\n\t};\r\n\r\n\tfunction _moveDown(fromThing) {\r\n\t\tvar current = fromThing;\r\n\t\tvar things = modules['selectedEntry'].selectableThings();\r\n\t\tvar index = things.index(current);\r\n\r\n\t\tvar target;\r\n\t\tvar targetIndex = Math.min(index, things.length - 2);\r\n\t\tdo {\r\n\t\t\ttargetIndex++;\r\n\t\t\ttarget = things[targetIndex];\r\n\t\t} while (target && $(target).is('.collapsed .thing'));\r\n\r\n\t\tif (module.mediaBrowseMode(target, fromThing)) {\r\n\t\t\tmodules['selectedEntry'].select(target, { scrollStyle: 'top' });\r\n\t\t} else {\r\n\t\t\tmodules['selectedEntry'].select(target, {\r\n\t\t\t\tscrollStyle: module.options.scrollStyle.value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// note: we don't want to go to the next page if we're on the dashboard...\r\n\t\tif (\r\n\t\t\t(!RESUtils.currentSubreddit('dashboard')) &&\r\n\t\t\tRESUtils.isPageType('linklist') &&\r\n\t\t\tthings.index(target) + 2 > things.length && // moving down near the bottom of the list\r\n\t\t\tmodules['neverEndingReddit'].isEnabled() &&\r\n\t\t\tmodules['neverEndingReddit'].options.autoLoad.value\r\n\t\t) {\r\n\t\t\tmodule.nextPage(true);\r\n\t\t}\r\n\t\trecentKey();\r\n\t}\r\n\r\n\tmodule.moveTop = function() {\r\n\t\tvar things = modules['selectedEntry'].selectableThings();\r\n\t\tvar target = things.first();\r\n\t\tmodules['selectedEntry'].select(target);\r\n\t\trecentKey();\r\n\t};\r\n\r\n\tmodule.moveBottom = function() {\r\n\t\tvar things = modules['selectedEntry'].selectableThings();\r\n\t\tvar target = things.last();\r\n\t\tmodules['selectedEntry'].select(target, { scrollStyle: 'top' });\r\n\t\trecentKey();\r\n\t};\r\n\r\n\tfunction _moveToThing(target, options) {\r\n\t\tvar collapsed = $(target).parents('.collapsed.thing');\r\n\t\tif (collapsed.length) {\r\n\t\t\ttarget = collapsed.last()[0];\r\n\t\t}\r\n\r\n\t\tmodules['selectedEntry'].select(target, options);\r\n\t\trecentKey();\r\n\t}\r\n\r\n\tmodule.moveDownSibling = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar current = $(selected.thing);\r\n\r\n\t\tvar target;\r\n\t\tdo {\r\n\t\t\ttarget = current.nextAll('.thing').first()[0];\r\n\t\t\tif (!target) {\r\n\t\t\t\tcurrent = current.parent().closest('.thing');\r\n\t\t\t}\r\n\t\t} while (!target && current.length);\r\n\r\n\t\t_moveToThing(target, { scrollStyle: 'top' });\r\n\t};\r\n\r\n\tmodule.moveUpSibling = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar current = $(selected.thing);\r\n\r\n\t\tvar target = current.prevAll('.thing').first()[0];\r\n\t\tif (!target) {\r\n\t\t\ttarget = current.parent().closest('.thing')[0];\r\n\t\t}\r\n\r\n\t\t_moveToThing(target, { scrollStyle: 'top' });\r\n\t};\r\n\r\n\tmodule.moveUpThread = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar current = $(selected.thing).parents('.thing').last();\r\n\t\tif (!current.length) {\r\n\t\t\tcurrent = $(selected.thing).closest('.thing');\r\n\t\t}\r\n\r\n\t\tvar target = current.prevAll('.thing').first()[0];\r\n\t\tif (!target) {\r\n\t\t\t_moveUp(current);\r\n\t\t} else {\r\n\t\t\t_moveToThing(target, { scrollStyle: 'top' });\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.moveDownThread = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar current = $(selected.thing).parents('.thing').last();\r\n\t\tif (!current.length) {\r\n\t\t\tcurrent = $(selected.thing).closest('.thing');\r\n\t\t}\r\n\r\n\t\tvar target = current.nextAll('.thing').first()[0];\r\n\t\tif (target) {\r\n\t\t\t_moveToThing(target, { scrollStyle: 'top' });\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.moveToTopComment = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\t\tvar target = $(selected.thing).parents('.thing').last();\r\n\r\n\t\t_moveToThing(target, { scrollStyle: 'top' });\r\n\t};\r\n\r\n\tmodule.moveToParent = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar target = $(selected.thing).parent().closest('.thing');\r\n\t\t_moveToThing(target);\r\n\t};\r\n\r\n\tmodule.showParents = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar button = selected.entry.querySelector('.buttons .bylink[href^=\"#\"]');\r\n\t\tif (button) {\r\n\t\t\tmodules['hover'].infocard('showParent')\r\n\t\t\t\t.target(button)\r\n\t\t\t\t.populateWith(modules['showParent'].showCommentHover)\r\n\t\t\t\t.begin();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.toggleChildren = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tif (selected.thing.classList.contains('link')) {\r\n\t\t\t// Ahh, we're not in a comment, but in the main story... that key should follow the link.\r\n\t\t\tmodule.followLink();\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\t// find out if this is a collapsed or uncollapsed view...\r\n\t\t\tvar thisToggle, moreComments, contThread;\r\n\r\n\t\t\tthisToggle = selected.entry.querySelector('a.expand');\r\n\r\n\t\t\t// check if this is a \"show more comments\" box, or just contracted content...\r\n\t\t\tmoreComments = selected.entry.querySelector('span.morecomments > a');\r\n\t\t\tif (moreComments) {\r\n\t\t\t\tthisToggle = moreComments;\r\n\t\t\t}\r\n\r\n\t\t\t// 'continue this thread' links\r\n\t\t\tcontThread = selected.entry.querySelector('span.deepthread > a');\r\n\t\t\tif (contThread) {\r\n\t\t\t\tthisToggle = contThread;\r\n\t\t\t}\r\n\r\n\t\t\tRESUtils.click(thisToggle);\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.toggleExpando = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar thisExpando = selected.getExpandoButton();\r\n\t\tif (thisExpando) {\r\n\t\t\tRESUtils.click(thisExpando);\r\n\t\t\tif (module.options.scrollOnExpando.value) {\r\n\t\t\t\tRESUtils.scrollToElement(selected.thing, { scrollStyle: 'top' });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar mediaBrowseModeExpanded = false;\r\n\r\n\tmodule.mediaBrowseMode = function(newThing, oldThing) {\r\n\t\tif (!oldThing || !newThing) return;\r\n\t\tif (RESUtils.isPageType('linklist', 'search') && module.options.mediaBrowseMode.value && !modules['showImages'].haltMediaBrowseMode) {\r\n\t\t\tvar oldExpando = oldThing && RESUtils.thing(oldThing).entry.querySelector('.expando-button');\r\n\t\t\tvar newExpando = newThing && RESUtils.thing(newThing).entry.querySelector('.expando-button');\r\n\t\t\tif (oldExpando) {\r\n\t\t\t\tmediaBrowseModeExpanded = oldExpando.classList.contains('expanded');\r\n\t\t\t\tif (mediaBrowseModeExpanded) {\r\n\t\t\t\t\tRESUtils.click(oldExpando);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (newExpando && mediaBrowseModeExpanded && !newExpando.classList.contains('expanded')) {\r\n\t\t\t\tRESUtils.click(newExpando);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction imageResize(factor) {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar images = $(selected.entry).find('.RESImage, .madeVisible video'),\r\n\t\t\tthisWidth;\r\n\r\n\t\tfor (var i = 0, len = images.length; i < len; i++) {\r\n\t\t\tthisWidth = $(images[i]).width();\r\n\t\t\tmodules['showImages'].resizeMedia(images[i], thisWidth + factor);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.imageSizeUp = function(fineControl) {\r\n\t\tfineControl = typeof fineControl === 'boolean' ? fineControl : undefined;\r\n\t\tvar factor = (fineControl) ? 50 : 150;\r\n\t\timageResize(factor);\r\n\t};\r\n\r\n\tmodule.imageSizeDown = function(fineControl) {\r\n\t\tfineControl = typeof fineControl === 'boolean' ? fineControl : undefined;\r\n\t\tvar factor = (fineControl) ? -50 : -150;\r\n\t\timageResize(factor);\r\n\t};\r\n\r\n\tmodule.imageMoveUp = function() {\r\n\t\timageMove(0, -50);\r\n\t};\r\n\r\n\tmodule.imageMoveDown = function() {\r\n\t\timageMove(0, 50);\r\n\t};\r\n\r\n\tmodule.imageMoveLeft = function() {\r\n\t\timageMove(-50, 0);\r\n\t};\r\n\r\n\tmodule.imageMoveRight = function() {\r\n\t\timageMove(50, 0);\r\n\t};\r\n\r\n\tfunction imageMove(deltaX, deltaY) {\r\n\t\tvar images = $(document).find('.RESImage');\r\n\t\tif (images.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar mostVisible = -1;\r\n\t\tvar mostVisiblePercentage = 0;\r\n\t\tfor (var i = 0; i < images.length; i++) {\r\n\t\t\tvar percentageVisible = RESUtils.getPercentageVisibleYAxis(images[i]);\r\n\t\t\tif (percentageVisible > mostVisiblePercentage) {\r\n\t\t\t\tmostVisible = i;\r\n\t\t\t\tmostVisiblePercentage = percentageVisible;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Don't move any images if none are visible\r\n\t\tif (mostVisible === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tmodules['showImages'].moveMedia(images[mostVisible], deltaX, deltaY);\r\n\t}\r\n\r\n\tmodule.previousGalleryImage = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar previousButton = selected.entry.querySelector('.RESGalleryControls .previous');\r\n\t\tif (previousButton) {\r\n\t\t\tRESUtils.click(previousButton);\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.nextGalleryImage = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar nextButton = selected.entry.querySelector('.RESGalleryControls .next');\r\n\t\tif (nextButton) {\r\n\t\t\tRESUtils.click(nextButton);\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.toggleViewImages = function() {\r\n\t\tmodules['showImages'].setShowImages();\r\n\t};\r\n\r\n\tfunction toggleAllExpandos() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar thisExpandos = selected.getExpandoButtons();\r\n\t\tif (thisExpandos) {\r\n\t\t\tfor (var i = 0, len = thisExpandos.length; i < len; i++) {\r\n\t\t\t\tRESUtils.click(thisExpandos[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.followLink = function(newWindow) {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\r\n\t\tvar thisA = selected.getPostLink();\r\n\t\tvar thisHREF = thisA.href;\r\n\t\tif (thisHREF.substring(0, 2) === '//') {\r\n\t\t\tthisHREF = location.protocol + thisHREF;\r\n\t\t}\r\n\t\tif (newWindow) {\r\n\t\t\tvar button = (module.options.followLinkNewTabFocus.value) ? 0 : 1,\r\n\t\t\t\tthisJSON = {\r\n\t\t\t\t\trequestType: 'keyboardNav',\r\n\t\t\t\t\tlinkURL: thisHREF,\r\n\t\t\t\t\tbutton: button\r\n\t\t\t\t};\r\n\r\n\t\t\tRESEnvironment.sendMessage(thisJSON);\r\n\t\t} else {\r\n\t\t\tlocation.href = thisHREF;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction followLinkByRank(num) {\r\n\t\tvar target = modules['selectedEntry'].selectableThings().filter(function() {\r\n\t\t\tvar rank = (rank = this.querySelector('.rank')) && parseInt(rank.textContent, 10);\r\n\t\t\treturn rank === num;\r\n\t\t});\r\n\t\tmodules['selectedEntry'].select(target);\r\n\t\tmodule.followLink();\r\n\t}\r\n\r\n\tmodule.followPermalink = function(newWindow) {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\r\n\t\tvar thisA = selected.entry.querySelector('a.bylink');\r\n\t\tif (!thisA) return;\r\n\t\tvar thisHREF = thisA.getAttribute('href');\r\n\t\tif (newWindow) {\r\n\t\t\tvar button = (module.options.followLinkNewTabFocus.value) ? 0 : 1,\r\n\t\t\t\tthisJSON = {\r\n\t\t\t\t\trequestType: 'keyboardNav',\r\n\t\t\t\t\tlinkURL: thisHREF,\r\n\t\t\t\t\tbutton: button\r\n\t\t\t\t};\r\n\r\n\t\t\tRESEnvironment.sendMessage(thisJSON);\r\n\t\t} else {\r\n\t\t\tlocation.href = thisHREF;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.followComments = function(newWindow) {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\t\tvar thisA = selected.getCommentsLink(),\r\n\t\t\tthisHREF = thisA.getAttribute('href');\r\n\t\tif (newWindow) {\r\n\t\t\tvar button = (module.options.followLinkNewTabFocus.value) ? 0 : 1,\r\n\t\t\t\tthisJSON = {\r\n\t\t\t\t\trequestType: 'keyboardNav',\r\n\t\t\t\t\tlinkURL: thisHREF,\r\n\t\t\t\t\tbutton: button\r\n\t\t\t\t};\r\n\r\n\t\t\tRESEnvironment.sendMessage(thisJSON);\r\n\t\t} else {\r\n\t\t\tlocation.href = thisHREF;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction followLinkAndComments(background) {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\t\tbackground = typeof background === 'boolean' ? background : undefined;\r\n\r\n\t\t// find the [l+c] link and click it...\r\n\t\tvar lcLink = selected.entry.querySelector('.redditSingleClick');\r\n\t\tRESUtils.mousedown(lcLink, background && 1);\r\n\t}\r\n\r\n\tmodule.upVote = function(preventToggle) {\r\n\t\tif (promptLogin()) return;\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\t\tpreventToggle = typeof preventToggle === 'boolean' ? preventToggle : undefined;\r\n\r\n\t\tvar upVoteButton = selected.getUpvoteButton();\r\n\r\n\t\tif (!upVoteButton) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (modules['noParticipation'].isVotingBlocked()) {\r\n\t\t\tmodules['noParticipation'].notifyNoVote();\r\n\t\t} else {\r\n\t\t\tif (!preventToggle || !upVoteButton.classList.contains('upmod')) {\r\n\t\t\t\tRESUtils.click(upVoteButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar link = RESUtils.isPageType('linklist', 'profile');\r\n\t\tif (link && module.options.onVoteMoveDown.value || !link && module.options.onVoteCommentMoveDown.value) {\r\n\t\t\tmodule.moveDown();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.downVote = function(preventToggle) {\r\n\t\tif (promptLogin()) return;\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\t\tpreventToggle = typeof preventToggle === 'boolean' ? preventToggle : undefined;\r\n\r\n\t\tvar downVoteButton = selected.getDownvoteButton();\r\n\r\n\t\tif (!downVoteButton) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (modules['noParticipation'].isVotingBlocked()) {\r\n\t\t\tmodules['noParticipation'].notifyNoVote();\r\n\t\t} else {\r\n\t\t\tif (!preventToggle || !downVoteButton.classList.contains('downmod')) {\r\n\t\t\t\tRESUtils.click(downVoteButton);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar link = RESUtils.isPageType('linklist', 'profile');\r\n\t\tif (link && module.options.onVoteMoveDown.value || !link && module.options.onVoteCommentMoveDown.value) {\r\n\t\t\tmodule.moveDown();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.saveLink = function() {\r\n\t\tif (promptLogin()) return;\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar saveLink = selected.entry.querySelector('.link-save-button a') || selected.entry.querySelector('.link-unsave-button a');\r\n\t\tif (saveLink) {\r\n\t\t\tRESUtils.click(saveLink);\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.saveComment = function() {\r\n\t\tif (promptLogin()) return;\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar saveComment = selected.entry.querySelector('.comment-save-button > a');\r\n\t\tif (saveComment) {\r\n\t\t\tRESUtils.click(saveComment);\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.saveCommentRES = function() {\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tvar saveComment = selected.entry.querySelector('.saveComments, .unsaveComments');\r\n\t\tif (saveComment) {\r\n\t\t\tRESUtils.click(saveComment);\r\n\t\t\tmodules['saveComments'].showEducationalNotification();\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.reply = function() {\r\n\t\tif (promptLogin()) return;\r\n\r\n\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\tif (!selected) return;\r\n\r\n\t\tif (selected.thing.classList.contains('link') && RESUtils.isPageType('comments')) {\r\n\t\t\t// Reply to OP, but only if a reply form is available\r\n\t\t\tvar target = $('.usertext-edit textarea[name=text]:first');\r\n\t\t\tif (target.filter(':visible').length) {\r\n\t\t\t\ttarget.focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// User can reply directly here, so open/focus the reply form\r\n\t\tvar replyButton = selected.entry.querySelector('.buttons a[onclick*=reply]');\r\n\t\tif (replyButton) {\r\n\t\t\tRESUtils.click(replyButton);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// User cannot reply directly from this page, so go to where they can reply\r\n\t\tvar replyAt = selected.entry.querySelector('.buttons a.comments, .buttons a.bylink');\r\n\t\tif (replyAt) {\r\n\t\t\tRESUtils.click(replyAt);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction navigateTo(newWindow, thisHREF) {\r\n\t\tif (newWindow) {\r\n\t\t\tRESEnvironment.openInNewWindow(thisHREF);\r\n\t\t} else {\r\n\t\t\tlocation.href = thisHREF;\r\n\t\t}\r\n\t}\r\n\r\n\tvar goModeActive, goModePanel;\r\n\r\n\tmodule.goMode = function() {\r\n\t\tif (!module.options.useGoMode.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tgoModeActive = !goModeActive;\r\n\t\tif (goModeActive) {\r\n\t\t\tif (!goModePanel) {\r\n\t\t\t\tvar $shortCutList, $contents, niceKeyCode;\r\n\r\n\t\t\t\tgoModePanel = $('<div id=\"goModePanel\" class=\"RESDialogSmall\">')\r\n\t\t\t\t\t.append('<h3>Press a key to go:</h3><div id=\"goModeCloseButton\" class=\"RESCloseButton\">&times;</div>');\r\n\r\n\t\t\t\t// add the keyboard shortcuts...\r\n\t\t\t\t$contents = $('<div class=\"RESDialogContents\"></div>');\r\n\t\t\t\t$shortCutList = $('<table>');\r\n\t\t\t\tfor (var key in module.options) {\r\n\t\t\t\t\tif (module.options[key].dependsOn === 'goMode') {\r\n\t\t\t\t\t\tniceKeyCode = module.getNiceKeyCode(key);\r\n\t\t\t\t\t\t$shortCutList.append('<tr><td>'+niceKeyCode+'</td><td class=\"arrow\">&rarr;</td><td>'+key+'</td></tr>');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$contents.append($shortCutList);\r\n\t\t\t\tgoModePanel.append($contents);\r\n\t\t\t\tgoModePanel.on('click', '.RESCloseButton', module.goMode);\r\n\t\t\t}\r\n\t\t\t$('body').on('keyup', handleGoModeEscapeKey);\r\n\t\t\t$(document.body).append(goModePanel);\r\n\t\t\tgoModePanel.fadeIn();\r\n\t\t} else {\r\n\t\t\thideGoModePanel();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction hideGoModePanel() {\r\n\t\tgoModeActive = false;\r\n\t\tif (goModePanel) {\r\n\t\t\tgoModePanel.fadeOut();\r\n\t\t\t$('body').off('keyup', handleGoModeEscapeKey);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction handleGoModeEscapeKey(event) {\r\n\t\tif (event.which === 27) {\r\n\t\t\thideGoModePanel();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.inbox = function(newWindow) {\r\n\t\tif ((module.options.useGoMode.value) && (!goModeActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\t\thideGoModePanel();\r\n\t\tvar thisHREF = location.protocol + '//' + location.hostname + '/message/inbox/';\r\n\t\tnavigateTo(newWindow, thisHREF);\r\n\t};\r\n\r\n\tmodule.modmail = function(newWindow) {\r\n\t\tif ((module.options.useGoMode.value) && (!goModeActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\t\thideGoModePanel();\r\n\t\tvar thisHREF = location.protocol + '//' + location.hostname + '/message/moderator/';\r\n\t\tnavigateTo(newWindow, thisHREF);\r\n\t};\r\n\r\n\tmodule.profile = function(newWindow) {\r\n\t\tif ((module.options.useGoMode.value) && (!goModeActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnewWindow = typeof newWindow === 'boolean' ? newWindow : undefined;\r\n\t\thideGoModePanel();\r\n\t\tvar thisHREF = location.protocol + '//' + location.hostname + '/user/' + RESUtils.loggedInUser();\r\n\t\tnavigateTo(newWindow, thisHREF);\r\n\t};\r\n\r\n\tmodule.frontPage = function(subreddit) {\r\n\t\tif ((module.options.useGoMode.value) && (!goModeActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsubreddit = typeof subreddit === 'boolean' ? subreddit : undefined;\r\n\t\thideGoModePanel();\r\n\r\n\t\tif (subreddit && !RESUtils.currentSubreddit()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar newhref = location.protocol + '//' + location.hostname + '/';\r\n\t\tif (subreddit) {\r\n\t\t\tnewhref += 'r/' + RESUtils.currentSubreddit();\r\n\t\t}\r\n\t\tlocation.href = newhref;\r\n\t};\r\n\r\n\tmodule.nextPage = function(override) {\r\n\t\toverride = typeof override === 'boolean' ? override : undefined;\r\n\t\tif (override !== true && module.options.useGoMode.value && !goModeActive) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\thideGoModePanel();\r\n\t\t// if Never Ending Reddit is enabled, just scroll to the bottom.  Otherwise, click the 'next' link.\r\n\t\tif ((modules['neverEndingReddit'].isEnabled()) && (modules['neverEndingReddit'].progressIndicator)) {\r\n\t\t\tRESUtils.click(modules['neverEndingReddit'].progressIndicator);\r\n\t\t\tmodule.moveBottom();\r\n\t\t} else {\r\n\t\t\t// get the first link to the next page of reddit...\r\n\t\t\tvar nextPrevLinks = modules['neverEndingReddit'].getNextPrevLinks();\r\n\t\t\tvar link = nextPrevLinks.next;\r\n\t\t\tif (link) {\r\n\t\t\t\t// RESUtils.click(nextLink);\r\n\t\t\t\tlocation.href = link.getAttribute('href');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.prevPage = function() {\r\n\t\tif ((module.options.useGoMode.value) && (!goModeActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\thideGoModePanel();\r\n\t\t// if Never Ending Reddit is enabled, do nothing.  Otherwise, click the 'prev' link.\r\n\t\tif (modules['neverEndingReddit'].isEnabled()) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tvar nextPrevLinks = modules['neverEndingReddit'].getNextPrevLinks();\r\n\t\t\tvar link = nextPrevLinks.prev;\r\n\t\t\tif (link) {\r\n\t\t\t\t// RESUtils.click(prevLink);\r\n\t\t\t\tlocation.href = link.getAttribute('href');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction getCommentLinks(entry) {\r\n\t\tif (!entry) {\r\n\t\t\tvar selected = modules['selectedEntry'].selected();\r\n\t\t\tif (!selected) return;\r\n\r\n\t\t\tentry = selected && selected.entry;\r\n\t\t}\r\n\t\tvar links = entry.querySelectorAll('div.md a:not(.expando-button):not(.madeVisible):not(.toggleImage):not(.noKeyNav):not([href^=\"javascript:\"]):not([href=\"#\"])');\r\n\r\n\t\tlinks = Array.prototype.filter.call(links, function(link) {\r\n\t\t\treturn (!RESUtils.isCommentCode(link) && !RESUtils.isEmptyLink(link));\r\n\t\t});\r\n\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction commentLink(num) {\r\n\t\tif (module.options.commentsLinkNumbers.value) {\r\n\t\t\tvar links = getCommentLinks();\r\n\t\t\tif (typeof links[num] !== 'undefined') {\r\n\t\t\t\tvar thisLink = links[num];\r\n\t\t\t\tif ((thisLink.nextSibling) && (typeof thisLink.nextSibling.tagName !== 'undefined') && (thisLink.nextSibling.classList.contains('expando-button'))) {\r\n\t\t\t\t\tthisLink = thisLink.nextSibling;\r\n\t\t\t\t}\r\n\t\t\t\thandleKeyLink(thisLink);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.toggleCommentNavigator = function() {\r\n\t\tvar cNav = modules['commentNavigator'];\r\n\t\tif (cNav.isEnabled()) {\r\n\t\t\tif (cNav.isOpen) {\r\n\t\t\t\tcNav.hideNavigator();\r\n\t\t\t} else {\r\n\t\t\t\tcNav.showNavigator();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.commentNavigatorMoveUp = function() {\r\n\t\tmodules['commentNavigator'].moveUp();\r\n\t};\r\n\r\n\tmodule.commentNavigatorMoveDown = function() {\r\n\t\tmodules['commentNavigator'].moveDown();\r\n\t};\r\n\r\n\tmodule.random = function() {\r\n\t\tif ((module.options.useGoMode.value) && (!goModeActive)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\thideGoModePanel();\r\n\r\n\t\tlocation.href = '/r/random';\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}
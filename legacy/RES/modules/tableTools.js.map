{"version":3,"sources":["modules/tableTools.js"],"names":[],"mappings":";;AAAA,UAAU,YAAV,EAAwB,UAAS,MAAT,EAAiB,QAAjB,EAA2B;AAClD,QAAO,UAAP,GAAoB,aAApB,CADkD;AAElD,QAAO,QAAP,GAAkB,CAAC,cAAD,EAAiB,YAAjB,CAAlB,CAFkD;AAGlD,QAAO,WAAP,GAAqB,0FAArB,CAHkD;AAIlD,QAAO,OAAP,GAAiB;AAChB,QAAM;AACL,SAAM,SAAN;AACA,UAAO,IAAP;AACA,gBAAa,wBAAb;AACA,cAAW,IAAX;GAJD;EADD,CAJkD;AAYlD,QAAO,UAAP,GAAoB,YAAW;AAC9B,SAAO,CAAC,SAAS,gBAAT,CAA0B,WAA1B,CAAD,IAA2C,SAAS,UAAT,CAAoB,QAApB,CAA3C,CADuB;EAAX,CAZ8B;AAelD,QAAO,EAAP,GAAY,YAAW;AACtB,MAAI,IAAC,CAAK,SAAL,EAAD,IAAuB,KAAK,UAAL,EAAvB,EAA2C;AAC9C,OAAI,KAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,EAAyB;AAC5B,MAAE,QAAF,EAAY,EAAZ,CAAe,OAAf,EAAwB,QAAxB,EAAkC,UAAS,CAAT,EAAY;AAC7C,qBAAgB,EAAE,MAAF,CAAhB,CAD6C;KAAZ,CAAlC,CAD4B;IAA7B;GADD;EADW;;AAfsC,UAyBzC,eAAT,CAAyB,MAAzB,EAAiC;AAChC,MAAI,gBAAgB,EAAE,MAAF,CAAhB;MACH,QAAQ,cAAc,OAAd,CAAsB,OAAtB,CAAR;MACA,OAAO,MAAM,IAAN,CAAW,UAAX,EAAuB,OAAvB,EAAP;MACA,SAAS,cAAc,KAAd,EAAT,CAJ+B;;AAMhC,OAAK,IAAL,CAAU,aAAa,MAAb,CAAV,EANgC;AAOhC,gBAAc,QAAd,GAAyB,WAAzB,CAAqC,oBAArC,EAPgC;AAQhC,MAAI,cAAc,QAAd,CAAuB,UAAvB,CAAJ,EAAwC;;AAEvC,UAAO,KAAK,OAAL,EAAP,CAFuC;AAGvC,iBAAc,WAAd,CAA0B,UAA1B,EAHuC;AAIvC,iBAAc,QAAd,CAAuB,WAAvB,EAJuC;GAAxC,MAKO;;AAEN,iBAAc,WAAd,CAA0B,WAA1B,EAFM;AAGN,iBAAc,QAAd,CAAuB,UAAvB,EAHM;GALP;AAUA,QAAM,MAAN,CAAa,IAAb,EAlBgC;EAAjC;;AAzBkD,UA8CzC,YAAT,CAAsB,MAAtB,EAA8B;AAC7B,SAAO,UAAS,IAAT,EAAe,IAAf,EAAqB;AAC3B,OAAI,IAAI,aAAa,IAAb,EAAmB,MAAnB,CAAJ;OACH,IAAI,aAAa,IAAb,EAAmB,MAAnB,CAAJ,CAF0B;AAG3B,UAAO,EAAE,SAAF,CAAY,CAAZ,KAAkB,EAAE,SAAF,CAAY,CAAZ,CAAlB,GAAmC,IAAI,CAAJ,GAAQ,EAAE,aAAF,CAAgB,CAAhB,CAA3C,CAHoB;GAArB,CADsB;EAA9B;;AA9CkD,UAsDzC,YAAT,CAAsB,GAAtB,EAA2B,MAA3B,EAAmC;AAClC,SAAO,EAAE,GAAF,EAAO,QAAP,CAAgB,IAAhB,EAAsB,EAAtB,CAAyB,MAAzB,EAAiC,IAAjC,EAAP,CADkC;EAAnC;CAtDuB,CAAxB","file":"modules/tableTools.js","sourcesContent":["addModule('tableTools', function(module, moduleID) {\r\n\tmodule.moduleName = 'Table Tools';\r\n\tmodule.category = ['Productivity', 'Appearance'];\r\n\tmodule.description = 'Include additional functionality to Reddit Markdown tables (only sorting at the moment).';\r\n\tmodule.options = {\r\n\t\tsort: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Enable column sorting.',\r\n\t\t\tbodyClass: true\r\n\t\t}\r\n\t};\r\n\tmodule.isMatchURL = function() {\r\n\t\treturn !RESUtils.currentSubreddit('dashboard') && RESUtils.isMatchURL(moduleID);\r\n\t};\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tif (this.options.sort.value) {\r\n\t\t\t\t$(document).on('click', '.md th', function(e) {\r\n\t\t\t\t\tsortTableColumn(e.target);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t// Add sorting to a column\r\n\tfunction sortTableColumn(target) {\r\n\t\tvar $columnHeader = $(target),\r\n\t\t\ttable = $columnHeader.closest('table'),\r\n\t\t\trows = table.find('tr:gt(0)').toArray(),\r\n\t\t\tcolumn = $columnHeader.index();\r\n\r\n\t\trows.sort(sortFunction(column));\r\n\t\t$columnHeader.siblings().removeClass('sort-desc sort-asc');\r\n\t\tif ($columnHeader.hasClass('sort-asc')) {\r\n\t\t\t// Sort asc. leave the rows in the order they are\r\n\t\t\trows = rows.reverse();\r\n\t\t\t$columnHeader.removeClass('sort-asc');\r\n\t\t\t$columnHeader.addClass('sort-desc');\r\n\t\t} else {\r\n\t\t\t// Sort desc. Reverse the array of rows\r\n\t\t\t$columnHeader.removeClass('sort-desc');\r\n\t\t\t$columnHeader.addClass('sort-asc');\r\n\t\t}\r\n\t\ttable.append(rows);\r\n\t}\r\n\t// If numeric, compare numbers; otherwise, compare locale strings\r\n\tfunction sortFunction(column) {\r\n\t\treturn function(rowA, rowB) {\r\n\t\t\tvar a = getCellValue(rowA, column),\r\n\t\t\t\tb = getCellValue(rowB, column);\r\n\t\t\treturn $.isNumeric(a) && $.isNumeric(b) ? a - b : a.localeCompare(b);\r\n\t\t};\r\n\t}\r\n\t// Get HTML of cell given row and column\r\n\tfunction getCellValue(row, column) {\r\n\t\treturn $(row).children('td').eq(column).text();\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
{"version":3,"sources":["modules/messageMenu.js"],"names":[],"mappings":"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","file":"modules/messageMenu.js","sourcesContent":["addModule('messageMenu', function(module, moduleID) {\r\n\tmodule.moduleName = 'Message Menu';\r\n\tmodule.category = ['Browsing', 'My account'];\r\n\tmodule.description = 'Hover over the mail icon to access different types of messages or to compose a new message.';\r\n\r\n\tmodule.options = {\r\n\t\tlinks: {\r\n\t\t\ttype: 'table',\r\n\t\t\taddRowNext: '+add shortcut',\r\n\t\t\tfields: [{\r\n\t\t\t\tname: 'label',\r\n\t\t\t\ttype: 'text'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'url',\r\n\t\t\t\ttype: 'text'\r\n\t\t\t}],\r\n\t\t\tvalue: [\r\n\t\t\t\t[ 'compose', '/message/compose' ],\r\n\t\t\t\t[ 'all', '/message/inbox' ],\r\n\t\t\t\t[ 'unread', '/message/unread'],\r\n\t\t\t\t[ 'messages', '/message/messages'],\r\n\t\t\t\t[ 'comment replies', '/message/comments' ],\r\n\t\t\t\t[ 'post replies', '/message/selfreply'],\r\n\t\t\t\t[ '/u/ mentions', '/message/mentions' ]\r\n\t\t\t]\r\n\t\t},\r\n\t\tuseQuickMessage: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tdescription: 'Use Quick Message pop-up when composing a new message',\r\n\t\t\tvalue: true\r\n\t\t},\r\n\t\thoverDelay: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: 1000,\r\n\t\t\tdescription: 'Delay, in milliseconds, before hover tooltip loads. Default is 1000.',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tfadeDelay: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: 200,\r\n\t\t\tdescription: 'Delay, in milliseconds, before hover tooltip fades away. Default is 200.',\r\n\t\t\tadvanced: true\r\n\t\t},\r\n\t\tfadeSpeed: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: 0.7,\r\n\t\t\tdescription: 'Fade animation\\'s speed (in seconds). Default is 0.7.',\r\n\t\t\tadvanced: true\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.go = function() {\r\n\t\tif (!this.isEnabled() || !this.isMatchURL()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$('#mail, .mail-count, #NREMail, #NREMailCount').on('mouseover', onMouseOver);\r\n\t};\r\n\r\n\tvar onMouseOver = function(e) {\r\n\t\tmodules['hover'].dropdownList(moduleID)\r\n\t\t\t.target(e.target)\r\n\t\t\t.options({\r\n\t\t\t\topenDelay: module.options.hoverDelay.value,\r\n\t\t\t\tfadeDelay: module.options.fadeDelay.value,\r\n\t\t\t\tfadeSpeed: module.options.fadeSpeed.value\r\n\t\t\t})\r\n\t\t\t.populateWith(populate)\r\n\t\t\t.begin();\r\n\t};\r\n\r\n\r\n\tvar menuItems;\r\n\tvar populate = function(def, obj, context) {\r\n\t\tif (!menuItems) {\r\n\t\t\tmenuItems = module.options.links.value\r\n\t\t\t\t.map(populateItem)\r\n\t\t\t\t.reduce(function(prev, curr) {\r\n\t\t\t\t\treturn prev.add(curr);\r\n\t\t\t\t}, $());\r\n\r\n\t\t\tmenuItems = menuItems.add(populateItem([\r\n\t\t\t\t'<i>' + module.moduleName + '</i>',\r\n\t\t\t\tmodules['settingsNavigation'].makeUrlHash(moduleID)\r\n\t\t\t]));\r\n\t\t}\r\n\r\n\t\tdef.resolve(menuItems);\r\n\t};\r\n\r\n\tvar populateItem = function(link) {\r\n\t\tvar label = link[0] || '',\r\n\t\t\turl = link[1] || '',\r\n\t\t\tcompose = url.indexOf('/message/compose') !== -1,\r\n\t\t\t$link = $('<a />')\r\n\t\t\t\t.safeHtml(label)\r\n\t\t\t\t.attr('href', url);\r\n\r\n\t\tif (compose) {\r\n\t\t\t$link.append('<span class=\"RESMenuItemButton res-icon\">&#xF139;</span>');\r\n\t\t} else if (url.indexOf('#!settings') !== -1) {\r\n\t\t\t$link.append('<span class=\"RESMenuItemButton gearIcon\" />');\r\n\t\t}\r\n\r\n\t\tif (module.options.useQuickMessage.value && compose) {\r\n\t\t\t$link.on('click', function(e) {\r\n\t\t\t\te.target = $(e.target).closest('a').get(0);\r\n\t\t\t\tif (modules['quickMessage'].onClickMessageLink(e)) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$link.on('click', function(e) {\r\n\t\t\tmodules['hover'].dropdownList(moduleID).close();\r\n\t\t});\r\n\r\n\t\treturn $('<li />').append($link);\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}
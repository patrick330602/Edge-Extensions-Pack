{"version":3,"sources":["modules/hosts/raddit.js"],"names":[],"mappings":"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","file":"modules/hosts/raddit.js","sourcesContent":["addLibrary('mediaHosts', 'raddit', {\r\n\tname: 'radd.it',\r\n\tdomains: ['radd.it'],\r\n\toptions: {\r\n\t\t'show playlister toggle': {\r\n\t\t\tdescription: 'Show a toggle for radd.it embeds in subreddits with sidebar links to a raddit.com/r/subreddit playlist',\r\n\t\t\tvalue: true,\r\n\t\t\ttype: 'boolean'\r\n\t\t},\r\n\t\t'always show sidebar playlister': {\r\n\t\t\tdescription: 'Always show the radd.it embed in the sidebar when applicable',\r\n\t\t\tvalue: false,\r\n\t\t\ttype: 'boolean'\r\n\t\t}\r\n\t},\r\n\tdetect: function(href, elem) { return href.indexOf('radd.it/') !== -1; },\r\n\thandleLink: function(elem) {\r\n\t\tvar def = $.Deferred(),\r\n\t\t\thashRe = /^https?:\\/\\/(?:(?:www|m|embed)\\.)?radd\\.it(\\/(?:search|r|user|comments|playlists)\\/.+)/i,\r\n\t\t\tgroups = hashRe.exec(elem.href);\r\n\r\n\t\tif (groups) {\r\n\t\t\tdef.resolve(elem, '//radd.it' + groups[1] + (groups[1].indexOf('?') === -1 ? '?embed' : '&embed'));\r\n\t\t} else {\r\n\t\t\tdef.reject();\r\n\t\t}\r\n\r\n\t\treturn def.promise();\r\n\t},\r\n\thandleInfo: function(elem, info) {\r\n\t\tvar generate = function(options) {\r\n\t\t\tvar element = document.createElement('iframe');\r\n\t\t\telement.src = info;\r\n\t\t\telement.height = '640px';\r\n\t\t\telement.width = '320px';\r\n\r\n\t\t\treturn element;\r\n\t\t};\r\n\r\n\t\telem.type = 'GENERIC_EXPANDO';\r\n\t\telem.expandoClass = ' video';\r\n\t\telem.expandoOptions = {\r\n\t\t\tgenerate: generate,\r\n\t\t\tmedia: info\r\n\t\t};\r\n\t\treturn $.Deferred().resolve(elem).promise();\r\n\t},\r\n\tgo: function() {\r\n\t\tif (modules['showImages'].options['display radd.it'].value === false) return;\r\n\t\tmodules['showImages'].siteModules['raddit'].handleSidebarLink();\r\n\t},\r\n\thandleSidebarLink: function() {\r\n\t\t// check sidebar for radd.it links, add embedded player option to toolbar if found\r\n\t\tvar radditLink = document.querySelector('.side .md a[href^=\"http://radd.it/r/\"], .side .md a[href^=\"https://radd.it/r/\"]');\r\n\t\tif (radditLink) {\r\n\t\t\tvar path = radditLink.href.match(/https?:\\/\\/radd\\.it(\\/.*)/)[1];\r\n\r\n\t\t\tif (modules['showImages'].options['always show sidebar playlister'].value) {\r\n\t\t\t\tmodules['showImages'].siteModules['raddit'].toggleSidebarPlaylist(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (modules['showImages'].options['display radd.it'].value &&\r\n\t\t\t\t\tmodules['showImages'].options['show playlister toggle'].value) {\r\n\t\t\t\tmodules['showImages'].siteModules['raddit'].addPlaylisterToggle(path);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\taddPlaylisterToggle: function(path) {\r\n\t\tif (modules['showImages'].options['display radd.it'].value === false) return;\r\n\t\tif (modules['showImages'].options['show playlister toggle'].value === false) return;\r\n\r\n\t\tvar mainMenuUL = $('#header-bottom-left ul.tabmenu')[0];\r\n\t\tif (!mainMenuUL) return;\r\n\t\tvar li = document.createElement('li'),\r\n\t\t\ta = document.createElement('a'),\r\n\t\t\ttext = document.createTextNode('playlister');\r\n\t\tli.className = 'RES-raddit-embed';\r\n\t\tli.title = 'show/hide radd.it' + path + ' playlist in the sidebar';\r\n\r\n\t\ta.href = '#';\r\n\t\ta.className = 'RES-raddit-embed';\r\n\t\ta.addEventListener('mousedown', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tmodules['showImages'].siteModules['raddit'].toggleSidebarPlaylist(path, true);\r\n\t\t}, true);\r\n\r\n\t\ta.appendChild(text);\r\n\t\tli.appendChild(a);\r\n\r\n\t\tmainMenuUL.appendChild(li);\r\n\t},\r\n\ttoggleSidebarPlaylist: function(path, autoplay) {\r\n\t\tvar sb = document.querySelector('.side');\r\n\t\tvar listr = document.querySelector('.side iframe.RES-raddit');\r\n\r\n\t\tif (listr) {\r\n\t\t\tsb.removeChild(listr);\t\t// nix it if it exists.\r\n\t\t} else {\t\t\t\t\t\t// otherwise, create it.\r\n\t\t\tvar width = window.getComputedStyle(sb).width;\r\n\r\n\t\t\tvar src = document.location.protocol + '//radd.it/' + path + (path.indexOf('?') === -1 ? '?embed' : '&embed');\r\n\r\n\t\t\tlistr = document.createElement('iframe');\r\n\t\t\tlistr.className = 'RES-raddit';\r\n\t\t\tlistr.src = src;\r\n\t\t\tlistr.width = width;\r\n\t\t\tlistr.height = '640px';\r\n\t\t\tlistr.style.marginBottom = '5px';\r\n\t\t\tsb.insertBefore(listr, sb.querySelector('.spacer'));\r\n\t\t}\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
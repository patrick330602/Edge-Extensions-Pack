{"version":3,"sources":["modules/hosts/oddshot.js"],"names":[],"mappings":";;AAAA,WAAW,YAAX,EAAyB,SAAzB,EAAoC;AACnC,UAAS,CAAC,YAAD,CAAT;AACA,OAAM,SAAN;AACA,cAAa,SAAS,aAAT,CAAuB,OAAvB,CAAb;AACA,SAAQ,gBAAS,IAAT,EAAe,IAAf,EAAqB;AAC5B,SAAO,KAAK,OAAL,CAAa,YAAb,MAA+B,CAAC,CAAD,CADV;EAArB;;AAIR,aAAY,oBAAS,IAAT,EAAe;AAC1B,MAAI,MAAM,EAAE,QAAF,EAAN,CADsB;AAE1B,MAAI,UAAU,QAAQ,YAAR,EAAsB,WAAtB,CAAkC,SAAlC,CAAV;;;AAFsB,MAKtB,QAAQ,WAAR,CAAoB,WAApB,CAAgC,WAAhC,MAAiD,EAAjD,EAAqD;AACxD,OAAI,MAAJ,GADwD;GAAzD,MAEO;AACN,OAAI,SAAS,wDAAT,CADE;AAEN,OAAI,SAAS,OAAO,IAAP,CAAY,KAAK,IAAL,CAArB,CAFE;;AAIN,OAAI,MAAJ,EAAY;AACX,QAAI,OAAJ,CAAY,IAAZ,EAAkB,OAAO,CAAP,CAAlB,EADW;IAAZ,MAEO;AACN,QAAI,MAAJ,GADM;IAFP;GAND;;AAaA,SAAO,IAAI,OAAJ,EAAP,CAlB0B;EAAf;;AAqBZ,aAAY,oBAAS,IAAT,EAAe,IAAf,EAAqB;AAChC,OAAK,IAAL,GAAY,OAAZ,CADgC;AAEhC,OAAK,cAAL,GAAsB;AACrB,aAAU,KAAV;AACA,SAAM,KAAN;AACA,WAAQ,kDAAkD,IAAlD,GAAyD,iBAAzD;GAHT,CAFgC;;AAQhC,MAAI,UAAU,CAAC;AACd,WAAQ,mDAAmD,IAAnD,GAA0D,WAA1D;AACR,WAAQ,WAAR;GAFa,CAAV,CAR4B;;AAahC,IAAE,IAAF,EAAQ,IAAR,CAAa,SAAb,EAAwB,OAAxB,EAbgC;AAchC,MAAI,SAAS,QAAT,OAAwB,UAAxB,EAAoC;AACvC,KAAE,IAAF,EAAQ,OAAR,CAAgB,QAAhB,EAA0B,IAA1B,CAA+B,YAA/B,EAA6C,IAA7C,CAAkD,MAAlD,EAA0D,KAAK,IAAL,CAA1D,CADuC;GAAxC;;AAIA,SAAO,EAAE,QAAF,GAAa,OAAb,CAAqB,IAArB,EAA2B,OAA3B,EAAP,CAlBgC;EAArB;CA7Bb","file":"modules/hosts/oddshot.js","sourcesContent":["addLibrary('mediaHosts', 'oddshot', {\r\n\tdomains: ['oddshot.tv'],\r\n\tname: 'Oddshot',\r\n\tvideoDetect: document.createElement('VIDEO'),\r\n\tdetect: function(href, elem) {\r\n\t\treturn href.indexOf('oddshot.tv') !== -1;\r\n\t},\r\n\r\n\thandleLink: function(elem) {\r\n\t\tvar def = $.Deferred();\r\n\t\tvar siteMod = modules['showImages'].siteModules['oddshot'];\r\n\r\n\t\t// Make sure the browser can play MP4 videos.\r\n\t\tif (siteMod.videoDetect.canPlayType('video/mp4') === '') {\r\n\t\t\tdef.reject();\r\n\t\t} else {\r\n\t\t\tvar hashRe = /^https?:\\/\\/(?:www\\.)?oddshot.tv\\/shot\\/([a-z0-9_-]+)/i;\r\n\t\t\tvar groups = hashRe.exec(elem.href);\r\n\r\n\t\t\tif (groups) {\r\n\t\t\t\tdef.resolve(elem, groups[1]);\r\n\t\t\t} else {\r\n\t\t\t\tdef.reject();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn def.promise();\r\n\t},\r\n\r\n\thandleInfo: function(elem, info) {\r\n\t\telem.type = 'VIDEO';\r\n\t\telem.expandoOptions = {\r\n\t\t\tautoplay: false,\r\n\t\t\tloop: false,\r\n\t\t\tposter: 'https://d301dinc95ec5f.cloudfront.net/thumbs/' + info + '.shot.thumb.jpg'\r\n\t\t};\r\n\r\n\t\tvar sources = [{\r\n\t\t\t'file': 'https://d301dinc95ec5f.cloudfront.net/capture/' + info + '.shot.mp4',\r\n\t\t\t'type': 'video/mp4'\r\n\t\t}];\r\n\r\n\t\t$(elem).data('sources', sources);\r\n\t\tif (RESUtils.pageType() === 'linklist') {\r\n\t\t\t$(elem).closest('.thing').find('.thumbnail').attr('href', elem.href);\r\n\t\t}\r\n\r\n\t\treturn $.Deferred().resolve(elem).promise();\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
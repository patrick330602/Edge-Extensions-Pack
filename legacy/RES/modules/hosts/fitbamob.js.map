{"version":3,"sources":["modules/hosts/fitbamob.js"],"names":[],"mappings":"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","file":"modules/hosts/fitbamob.js","sourcesContent":["addLibrary('mediaHosts', 'fitbamob', {\r\n\tdomains: ['fitbamob.com', 'offsided.com'],\r\n\tdetect: function(href, elem) {\r\n\t\treturn href.indexOf('fitbamob.com') !== -1 || href.indexOf('offsided.com') !== -1;\r\n\t},\r\n\thandleLink: function(elem) {\r\n\t\tvar hashRe = /r\\/[a-zA-Z0-9]+\\/([a-zA-Z0-9]+[\\/]*$)|b\\/([a-zA-Z0-9]+[\\/]*$)|v\\/([a-zA-Z0-9]+[\\/]*$)/i;\r\n\t\tvar def = $.Deferred();\r\n\t\tvar groups = hashRe.exec(elem.href);\r\n\r\n\t\tif (!groups) return def.reject();\r\n\r\n\t\tvar link_id;\r\n\t\tif (typeof groups[1] !== 'undefined'){\r\n\t\t\tlink_id = encodeURIComponent(groups[1]);\r\n\t\t} else if (typeof groups[2] !== 'undefined') {\r\n\t\t\tlink_id = encodeURIComponent(groups[2]);\r\n\t\t} else {\r\n\t\t\tlink_id = encodeURIComponent(groups[3]);\r\n\t\t}\r\n\t\tvar apiURL = location.protocol + '//fitbamob.com/link/' + link_id + '/?format=json';\r\n\r\n\t\tRESEnvironment.ajax({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: apiURL,\r\n\t\t\taggressiveCache: true,\r\n\t\t\tonload: function(response) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar json = JSON.parse(response.responseText);\r\n\t\t\t\t\tdef.resolve(elem, json);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tdef.reject();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonerror: function(response) {\r\n\t\t\t\tdef.reject();\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn def.promise();\r\n\t},\r\n\thandleInfo: function(elem, info) {\r\n\t\tvar generate = function(options) {\r\n\t\t\tvar template = RESTemplates.getSync('VideoUI');\r\n\t\t\tvar video = {\r\n\t\t\t\tloop: true,\r\n\t\t\t\tautoplay: true, // fitbamob is gfycat-based, thus also muted / no audio, so autoplay is OK\r\n\t\t\t\tmuted: true,\r\n\t\t\t\tbrand: {\r\n\t\t\t\t\t'url': elem.href,\r\n\t\t\t\t\t'name': 'Fitbamob',\r\n\t\t\t\t\t'img': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAkCAYAAABxE+FXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzFJREFUeNrsmHtojXEYx9/XGZKQ5rJcSi4ZMVJESrknt1yK8sdcllxCQikjiRkr4g+WESK3cp0tsfKHFCn3lQl/KCv+sGU222w7vk++Pz1+fud9T9uZ8wdPfXbO+b3veZ/fc/k9z3PmR6NRL1nSxkuipMgff2OJXksFy8FE0AG0xDU+aAQvwSnw1FyIHpzyU7mSseAy6JVgIyeD9SAb5PxmOaUfuAZ6BjykAXwATda6eKcd6E1rzVo56M5rsr4HVIIToM7EPA3sDFHs0X3pYAgYqhhMr1Wqe8WQPmCf9YxdIFNbPgqMi8N9GeCJ7FpZ6NETnUBXtRaxXnVODdLKU60vBp2O9DjjPIdu7+a41tGOuZ3VTYxxSyTN8tCfR81SXAXWgIdU7rdwA5Jsc0FuLOVa5KidTfBRewUWgNFhFe5jKxW0z/GU1wbvL0lSa/t/5X4CjlSzlUu5rOB5r2klXVXU8wVU63N+FdziZmpbSflS0JYG1mvl30nQUOA7Wmksb7ruq45V4bazAtWzHK4CD6y6n8+2GeQZaRinQZ5jXSpnD/ANnATHjXJZHKFuzrKUm16+Mg7LnznWpLZP53vZ/E2dcG/AV3XzTNP2lJTEobiOm7QlU72vNaXWKJcOVmq1wknWA16DshDl99jD7QFkqvpcZgZJo/wxKHYMk1oaeSqC5IZjbYJVQ4o5Df1KOEm0i2AbE85MItmq16fQgiLuvL3avDSjgWATuA7e8/4BYJFSLHou2EfNuKMArOXnYUweydLz6jTMCrBcNn8b3AHzQBejiFLA8Dlre47qu+LiS2AheM6pMyvE7XkcJMdzTBbLZ/BahZ7ZXcrL+WtF5AzYDYaD/oznshDlWxlPmYaPgk/UISV7hZ2MrjFKYrYaHKOLSvmldeAtuM+Z3MQ8wpiPofKR6lky0xeCLa5kTYlhQT4T6AVYwpjLBvbyIe9YpyPcgM8fHIUqpovBOXAAHAmaXl2yGdwFhxnvXMbSYxhcIlZv4PQrG5vN09GsYaKIMZd6vR9MC7m/L9jBfMkIUhxmuZEaJt4hMJ/jr7i4M2tCPXu0TL2PwBX27vDfz//sfyZ+CDAAXXm2zpHEcnIAAAAASUVORK5CYII='\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (location.protocol === 'https:') {\r\n\t\t\t\tinfo.webm_url = info.webm_url.replace('http:', 'https:');\r\n\t\t\t\tinfo.mp4_url = info.mp4_url.replace('http:', 'https:');\r\n\t\t\t}\r\n\t\t\tvideo.sources = [\r\n\t\t\t\t{\r\n\t\t\t\t\t'source': info.mp4_url,\r\n\t\t\t\t\t'type': 'video/mp4'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t'source': info.webm_url,\r\n\t\t\t\t\t'type': 'video/webm'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t\tvar element = template.html(video)[0];\r\n\t\t\tnew MediaPlayer(element);\r\n\t\t\treturn element;\r\n\t\t};\r\n\r\n\t\telem.type = 'GENERIC_EXPANDO';\r\n\t\telem.expandoClass = ' video';\r\n\t\telem.expandoOptions = {\r\n\t\t\tgenerate: generate,\r\n\t\t\tmedia: info\r\n\t\t};\r\n\r\n\t\treturn $.Deferred().resolve(elem).promise();\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
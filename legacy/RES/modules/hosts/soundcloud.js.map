{"version":3,"sources":["modules/hosts/soundcloud.js"],"names":[],"mappings":";;AAAA,WAAW,YAAX,EAAyB,YAAzB,EAAuC;AACtC,UAAS,CAAC,gBAAD,CAAT;AACA,SAAQ,gBAAS,IAAT,EAAe,IAAf,EAAqB;AAC5B,MAAI,KAAK,OAAL,CAAa,gBAAb,MAAmC,CAAC,CAAD,EAAI;AAC1C,OAAI,KAAK,SAAL,CAAe,OAAf,CAAuB,OAAvB,MAAoC,CAAC,CAAD,EAAI,OAAO,IAAP,CAA5C;GADD;AAGA,SAAO,KAAP,CAJ4B;EAArB;AAMR,aAAY,oBAAS,IAAT,EAAe;AAC1B,MAAI,MAAM,EAAE,QAAF,EAAN,CADsB;AAE1B,MAAI,SAAS,sCAAsC,mBAAmB,KAAK,IAAL,CAAzD,GAAsE,0BAAtE,CAFa;AAG1B,iBAAe,IAAf,CAAoB;AACnB,WAAQ,KAAR;AACA,QAAK,MAAL;;AAEA,WAAQ,gBAAS,QAAT,EAAmB;AAC1B,QAAI;AACH,SAAI,OAAJ,CAAY,IAAZ,EAAkB,KAAK,KAAL,CAAW,SAAS,YAAT,CAA7B,EADG;KAAJ,CAEE,OAAO,KAAP,EAAc;AACf,SAAI,MAAJ,GADe;KAAd;IAHK;AAOR,YAAS,iBAAS,QAAT,EAAmB;AAC3B,QAAI,MAAJ,GAD2B;IAAnB;GAXV,EAH0B;;AAmB1B,SAAO,IAAI,OAAJ,EAAP,CAnB0B;EAAf;AAqBZ,aAAY,oBAAS,IAAT,EAAe,IAAf,EAAqB;;AAEhC,MAAI,MAAM,EAAE,KAAK,IAAL,CAAF,CAAa,IAAb,CAAkB,KAAlB,CAAN,CAF4B;AAGhC,OAAK,IAAL,GAAY,QAAZ,CAHgC;AAIhC,OAAK,YAAL,CAAkB,YAAlB,EAAgC,GAAhC,EAJgC;AAKhC,OAAK,YAAL,CAAkB,YAAlB,EAAgC,oBAAhC,EALgC;AAMhC,OAAK,YAAL,CAAkB,WAAlB,EAA+B,mBAA/B,EANgC;AAOhC,SAAO,EAAE,QAAF,GAAa,OAAb,CAAqB,IAArB,EAA2B,OAA3B,EAAP,CAPgC;EAArB;CA7Bb","file":"modules/hosts/soundcloud.js","sourcesContent":["addLibrary('mediaHosts', 'soundcloud', {\r\n\tdomains: ['soundcloud.com'],\r\n\tdetect: function(href, elem) {\r\n\t\tif (href.indexOf('soundcloud.com') !== -1) {\r\n\t\t\tif (elem.className.indexOf('title') === -1) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\thandleLink: function(elem) {\r\n\t\tvar def = $.Deferred();\r\n\t\tvar apiURL = 'http://soundcloud.com/oembed?url=' + encodeURIComponent(elem.href) + '&format=json&iframe=true';\r\n\t\tRESEnvironment.ajax({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: apiURL,\r\n\t\t\t// aggressiveCache: true,\r\n\t\t\tonload: function(response) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdef.resolve(elem, JSON.parse(response.responseText) );\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tdef.reject();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonerror: function(response) {\r\n\t\t\t\tdef.reject();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn def.promise();\r\n\t},\r\n\thandleInfo: function(elem, info) {\r\n\t\t// Get src from iframe html returned\r\n\t\tvar src = $(info.html).attr('src');\r\n\t\telem.type = 'IFRAME';\r\n\t\telem.setAttribute('data-embed', src);\r\n\t\telem.setAttribute('data-pause', '{\"method\":\"pause\"}');\r\n\t\telem.setAttribute('data-play', '{\"method\":\"play\"}');\r\n\t\treturn $.Deferred().resolve(elem).promise();\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
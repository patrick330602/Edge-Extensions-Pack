{"version":3,"sources":["modules/hosts/redditbooru.js"],"names":[],"mappings":";;;;AAAA,WAAW,YAAX,EAAyB,aAAzB,EAAwC;AACvC,UAAS,CAAC,iBAAD,CAAT;AACA,SAAQ,gBAAS,IAAT,EAAe,IAAf,EAAqB;AAC5B,SAAO,KAAK,OAAL,CAAa,0BAAb,KAA4C,CAA5C,CADqB;EAArB;AAGR,aAAY,oBAAS,IAAT,EAAe;AAC1B,MAAI,WAAW,yEAAX;MACH,OAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAP;MACA,SAAS,SAAS,IAAT,CAAc,IAAd,CAAT;MACA,MAAM,EAAE,QAAF,EAAN;MACA,SAAS,wCAAT;MACA,EALD,CAD0B;;AAQ1B,MAAI,MAAJ,EAAY;;;AAGX,OAAI,OAAO,CAAP,EAAU,MAAV,GAAmB,CAAnB,EAAsB;AACzB,SAAK,SAAS,OAAO,CAAP,CAAT,EAAoB,EAApB,CAAL,CADyB;IAA1B,MAEO;AACN,SAAK,OAAO,CAAP,CAAL,CADM;IAFP;;AAMA,aAAU,mBAAmB,EAAnB,CAAV,CATW;AAUX,kBAAe,IAAf,CAAoB;AACnB,YAAQ,KAAR;AACA,SAAK,MAAL;AACA,YAAQ,gBAAS,QAAT,EAAmB;AAC1B,SAAI,OAAO,EAAP,CADsB;AAE1B,SAAI;AACH,aAAO,KAAK,KAAL,CAAW,SAAS,YAAT,CAAlB,CADG;AAEH,UAAI,OAAJ,CAAY,IAAZ,EAAkB,IAAlB,EAFG;MAAJ,CAGE,OAAO,KAAP,EAAc;AACf,UAAI,MAAJ,CAAW,IAAX,EADe;MAAd;KALK;IAHT,EAVW;GAAZ;AAwBA,SAAO,IAAI,OAAJ,EAAP,CAhC0B;EAAf;AAkCZ,aAAY,oBAAS,IAAT,EAAe,IAAf,EAAqB;AAChC,MAAI,QAAO,mDAAP,KAAgB,QAAhB,IAA4B,KAAK,MAAL,GAAc,CAAd,EAAiB;AAChD,QAAK,GAAL,GAAW,KAAK,GAAL,CAAS,UAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB;AACrC,WAAO;AACN,YAAO,EAAE,OAAF;AACP,UAAK,EAAE,MAAF;AACL,WAAM,EAAE,MAAF;AACN,cAAS,EAAE,SAAF,CAAY,MAAZ,GAAqB,sBAAsB,EAAE,SAAF,GAAc,IAApC,GAA2C,EAAE,SAAF,GAAc,MAAzD,GAAiE,EAAtF;KAJV,CADqC;IAAlB,CAApB,CADgD;AAShD,QAAK,UAAL,GAAkB,KAAK,CAAL,EAAQ,KAAR,CAT8B;AAUhD,QAAK,IAAL,GAAY,SAAZ,CAVgD;GAAjD;AAYA,SAAO,EAAE,QAAF,GAAa,OAAb,CAAqB,IAArB,EAA2B,OAA3B,EAAP,CAbgC;EAArB;CAvCb","file":"modules/hosts/redditbooru.js","sourcesContent":["addLibrary('mediaHosts', 'redditbooru', {\r\n\tdomains: ['redditbooru.com'],\r\n\tdetect: function(href, elem) {\r\n\t\treturn href.indexOf('redditbooru.com/gallery/') >= 0;\r\n\t},\r\n\thandleLink: function(elem) {\r\n\t\tvar urlRegEx = /^http[s]?:\\/\\/([\\w\\.]+)?redditbooru\\.com\\/gallery\\/([\\w]+)(\\/[\\w\\-]+)?/i,\r\n\t\t\thref = elem.href.split('?')[0],\r\n\t\t\tgroups = urlRegEx.exec(href),\r\n\t\t\tdef = $.Deferred(),\r\n\t\t\tapiUrl = 'http://redditbooru.com/images/?postId=',\r\n\t\t\tid;\r\n\r\n\t\tif (groups) {\r\n\r\n\t\t\t// this will only be set for base36 IDs\r\n\t\t\tif (groups[3].length > 0) {\r\n\t\t\t\tid = parseInt(groups[2], 36);\r\n\t\t\t} else {\r\n\t\t\t\tid = groups[2];\r\n\t\t\t}\r\n\r\n\t\t\tapiUrl += encodeURIComponent(id);\r\n\t\t\tRESEnvironment.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: apiUrl,\r\n\t\t\t\tonload: function(response) {\r\n\t\t\t\t\tvar json = {};\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tjson = JSON.parse(response.responseText);\r\n\t\t\t\t\t\tdef.resolve(elem, json);\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tdef.reject(elem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn def.promise();\r\n\t},\r\n\thandleInfo: function(elem, info) {\r\n\t\tif (typeof info === 'object' && info.length > 0) {\r\n\t\t\telem.src = info.map(function(e, i, a) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: e.caption,\r\n\t\t\t\t\tsrc: e.cdnUrl,\r\n\t\t\t\t\thref: e.cdnUrl,\r\n\t\t\t\t\tcaption: e.sourceUrl.length ? 'Source: <a href=\"' + e.sourceUrl + '\">' + e.sourceUrl + '</a>': ''\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\telem.imageTitle = info[0].title;\r\n\t\t\telem.type = 'GALLERY';\r\n\t\t}\r\n\t\treturn $.Deferred().resolve(elem).promise();\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
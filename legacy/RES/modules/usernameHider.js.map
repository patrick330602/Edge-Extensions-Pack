{"version":3,"sources":["modules/usernameHider.js"],"names":[],"mappings":"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","file":"modules/usernameHider.js","sourcesContent":["addModule('usernameHider', function(module, moduleID) {\r\n\tmodule.moduleName = 'Username Hider';\r\n\tmodule.category = 'My account';\r\n\tmodule.disabledByDefault = true;\r\n\tmodule.description = 'Username hider hides your username from displaying on your screen when you\\'re logged in to reddit. \\\r\n\t\tThis way, if someone looks over your shoulder at work, or if you take a screenshot, your reddit username is not shown. \\\r\n\t\tThis only affects your screen. There is no way to post or comment on reddit without your post being linked to the account \\\r\n\t\tyou made it from.';\r\n\tmodule.options = {\r\n\t\tdisplayText: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: '~anonymous~',\r\n\t\t\tdescription: 'What to replace your username with. Default is ~anonymous~.'\r\n\t\t},\r\n\t\tperAccountDisplayText: {\r\n\t\t\ttype: 'table',\r\n\t\t\taddRowText: '+add account',\r\n\t\t\tfields: [{\r\n\t\t\t\tname: 'username',\r\n\t\t\t\ttype: 'text'\r\n\t\t\t}, {\r\n\t\t\t\tname: 'displayText',\r\n\t\t\t\ttype: 'text'\r\n\t\t\t}],\r\n\t\t\tvalue: [],\r\n\t\t\tdescription: 'Allows you to specify the display text for a specific account. (useful in conjunction with the Account Switcher!)'\r\n\t\t},\r\n\t\thideAllUsernames: {\r\n\t\t\tadvanced: true,\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Hide all accounts listed in perAccountDisplayText, not just the logged-in user.'\r\n\t\t},\r\n\t\thideAccountSwitcherUsernames: {\r\n\t\t\tadvanced: true,\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Hide all accounts listed in Account Switcher. <br> \\\r\n\t\t\tIf an username isn\\'t already listed in perAccountDisplayText, then hide that username with the default displayText.'\r\n\t\t},\r\n\t\tshowUsernameOnHover: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Mousing over the text hiding your username reveals your real username.<br>\\\r\n\t\t\tThis makes it easy to double check that you\\'re commenting/posting from the correct account,\\\r\n\t\t\twhile still keeping your username hidden from prying eyes.'\r\n\t\t}\r\n\t};\r\n\r\n\tvar tryAgain;\r\n\r\n\tmodule.beforeLoad = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tif (!RESUtils.loggedInUser(true)) {\r\n\t\t\t\ttryAgain = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\thideUsernames();\r\n\t\t}\r\n\t};\r\n\tmodule.go = function() {\r\n\t\tif ((this.isEnabled()) && (this.isMatchURL())) {\r\n\t\t\tif (tryAgain) {\r\n\t\t\t\thideUsernames();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.getDisplayText = function(username) {\r\n\t\tvar accounts = module.options.perAccountDisplayText.value,\r\n\t\t\tdisplayText;\r\n\t\tif (!username) {\r\n\t\t\tusername = RESUtils.loggedInUser();\r\n\t\t}\r\n\r\n\t\tif (username && accounts) {\r\n\t\t\tusername = username.toLowerCase();\r\n\r\n\t\t\tfor (var i = 0, len = accounts.length; i < len; i++) {\r\n\t\t\t\tif (accounts[i][0].toLowerCase() === username) {\r\n\t\t\t\t\tdisplayText = accounts[i][1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!displayText) {\r\n\t\t\tdisplayText = module.options.displayText.value ||\r\n\t\t\t\tmodule.options.displayText.default;\r\n\t\t}\r\n\r\n\t\treturn displayText;\r\n\t};\r\n\r\n\tfunction hideUsernames() {\r\n\t\thideUsername();\r\n\t\tif (module.options.hideAllUsernames.value) {\r\n\t\t\thideAllUsernames();\r\n\t\t}\r\n\t\tif (module.options.hideAccountSwitcherUsernames.value) {\r\n\t\t\thideAccountSwitcherUsernames();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideAllUsernames() {\r\n\t\tmodule.options.perAccountDisplayText.value.forEach(function(perAccountDisplayText) {\r\n\t\t\thideUsername(perAccountDisplayText[0]);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction hideAccountSwitcherUsernames() {\r\n\t\tvar accounts = modules['accountSwitcher'].options.accounts.value;\r\n\t\tif (accounts) {\r\n\t\t\taccounts.forEach(function(account) {\r\n\t\t\t\thideUsername(account[0]);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvar _hiddenUsername = {};\r\n\r\n\tfunction hideUsername(user) {\r\n\t\tuser = user || RESUtils.loggedInUser();\r\n\t\tvar curatedBy = document.querySelector('.multi-details > h2 a'),\r\n\t\t\tdisplayText = module.getDisplayText(user);\r\n\r\n\t\tif (!user) return;\r\n\r\n\t\tif (_hiddenUsername[user.toLowerCase()]) {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\t_hiddenUsername[user.toLowerCase()] = true;\r\n\t\t}\r\n\t\t// Hide username\r\n\t\tRESUtils.addCSS('p.tagline > a[href*=\\'/' + user + '\\'], #header .user > a[href*=\\'/' + user + '\\'], .titlebox .tagline a.author[href*=\\'/' + user + '\\'], .commentingAs, a.author[href*=\\'/' + user + '\\'], .bottom a[href*=\\'/' + user + '\\'] {line-height:0;font-size:0;content:none;}');\r\n\t\tRESUtils.addCSS('p.tagline > a[href*=\\'/' + user + '\\']:after, #header .user > a[href*=\\'/' + user + '\\']:after, .titlebox .tagline a.author[href*=\\'/' + user + '\\']:after,  a.author[href*=\\'/' + user + '\\']:after, .bottom a[href*=\\'/' + user + '\\']:after {content: \"' + displayText + '\";letter-spacing:normal;font-size:10px;background-color:inherit;border-radius:inherit;padding:inherit;}');\r\n\t\tRESUtils.addCSS('.commentingAs:after {content: \"Commenting as: ' + displayText + '\";letter-spacing:normal;font-size:12px;}');\r\n\r\n\t\t// Show username on hover\r\n\t\tif (module.options.showUsernameOnHover.value) {\r\n\t\t\tRESUtils.addCSS('p.tagline > a[href*=\\'/' + user + '\\']:hover, #header .user > a[href*=\\'/' + user + '\\']:hover, .titlebox .tagline a.author[href*=\\'/' + user + '\\']:hover, .commentingAs:hover, a.author[href*=\\'/' + user + '\\']:hover, .bottom a[href*=\\'/' + user + '\\']:hover {line-height:inherit;font-size:inherit;}');\r\n\t\t\tRESUtils.addCSS('p.tagline > a[href*=\\'/' + user + '\\']:hover:after, #header .user > a[href*=\\'/' + user + '\\']:hover:after, .titlebox .tagline a.author[href*=\\'/' + user + '\\']:hover:after, a.author[href*=\\'/' + user + '\\']:hover:after, .bottom a[href*=\\'/' + user + '\\']:hover:after {content:none;}');\r\n\t\t\tRESUtils.addCSS('.commentingAs:hover:after {content: none;}');\r\n\t\t}\r\n\r\n\t\tif (curatedBy) {\r\n\t\t\tvar curatedByUsername = curatedBy.href.match(RESUtils.regexes.profile);\r\n\t\t\tif (curatedByUsername && curatedByUsername[1].toLowerCase() === user.toLowerCase()) {\r\n\t\t\t\tcuratedBy.textContent = curatedBy.textContent.replace(user, displayText);\r\n\r\n\t\t\t\t// Show username on hover\r\n\t\t\t\tif (module.options.showUsernameOnHover.value) {\r\n\t\t\t\t\t$(curatedBy)\r\n\t\t\t\t\t\t.on('mouseenter', function() {\r\n\t\t\t\t\t\t\tthis.textContent = this.textContent.replace(displayText, user);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('mouseleave', function() {\r\n\t\t\t\t\t\t\tthis.textContent = this.textContent.replace(user, displayText);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}
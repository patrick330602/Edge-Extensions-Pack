{"version":3,"sources":["modules/userInfo.js"],"names":[],"mappings":"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","file":"modules/userInfo.js","sourcesContent":["addModule('userInfo', function(module, moduleID) {\r\n\tmodule.moduleName = 'User Info';\r\n\tmodule.category = ['Users'];\r\n\tmodule.description = 'Adds a hover tooltip to users';\r\n\tmodule.options = {\r\n\t\thoverInfo: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Show information on user (karma, how long they\\'ve been a redditor) on hover.'\r\n\t\t},\r\n\t\tuseQuickMessage: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Open the quick message dialog when clicking on the \"send message\" button in hover info, instead of going straight to reddit\\'s message page.',\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t},\r\n\t\thoverDelay: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: 800,\r\n\t\t\tdescription: 'Delay, in milliseconds, before hover tooltip loads. Default is 800.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t},\r\n\t\tfadeDelay: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: 200,\r\n\t\t\tdescription: 'Delay, in milliseconds, before hover tooltip fades away. Default is 200.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t},\r\n\t\tfadeSpeed: {\r\n\t\t\ttype: 'text',\r\n\t\t\tvalue: 0.7,\r\n\t\t\tdescription: 'Fade animation\\'s speed (in seconds). Default is 0.7.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t},\r\n\t\tgildComments: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'When clicking the \"give gold\" button on the user hover info on a comment, give gold to the comment.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t},\r\n\t\thighlightButton: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: true,\r\n\t\t\tdescription: 'Show \"highlight\" button in user hover info, for distinguishing posts/comments from particular users.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t},\r\n\t\thighlightColor: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#5544CC',\r\n\t\t\tdescription: 'Color used to highlight a selected user, when \"highlighted\" from hover info.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightButton'\r\n\t\t},\r\n\t\thighlightColorHover: {\r\n\t\t\ttype: 'color',\r\n\t\t\tvalue: '#6677AA',\r\n\t\t\tdescription: 'Color used to highlight a selected user on hover.',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'highlightButton'\r\n\t\t},\r\n\t\tUSDateFormat: {\r\n\t\t\ttype: 'boolean',\r\n\t\t\tvalue: false,\r\n\t\t\tdescription: 'Show date (redditor since...) in US format (i.e. 08-31-2010)',\r\n\t\t\tadvanced: true,\r\n\t\t\tdependsOn: 'hoverInfo'\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.go = function() {\r\n\t\tif ((module.isEnabled()) && (module.isMatchURL())) {\r\n\t\t\t$(document.body).on('mouseover', modules['userTagger'].usernameSelector, handleMouseOver);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction handleMouseOver(e) {\r\n\t\tif (!modules['userTagger'].usernameRE.test(e.target.href)) return;\r\n\t\tmodules['hover'].infocard(moduleID)\r\n\t\t\t.target(e.target)\r\n\t\t\t.options({\r\n\t\t\t\twidth: 475,\r\n\t\t\t\topenDelay: module.options.hoverDelay.value,\r\n\t\t\t\tfadeDelay: module.options.fadeDelay.value,\r\n\t\t\t\tfadeSpeed: module.options.fadeSpeed.value\r\n\t\t\t})\r\n\t\t\t.populateWith(showUserInfo)\r\n\t\t\t.begin();\r\n\t}\r\n\r\n\tvar lastOpenedAuthorLink, authorInfoToolTipHighlight;\r\n\r\n\tfunction showUserInfo(def, obj, context) {\r\n\t\tvar test = obj.href.match(modules['userTagger'].usernameRE),\r\n\t\t\tthisUserName,\r\n\t\t\tnameLowerCase,\r\n\t\t\tthrobber = '<span class=\"RESThrobber\"></span>';\r\n\r\n\t\tif (test) {\r\n\t\t\tthisUserName = test[1];\r\n\t\t\tnameLowerCase = thisUserName.toLowerCase();\r\n\t\t}\r\n\r\n\t\tlastOpenedAuthorLink = obj;\r\n\r\n\t\t// Get the logged in user's ID and store it on first run.\r\n\t\tif (!module.loggedInID) {\r\n\t\t\t// Clear the author's cache so the friend button will have both\r\n\t\t\t// author and logged in user's ID.\r\n\t\t\tRESUtils.cache.expire({endpoint: '/user/' + nameLowerCase + '/about.json'});\r\n\t\t\tRESUtils.getUserInfo(function(me) {\r\n\t\t\t\tmodule.loggedInID = me.data.id;\r\n\t\t\t});\r\n\t\t}\r\n\t\tdef.notify(thisUserName, throbber);\r\n\r\n\t\tRESUtils.cache.fetch({\r\n\t\t\tmethod: 'GET',\r\n\t\t\tendpoint: '/user/' + nameLowerCase + '/about.json',\r\n\t\t\tcallback: renderAuthorInfo.bind(null, def, obj)\r\n\t\t});\r\n\t}\r\n\r\n\tfunction hideAuthorInfo() {\r\n\t\tmodules['hover'].infocard('userInfo').close();\r\n\t}\r\n\r\n\tfunction renderAuthorInfo(def, authorLink, data) {\r\n\t\tif (!(data && data.data)) {\r\n\t\t\tdef.resolve(undefined, 'User not found');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdata = data.data;\r\n\t\tvar userTaggerEnabled = (modules['userTagger'].isEnabled()) && (modules['userTagger'].isMatchURL());\r\n\t\tvar utctime = data.created_utc;\r\n\t\tvar d = new Date(utctime * 1000);\r\n\t\tvar friendButton;\r\n\t\tvar myID = 't2_' + module.loggedInID;\r\n\t\tdata.name = data.name.toLowerCase();\r\n\r\n\t\tvar header = $('<div />');\r\n\t\theader.append('<a href=\"/user/' + escapeHTML(data.name) + '\">/u/' + escapeHTML(data.name) + '</a> (<a href=\"/user/' + escapeHTML(data.name) + '/submitted/\">Links</a>) (<a href=\"/user/' + escapeHTML(data.name) + '/comments/\">Comments</a>)');\r\n\r\n\t\t// Add friend button to header.\r\n\t\tif (data.is_friend) {\r\n\t\t\tfriendButton = '<span class=\"fancy-toggle-button toggle\" style=\"display: inline-block; margin-left: 12px;\"><a class=\"option active remove\" href=\"#\" tabindex=\"100\" onclick=\"return toggle(this, unfriend(\\'' + data.name + '\\', \\'' + myID + '\\', \\'friend\\'), friend(\\'' + data.name + '\\', \\'' + myID + '\\', \\'friend\\'))\">- friends</a><a class=\"option add\" href=\"#\">+ friends</a></span>';\r\n\t\t} else {\r\n\t\t\tfriendButton = '<span class=\"fancy-toggle-button toggle\" style=\"display: inline-block; margin-left: 12px;\"><a class=\"option active add\" href=\"#\" tabindex=\"100\" onclick=\"return toggle(this, friend(\\'' + data.name + '\\', \\'' + myID + '\\', \\'friend\\'), unfriend(\\'' + data.name + '\\', \\'' + myID + '\\', \\'friend\\'))\">+ friends</a><a class=\"option remove\" href=\"#\">- friends</a></span>';\r\n\t\t}\r\n\t\theader.append(friendButton);\r\n\t\theader.find('.toggle').click(function(e) {\r\n\t\t\tif (e.target.tagName !== 'A') return;\r\n\t\t\t// The cache is now outdated, so expire it.\r\n\t\t\tRESUtils.cache.expire({endpoint: '/user/' + data.name + '/about.json'});\r\n\t\t});\r\n\r\n\t\tdef.notify(header, 'Getting friend button...');\r\n\r\n\t\t// var userHTML = '<a class=\"hoverAuthor\" href=\"/user/'+data.name+'\">'+data.name+'</a>:';\r\n\t\tvar userHTML = '<div class=\"authorFieldPair\"><div class=\"authorLabel\">Redditor since:</div> <div class=\"authorDetail\">' + RESUtils.niceDate(d, module.options.USDateFormat.value) + ' (' + RESUtils.niceDateDiff(d) + ')</div></div>';\r\n\t\tuserHTML += '<div class=\"authorFieldPair\"><div class=\"authorLabel\">Link Karma:</div> <div class=\"authorDetail\">' + escapeHTML(data.link_karma) + '</div></div>';\r\n\t\tuserHTML += '<div class=\"authorFieldPair\"><div class=\"authorLabel\">Comment Karma:</div> <div class=\"authorDetail\">' + escapeHTML(data.comment_karma) + '</div></div>';\r\n\t\tif (modules['userTagger'].tags && modules['userTagger'].tags[data.name] && modules['userTagger'].tags[data.name].link) {\r\n\t\t\tvar links = modules['userTagger'].tags[data.name].link.split(/\\s/).reduce(function(pre, cur) {\r\n\t\t\t\treturn pre + '<a target=\"_blank\" href=\"' + escapeHTML(cur) + '\">' + escapeHTML(cur).replace(/^https?:\\/\\/(www\\.)?/, '') + '</a>';\r\n\t\t\t}, '');\r\n\t\t\tuserHTML += '<div class=\"authorFieldPair\"><div class=\"authorLabel\">Link:</div> <div class=\"authorDetail\">' + links + '</div></div>';\r\n\t\t}\r\n\t\tuserHTML += '<div class=\"clear\"></div><div class=\"bottomButtons\">';\r\n\t\tuserHTML += '<a target=\"_blank\" class=\"blueButton composeButton\" href=\"/message/compose/?to=' + escapeHTML(data.name) + '\"><img src=\"https://redditstatic.s3.amazonaws.com/mailgray.png\"> send message</a>';\r\n\t\tif (data.is_gold) {\r\n\t\t\tuserHTML += '<a target=\"_blank\" class=\"blueButton\" href=\"/gold/about\">User has Reddit Gold</a>';\r\n\t\t} else {\r\n\t\t\tuserHTML += '<a target=\"_blank\" id=\"gildUser\" class=\"blueButton\" href=\"/gold?goldtype=gift&recipient=' + escapeHTML(data.name) + '\">Gift Reddit Gold</a>';\r\n\t\t}\r\n\r\n\t\tif (module.options.highlightButton.value) {\r\n\t\t\tif (!module.highlightedUsers || !module.highlightedUsers[data.id]) {\r\n\t\t\t\tuserHTML += '<div class=\"blueButton\" id=\"highlightUser\" userid=\"' + escapeHTML(data.id) + '\">Highlight</div>';\r\n\t\t\t} else {\r\n\t\t\t\tuserHTML += '<div class=\"redButton\" id=\"highlightUser\" userid=\"' + escapeHTML(data.id) + '\">Unhighlight</div>';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (userTaggerEnabled && (modules['userTagger'].tags && modules['userTagger'].tags[data.name]) && (modules['userTagger'].tags[data.name].ignore)) {\r\n\t\t\tuserHTML += '<div class=\"redButton\" id=\"ignoreUser\" user=\"' + escapeHTML(data.name) + '\">&empty; Unignore</div>';\r\n\t\t} else {\r\n\t\t\tuserHTML += '<div class=\"blueButton\" id=\"ignoreUser\" user=\"' + escapeHTML(data.name) + '\">&empty; Ignore</div>';\r\n\t\t}\r\n\t\tuserHTML += '<div class=\"clear\"></div></div>'; // closes bottomButtons div\r\n\t\tvar body = $('<div id=\"authorInfoToolTip\" />').append(userHTML);\r\n\t\tdef.resolve(null, body);\r\n\r\n\t\tif (userTaggerEnabled) {\r\n\t\t\tvar ignoreButton = body.find('#ignoreUser');\r\n\t\t\tignoreButton.on('click', ignoreUser);\r\n\t\t}\r\n\t\tif (module.options.highlightButton.value) {\r\n\t\t\tauthorInfoToolTipHighlight = body.find('#highlightUser');\r\n\t\t\tauthorInfoToolTipHighlight.on('click', function(e) {\r\n\t\t\t\tvar userid = e.target.getAttribute('userid');\r\n\t\t\t\ttoggleUserHighlight(userid);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (module.options.gildComments.value && RESUtils.pageType() === 'comments') {\r\n\t\t\tvar giveGold = body.find('#gildUser');\r\n\t\t\tgiveGold.on('click', function(e) {\r\n\t\t\t\tif (e.ctrlKey || e.cmdKey || e.shiftKey) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar comment = $(authorLink).closest('.comment');\r\n\t\t\t\tif (!comment) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thideAuthorInfo();\r\n\t\t\t\tvar giveGold = comment.find('.give-gold')[0];\r\n\t\t\t\tRESUtils.click(giveGold);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (module.options.useQuickMessage.value && modules['quickMessage'].isEnabled()) {\r\n\t\t\tvar composeButton = body.find('a.composeButton');\r\n\t\t\tcomposeButton.on('click', function(e) {\r\n\t\t\t\tif (e.which === 1) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar entryUrl;\r\n\t\t\t\t\tif (modules['quickMessage'].options.linkToCurrentPage.value) {\r\n\t\t\t\t\t\tvar permalink = $(lastOpenedAuthorLink).closest('.entry').find('a.bylink');\r\n\t\t\t\t\t\tif (permalink.length) {\r\n\t\t\t\t\t\t\tentryUrl = permalink[0].href;\r\n\t\t\t\t\t\t\tif (entryUrl.indexOf('?context=') === -1) {\r\n\t\t\t\t\t\t\t\tentryUrl += '?context=10';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmodules['quickMessage'].openQuickMessageDialog({\r\n\t\t\t\t\t\tto: escapeHTML(data.name),\r\n\t\t\t\t\t\tbody: entryUrl\r\n\t\t\t\t\t});\r\n\t\t\t\t\thideAuthorInfo();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleUserHighlight(userid) {\r\n\t\tif (!module.highlightedUsers) {\r\n\t\t\tmodule.highlightedUsers = {};\r\n\t\t}\r\n\t\tif (module.highlightedUsers[userid]) {\r\n\t\t\tmodule.highlightedUsers[userid].remove();\r\n\t\t\tdelete module.highlightedUsers[userid];\r\n\t\t\ttoggleUserHighlightButton(true);\r\n\t\t\tif (modules['commentNavigator'].isEnabled() && modules['commentNavigator'].isMatchURL() && modules['commentNavigator'].options.openOnHighlightUser.value) {\r\n\t\t\t\tmodules['commentNavigator'].getPostsByCategory(); // refresh informations\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmodule.highlightedUsers[userid] = modules['userHighlight'].highlightUser(userid);\r\n\t\t\ttoggleUserHighlightButton(false);\r\n\t\t\tif (modules['commentNavigator'].isEnabled() && modules['commentNavigator'].isMatchURL() && modules['commentNavigator'].options.openOnHighlightUser.value) {\r\n\t\t\t\tmodules['commentNavigator'].showNavigator('highlighted');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleUserHighlightButton(canHighlight) {\r\n\t\tauthorInfoToolTipHighlight\r\n\t\t\t.toggleClass('blueButton', canHighlight)\r\n\t\t\t.toggleClass('redButton', !canHighlight)\r\n\t\t\t.text(canHighlight ? 'Highlight' : 'Unhighlight');\r\n\t}\r\n\r\n\tfunction ignoreUser(e) {\r\n\t\tvar thisIgnore, thisName;\r\n\r\n\t\tif (e.target.classList.contains('blueButton')) {\r\n\t\t\te.target.classList.remove('blueButton');\r\n\t\t\te.target.classList.add('redButton');\r\n\t\t\t$(e.target).html('&empty; Unignore');\r\n\t\t\tthisIgnore = true;\r\n\t\t} else {\r\n\t\t\te.target.classList.remove('redButton');\r\n\t\t\te.target.classList.add('blueButton');\r\n\t\t\t$(e.target).html('&empty; Ignore');\r\n\t\t\tthisIgnore = false;\r\n\t\t}\r\n\t\tthisName = e.target.getAttribute('user');\r\n\t\tmodules['userTagger'].ignoreUser(thisName, thisIgnore);\r\n\t}\r\n});\r\n"],"sourceRoot":"/source/"}